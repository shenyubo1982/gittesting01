_.Module.define({path:"common/widget/ScrollPanel",sub:{dom:null,$content:null,$scrollBar:null,$scrollButton:null,_hasScroll:!1,_scrollStep:50,_scrollTop:0,_maxHeight:0,initial:function(t){this._buildUI(t),this._bindEvents(t),$(t.container).append(this.dom),this.setHeight(t.height||100),t.content&&this.setContent(t.content),t.scrollBarShow&&this.bind("onScrollBarShow",t.scrollBarShow),t.scrollBarHide&&this.bind("onScrollBarHide",t.scrollBarHide)},_buildUI:function(t){this.dom=$('<div class="tbui_scroll_panel"></div>'),this.dom.html(['<div class="tbui_panel_content j_panel_content clearfix"><ul></ul></div>','<div class="tbui_scroll_bar j_scroll_bar">','<div class="tbui_scroll_button j_scroll_button">&nbsp;</div>',"</div>"].join("")),this.$content=this.dom.find(".j_panel_content:first"),this.$scrollBar=this.dom.find(".j_scroll_bar:first"),this.$scrollButton=this.dom.find(".j_scroll_button:first"),t.padding&&this.$content.css("padding",t.padding)},_bindEvents:function(){var t=this,o=t.$content.get(0);this.$scrollButton.on("drag",function(i,l){if(l){var s=l.position;o.scrollTop=s.top/t.$content.height()*o.scrollHeight}}),this.$content.mousewheel(function(o,i){o.preventDefault(),o.stopPropagation(),t._hasScroll&&t.scrollTopTo(t._scrollTop-i*t._scrollStep)})},scrollTopTo:function(t){var o=this,i=o.$content.get(0),t=Math.max(Math.min(t,i.scrollHeight-o.$content.height()),0);t!=o._scrollTop&&(o._scrollTop=t,o.$content.stop(),o.$content.scrollTop(o._scrollTop),o._resizeScroll())},setHeight:function(t){this._maxHeight=t,this._resizeHeight(),this._resizeScroll(),this.$scrollButton.draggable({containment:"parent"})},setContent:function(t){this.$content.html(t),this.$content.get(0).scrollTop=this._scrollTop=0,this._resizeHeight(),this._resizeScroll()},appendContent:function(t){this.$content.append(t),this._resizeHeight(),this.scrollTopTo(2e4)},clearContent:function(){this.setContent("")},_resizeHeight:function(){this.$content.css("height","");var t=this.$content.get(0),o=t.scrollHeight,i=Math.min(o,this._maxHeight);this.$content.css("height",i)},_resizeScroll:function(){var t=this.$content.get(0),o=t.scrollHeight,i=t.scrollTop,l=this.$content.innerHeight();l>=o?(this.$scrollBar.hide(),this.dom.addClass("tbui_no_scroll_bar"),this.trigger("onScrollBarHide"),this._hasScroll=!1):(this.$scrollBar.show(),this.$scrollBar.height(l),this.$scrollButton.height(l/o*l),this.$scrollButton.css("top",i/o*l),this.trigger("onScrollBarShow"),this._hasScroll=!0)}}});_.Module.define({path:"tbmall/component/captcha_payment",sub:{initial:function(a){this.reCommitUrl=a.url,this.data=a.data},showCaptcha:function(a,t){var e=this,c=PageData.tbs||PageData.user.tbs,o=2150040==e.data.no?"\u6B63\u786E\u8F93\u5165\u9A8C\u8BC1\u7801\u540E\uFF0C\u53EF\u7EE7\u7EED\u8D2D\u4E70":"\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165";this.requireInstanceAsync("common/component/CaptchaDialog",{message:e.data.data.captcha_str_reason,vCode:e.data.data.captcha_vcode_str,vCodeType:e.data.data.captcha_code_type,exceptionalAccount:0,title:"T\u8C46\u652F\u4ED8\u9A8C\u8BC1\u7801",message:o,forumName:"",modal:!0,forumId:0,checkUrl:"/tbmall/vcode/safecheckvcode?tbs="+c,vCodeUrl:"/tbmall/vcode/safegetvcode",paramsCallback:function(){return{tbs:c}}},function(e){e.bind("onclose",function(){e.hide(),$.tb.location.reload()}),e.bind("onaccept",function(){var c={};c.captcha_input_str=e.getInputValue(),c.captcha_vcode_str=e.getVCode(),"function"==typeof a&&(t?a.call(t,c):a(c))}),e.show()})}}});_.Module.define({path:"tbmall/widget/paykey_rsa",requires:[],sub:{RSA:{},publicKey:"",setKey:function(){this.publicKey=pkey},getKey:function(){var t=this;$.ajax({url:"/tbmall/pass/getpubkey",type:"get",dataType:"json",success:function(e){PageData.publicKey=e.data.pubkey,t.publicKey=PageData.publicKey}})},vcode:function(t){var e=new this.RSA;return e.setKey(this.publicKey),encodeURIComponent(e.encrypt(t))},initial:function(t){var e=this,i=$.extend({},t);PageData.publicKey||i.publicKey?this.publicKey=PageData.publicKey:this.getKey(),function(t){function e(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new e(null)}function r(t,e,i,r,s,n){for(;--n>=0;){var o=e*this[t++]+i[r]+s;s=Math.floor(o/67108864),i[r++]=67108863&o}return s}function s(t,e,i,r,s,n){for(var o=32767&e,h=e>>15;--n>=0;){var a=32767&this[t],u=this[t++]>>15,c=h*a+u*o;a=o*a+((32767&c)<<15)+i[r]+(1073741823&s),s=(a>>>30)+(c>>>15)+h*u+(s>>>30),i[r++]=1073741823&a}return s}function n(t,e,i,r,s,n){for(var o=16383&e,h=e>>14;--n>=0;){var a=16383&this[t],u=this[t++]>>14,c=h*a+u*o;a=o*a+((16383&c)<<14)+i[r]+s,s=(a>>28)+(c>>14)+h*u,i[r++]=268435455&a}return s}function o(t){return Ui.charAt(t)}function h(t,e){var i=Oi[t.charCodeAt(e)];return null==i?-1:i}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function c(t){var e=i();return e.fromInt(t),e}function f(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return this.fromRadix(t,i),void 0;r=2}this.t=0,this.s=0;for(var s=t.length,n=!1,o=0;--s>=0;){var a=8==r?255&t[s]:h(t,s);0>a?"-"==t.charAt(s)&&(n=!0):(n=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&e.ZERO.subTo(this,this)}function p(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function l(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,s=!1,n="",h=this.t,a=this.DB-h*this.DB%e;if(h-->0)for(a<this.DB&&(i=this[h]>>a)>0&&(s=!0,n=o(i));h>=0;)e>a?(i=(this[h]&(1<<a)-1)<<e-a,i|=this[--h]>>(a+=this.DB-e)):(i=this[h]>>(a-=e)&r,0>=a&&(a+=this.DB,--h)),i>0&&(s=!0),s&&(n+=o(i));return s?n:"0"}function d(){var t=i();return e.ZERO.subTo(this,t),t}function g(){return this.s<0?this.negate():this}function y(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function m(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function b(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function T(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function S(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function R(t,e){var i,r=t%this.DB,s=this.DB-r,n=(1<<s)-1,o=Math.floor(t/this.DB),h=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>s|h,h=(this[i]&n)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=h,e.t=this.t+o+1,e.s=this.s,e.clamp()}function D(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return e.t=0,void 0;var r=t%this.DB,s=this.DB-r,n=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&n)<<s,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&n)<<s),e.t=this.t-i,e.clamp()}function E(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function x(t,i){var r=this.abs(),s=t.abs(),n=r.t;for(i.t=n+s.t;--n>=0;)i[n]=0;for(n=0;n<s.t;++n)i[n+r.t]=r.am(0,s[n],i,n,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&e.ZERO.subTo(i,i)}function w(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function K(t,r,s){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=r&&r.fromInt(0),null!=s&&this.copyTo(s),void 0;null==s&&(s=i());var h=i(),a=this.s,u=t.s,c=this.DB-m(n[n.t-1]);c>0?(n.lShiftTo(c,h),o.lShiftTo(c,s)):(n.copyTo(h),o.copyTo(s));var f=h.t,p=h[f-1];if(0!=p){var l=p*(1<<this.F1)+(f>1?h[f-2]>>this.F2:0),d=this.FV/l,g=(1<<this.F1)/l,y=1<<this.F2,v=s.t,b=v-f,T=null==r?i():r;for(h.dlShiftTo(b,T),s.compareTo(T)>=0&&(s[s.t++]=1,s.subTo(T,s)),e.ONE.dlShiftTo(f,T),T.subTo(h,h);h.t<f;)h[h.t++]=0;for(;--b>=0;){var S=s[--v]==p?this.DM:Math.floor(s[v]*d+(s[v-1]+y)*g);if((s[v]+=h.am(0,S,s,b,0,f))<S)for(h.dlShiftTo(b,T),s.subTo(T,s);s[v]<--S;)s.subTo(T,s)}null!=r&&(s.drShiftTo(f,r),a!=u&&e.ZERO.subTo(r,r)),s.t=f,s.clamp(),c>0&&s.rShiftTo(c,s),0>a&&e.ZERO.subTo(s,s)}}}function A(t){var r=i();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r}function B(t){this.m=t}function U(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function V(t){t.divRemTo(this.m,null,t)}function N(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function J(t,e){t.squareTo(e),this.reduce(e)}function I(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function P(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function M(t){var r=i();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&r.compareTo(e.ZERO)>0&&this.m.subTo(r,r),r}function L(t){var e=i();return t.copyTo(e),this.reduce(e),e}function q(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function C(t,e){t.squareTo(e),this.reduce(e)}function H(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function j(){return 0==(this.t>0?1&this[0]:this.s)}function k(t,r){if(t>4294967295||1>t)return e.ONE;var s=i(),n=i(),o=r.convert(this),h=m(t)-1;for(o.copyTo(s);--h>=0;)if(r.sqrTo(s,n),(t&1<<h)>0)r.mulTo(n,o,s);else{var a=s;s=n,n=a}return r.revert(s)}function F(t,e){var i;return i=256>t||e.isEven()?new B(e):new P(e),this.exp(t,i)}function _(){var t=i();return this.copyTo(t),t}function z(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Z(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function Y(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),s=c(r),n=i(),o=i(),h="";for(this.divRemTo(s,n,o);n.signum()>0;)h=(r+o.intValue()).toString(t).substr(1)+h,n.divRemTo(s,n,o);return o.intValue().toString(t)+h}function X(t,i){this.fromInt(0),null==i&&(i=10);for(var r=this.chunkSize(i),s=Math.pow(i,r),n=!1,o=0,a=0,u=0;u<t.length;++u){var c=h(t,u);0>c?"-"==t.charAt(u)&&0==this.signum()&&(n=!0):(a=i*a+c,++o>=r&&(this.dMultiply(s),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(i,o)),this.dAddOffset(a,0)),n&&e.ZERO.subTo(this,this)}function te(t,i,r){if("number"==typeof i)if(2>t)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),ae,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var s=new Array,n=7&t;s.length=(t>>3)+1,i.nextBytes(s),n>0?s[0]&=(1<<n)-1:s[0]=0,this.fromString(s,256)}}function ee(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,s=0;if(t-->0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=i|this.s<<this.DB-r);t>=0;)8>r?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i);return e}function ie(t){return 0==this.compareTo(t)}function re(t){return this.compareTo(t)<0?this:t}function se(t){return this.compareTo(t)>0?this:t}function ne(t,e,i){var r,s,n=Math.min(t.t,this.t);for(r=0;n>r;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=n;r<this.t;++r)i[r]=e(this[r],s);i.t=this.t}else{for(s=this.s&this.DM,r=n;r<t.t;++r)i[r]=e(s,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function oe(t,e){return t&e}function he(t){var e=i();return this.bitwiseTo(t,oe,e),e}function ae(t,e){return t|e}function ue(t){var e=i();return this.bitwiseTo(t,ae,e),e}function ce(t,e){return t^e}function fe(t){var e=i();return this.bitwiseTo(t,ce,e),e}function pe(t,e){return t&~e}function le(t){var e=i();return this.bitwiseTo(t,pe,e),e}function de(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function ge(t){var e=i();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function ye(t){var e=i();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function me(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function ve(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+me(this[t]);return this.s<0?this.t*this.DB:-1}function be(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function Te(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=be(this[i]^e);return t}function Se(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Re(t,i){var r=e.ONE.shiftLeft(t);return this.bitwiseTo(r,i,r),r}function De(t){return this.changeBit(t,ae)}function Ee(t){return this.changeBit(t,pe)}function xe(t){return this.changeBit(t,ce)}function we(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[i++]=r:-1>r&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function Ke(t){var e=i();return this.addTo(t,e),e}function Ae(t){var e=i();return this.subTo(t,e),e}function Be(t){var e=i();return this.multiplyTo(t,e),e}function Ue(){var t=i();return this.squareTo(t),t}function Oe(t){var e=i();return this.divRemTo(t,e,null),e}function Ve(t){var e=i();return this.divRemTo(t,null,e),e}function Ne(t){var e=i(),r=i();return this.divRemTo(t,e,r),new Array(e,r)}function Je(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Ie(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Pe(){}function Me(t){return t}function Le(t,e,i){t.multiplyTo(e,i)}function qe(t,e){t.squareTo(e)}function Ce(t){return this.exp(t,new Pe)}function He(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var s;for(s=i.t-this.t;s>r;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(s=Math.min(t.t,e);s>r;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function je(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function ke(t){this.r2=i(),this.q3=i(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Fe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function _e(t){return t}function ze(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ze(t,e){t.squareTo(e),this.reduce(e)}function Ge(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function $e(t,e){var r,s,n=t.bitLength(),o=c(1);if(0>=n)return o;r=18>n?1:48>n?3:144>n?4:768>n?5:6,s=8>n?new B(e):e.isEven()?new ke(e):new P(e);var h=new Array,a=3,u=r-1,f=(1<<r)-1;if(h[1]=s.convert(this),r>1){var p=i();for(s.sqrTo(h[1],p);f>=a;)h[a]=i(),s.mulTo(p,h[a-2],h[a]),a+=2}var l,d,g=t.t-1,y=!0,v=i();for(n=m(t[g])-1;g>=0;){for(n>=u?l=t[g]>>n-u&f:(l=(t[g]&(1<<n+1)-1)<<u-n,g>0&&(l|=t[g-1]>>this.DB+n-u)),a=r;0==(1&l);)l>>=1,--a;if((n-=a)<0&&(n+=this.DB,--g),y)h[l].copyTo(o),y=!1;else{for(;a>1;)s.sqrTo(o,v),s.sqrTo(v,o),a-=2;a>0?s.sqrTo(o,v):(d=o,o=v,v=d),s.mulTo(v,h[l],o)}for(;g>=0&&0==(t[g]&1<<n);)s.sqrTo(o,v),d=o,o=v,v=d,--n<0&&(n=this.DB-1,--g)}return s.revert(o)}function Ye(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var s=e.getLowestSetBit(),n=i.getLowestSetBit();if(0>n)return e;for(n>s&&(n=s),n>0&&(e.rShiftTo(n,e),i.rShiftTo(n,i));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return n>0&&i.lShiftTo(n,i),i}function We(t){if(0>=t)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function Qe(t){var i=t.isEven();if(this.isEven()&&i||0==t.signum())return e.ZERO;for(var r=t.clone(),s=this.clone(),n=c(1),o=c(0),h=c(0),a=c(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;s.isEven();)s.rShiftTo(1,s),i?(h.isEven()&&a.isEven()||(h.addTo(this,h),a.subTo(t,a)),h.rShiftTo(1,h)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(s)>=0?(r.subTo(s,r),i&&n.subTo(h,n),o.subTo(a,o)):(s.subTo(r,s),i&&h.subTo(n,h),a.subTo(o,a))}return 0!=s.compareTo(e.ONE)?e.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}function Xe(t){var e,i=this.abs();if(1==i.t&&i[0]<=Vi[Vi.length-1]){for(e=0;e<Vi.length;++e)if(i[0]==Vi[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Vi.length;){for(var r=Vi[e],s=e+1;s<Vi.length&&Ni>r;)r*=Vi[s++];for(r=i.modInt(r);s>e;)if(r%Vi[e++]==0)return!1}return i.millerRabin(t)}function ti(t){var r=this.subtract(e.ONE),s=r.getLowestSetBit();if(0>=s)return!1;var n=r.shiftRight(s);t=t+1>>1,t>Vi.length&&(t=Vi.length);for(var o=i(),h=0;t>h;++h){o.fromInt(Vi[Math.floor(Math.random()*Vi.length)]);var a=o.modPow(n,this);if(0!=a.compareTo(e.ONE)&&0!=a.compareTo(r)){for(var u=1;u++<s&&0!=a.compareTo(r);)if(a=a.modPowInt(2,this),0==a.compareTo(e.ONE))return!1;if(0!=a.compareTo(r))return!1}}return!0}function ei(){this.i=0,this.j=0,this.S=new Array}function ii(t){var e,i,r;for(e=0;256>e;++e)this.S[e]=e;for(i=0,e=0;256>e;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0}function ri(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function si(){return new ei}function ni(t){Ii[Pi++]^=255&t,Ii[Pi++]^=t>>8&255,Ii[Pi++]^=t>>16&255,Ii[Pi++]^=t>>24&255,Pi>=Mi&&(Pi-=Mi)}function oi(){ni((new Date).getTime())}function hi(){if(null==Ji){for(oi(),Ji=si(),Ji.init(Ii),Pi=0;Pi<Ii.length;++Pi)Ii[Pi]=0;Pi=0}return Ji.next()}function ai(t){var e;for(e=0;e<t.length;++e)t[e]=hi()}function ui(){}function ci(t,i){return new e(t,i)}function fi(t,i){if(i<t.length+11)return console.error("Message too long for RSA"),null;for(var r=new Array,s=t.length-1;s>=0&&i>0;){var n=t.charCodeAt(s--);128>n?r[--i]=n:n>127&&2048>n?(r[--i]=63&n|128,r[--i]=n>>6|192):(r[--i]=63&n|128,r[--i]=n>>6&63|128,r[--i]=n>>12|224)}r[--i]=0;for(var o=new ui,h=new Array;i>2;){for(h[0]=0;0==h[0];)o.nextBytes(h);r[--i]=h[0]}return r[--i]=2,r[--i]=0,new e(r)}function pi(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function li(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=ci(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")}function di(t){return t.modPowInt(this.e,this.n)}function gi(t){var e=fi(t,this.n.bitLength()+7>>3);if(null==e)return null;var i=this.doPublic(e);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r}function yi(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var s="";++r<i.length;){var n=255&i[r];128>n?s+=String.fromCharCode(n):n>191&&224>n?(s+=String.fromCharCode((31&n)<<6|63&i[r+1]),++r):(s+=String.fromCharCode((15&n)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return s}function mi(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=ci(t,16),this.e=parseInt(e,16),this.d=ci(i,16)):console.error("Invalid RSA private key")}function vi(t,e,i,r,s,n,o,h){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=ci(t,16),this.e=parseInt(e,16),this.d=ci(i,16),this.p=ci(r,16),this.q=ci(s,16),this.dmp1=ci(n,16),this.dmq1=ci(o,16),this.coeff=ci(h,16)):console.error("Invalid RSA private key")}function bi(t,i){var r=new ui,s=t>>1;this.e=parseInt(i,16);for(var n=new e(i,16);;){for(;this.p=new e(t-s,1,r),0!=this.p.subtract(e.ONE).gcd(n).compareTo(e.ONE)||!this.p.isProbablePrime(10););for(;this.q=new e(s,1,r),0!=this.q.subtract(e.ONE).gcd(n).compareTo(e.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var h=this.p.subtract(e.ONE),a=this.q.subtract(e.ONE),u=h.multiply(a);if(0==u.gcd(n).compareTo(e.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(u),this.dmp1=this.d.mod(h),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}}function Ti(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function Si(t){var e=ci(t,16),i=this.doPrivate(e);return null==i?null:yi(i,this.n.bitLength()+7>>3)}function Ri(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=Ci.charAt(i>>6)+Ci.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=Ci.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=Ci.charAt(i>>2)+Ci.charAt((3&i)<<4));(3&r.length)>0;)r+=Hi;return r}function Di(t){var e,i,r="",s=0;for(e=0;e<t.length&&t.charAt(e)!=Hi;++e)v=Ci.indexOf(t.charAt(e)),0>v||(0==s?(r+=o(v>>2),i=3&v,s=1):1==s?(r+=o(i<<2|v>>4),i=15&v,s=2):2==s?(r+=o(i),r+=o(v>>2),i=3&v,s=3):(r+=o(i<<2|v>>4),r+=o(15&v),s=0));return 1==s&&(r+=o(i<<2)),r}var Ei,xi=0xdeadbeefcafe,wi=15715070==(16777215&xi);wi&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=s,Ei=30):wi&&"Netscape"!=navigator.appName?(e.prototype.am=r,Ei=26):(e.prototype.am=n,Ei=28),e.prototype.DB=Ei,e.prototype.DM=(1<<Ei)-1,e.prototype.DV=1<<Ei;var Ki=52;e.prototype.FV=Math.pow(2,Ki),e.prototype.F1=Ki-Ei,e.prototype.F2=2*Ei-Ki;var Ai,Bi,Ui="0123456789abcdefghijklmnopqrstuvwxyz",Oi=new Array;for(Ai="0".charCodeAt(0),Bi=0;9>=Bi;++Bi)Oi[Ai++]=Bi;for(Ai="a".charCodeAt(0),Bi=10;36>Bi;++Bi)Oi[Ai++]=Bi;for(Ai="A".charCodeAt(0),Bi=10;36>Bi;++Bi)Oi[Ai++]=Bi;B.prototype.convert=U,B.prototype.revert=O,B.prototype.reduce=V,B.prototype.mulTo=N,B.prototype.sqrTo=J,P.prototype.convert=M,P.prototype.revert=L,P.prototype.reduce=q,P.prototype.mulTo=H,P.prototype.sqrTo=C,e.prototype.copyTo=a,e.prototype.fromInt=u,e.prototype.fromString=f,e.prototype.clamp=p,e.prototype.dlShiftTo=T,e.prototype.drShiftTo=S,e.prototype.lShiftTo=R,e.prototype.rShiftTo=D,e.prototype.subTo=E,e.prototype.multiplyTo=x,e.prototype.squareTo=w,e.prototype.divRemTo=K,e.prototype.invDigit=I,e.prototype.isEven=j,e.prototype.exp=k,e.prototype.toString=l,e.prototype.negate=d,e.prototype.abs=g,e.prototype.compareTo=y,e.prototype.bitLength=b,e.prototype.mod=A,e.prototype.modPowInt=F,e.ZERO=c(0),e.ONE=c(1),Pe.prototype.convert=Me,Pe.prototype.revert=Me,Pe.prototype.mulTo=Le,Pe.prototype.sqrTo=qe,ke.prototype.convert=Fe,ke.prototype.revert=_e,ke.prototype.reduce=ze,ke.prototype.mulTo=Ge,ke.prototype.sqrTo=Ze;var Vi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ni=(1<<26)/Vi[Vi.length-1];e.prototype.chunkSize=Y,e.prototype.toRadix=Q,e.prototype.fromRadix=X,e.prototype.fromNumber=te,e.prototype.bitwiseTo=ne,e.prototype.changeBit=Re,e.prototype.addTo=we,e.prototype.dMultiply=Je,e.prototype.dAddOffset=Ie,e.prototype.multiplyLowerTo=He,e.prototype.multiplyUpperTo=je,e.prototype.modInt=We,e.prototype.millerRabin=ti,e.prototype.clone=_,e.prototype.intValue=z,e.prototype.byteValue=Z,e.prototype.shortValue=G,e.prototype.signum=W,e.prototype.toByteArray=ee,e.prototype.equals=ie,e.prototype.min=re,e.prototype.max=se,e.prototype.and=he,e.prototype.or=ue,e.prototype.xor=fe,e.prototype.andNot=le,e.prototype.not=de,e.prototype.shiftLeft=ge,e.prototype.shiftRight=ye,e.prototype.getLowestSetBit=ve,e.prototype.bitCount=Te,e.prototype.testBit=Se,e.prototype.setBit=De,e.prototype.clearBit=Ee,e.prototype.flipBit=xe,e.prototype.add=Ke,e.prototype.subtract=Ae,e.prototype.multiply=Be,e.prototype.divide=Oe,e.prototype.remainder=Ve,e.prototype.divideAndRemainder=Ne,e.prototype.modPow=$e,e.prototype.modInverse=Qe,e.prototype.pow=Ce,e.prototype.gcd=Ye,e.prototype.isProbablePrime=Xe,e.prototype.square=Ue,ei.prototype.init=ii,ei.prototype.next=ri;var Ji,Ii,Pi,Mi=256;if(null==Ii){Ii=new Array,Pi=0;var Li;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var qi=window.crypto.random(32);for(Li=0;Li<qi.length;++Li)Ii[Pi++]=255&qi.charCodeAt(Li)}for(;Mi>Pi;)Li=Math.floor(65536*Math.random()),Ii[Pi++]=Li>>>8,Ii[Pi++]=255&Li;Pi=0,oi()}ui.prototype.nextBytes=ai,pi.prototype.doPublic=di,pi.prototype.setPublic=li,pi.prototype.encrypt=gi,pi.prototype.doPrivate=Ti,pi.prototype.setPrivate=mi,pi.prototype.setPrivateEx=vi,pi.prototype.generate=bi,pi.prototype.decrypt=Si,function(){var t=function(t,r,s){var n=new ui,o=t>>1;this.e=parseInt(r,16);var h=new e(r,16),a=this,u=function(){var r=function(){if(a.p.compareTo(a.q)<=0){var t=a.p;a.p=a.q,a.q=t}var i=a.p.subtract(e.ONE),r=a.q.subtract(e.ONE),n=i.multiply(r);0==n.gcd(h).compareTo(e.ONE)?(a.n=a.p.multiply(a.q),a.d=h.modInverse(n),a.dmp1=a.d.mod(i),a.dmq1=a.d.mod(r),a.coeff=a.q.modInverse(a.p),setTimeout(function(){s()},0)):setTimeout(u,0)},c=function(){a.q=i(),a.q.fromNumberAsync(o,1,n,function(){a.q.subtract(e.ONE).gcda(h,function(t){0==t.compareTo(e.ONE)&&a.q.isProbablePrime(10)?setTimeout(r,0):setTimeout(c,0)})})},f=function(){a.p=i(),a.p.fromNumberAsync(t-o,1,n,function(){a.p.subtract(e.ONE).gcda(h,function(t){0==t.compareTo(e.ONE)&&a.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(f,0)})})};setTimeout(f,0)};setTimeout(u,0)};pi.prototype.generateAsync=t;var r=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var s=i;i=r,r=s}var n=i.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return e(i),void 0;o>n&&(o=n),o>0&&(i.rShiftTo(o,i),r.rShiftTo(o,r));var h=function(){(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(h,0):(o>0&&r.lShiftTo(o,r),setTimeout(function(){e(r)},0))};setTimeout(h,10)};e.prototype.gcda=r;var s=function(t,i,r,s){if("number"==typeof i)if(2>t)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),ae,this),this.isEven()&&this.dAddOffset(1,0);var n=this,o=function(){n.dAddOffset(2,0),n.bitLength()>t&&n.subTo(e.ONE.shiftLeft(t-1),n),n.isProbablePrime(i)?setTimeout(function(){s()},0):setTimeout(o,0)};setTimeout(o,0)}else{var h=new Array,a=7&t;h.length=(t>>3)+1,i.nextBytes(h),a>0?h[0]&=(1<<a)-1:h[0]=0,this.fromString(h,256)}};e.prototype.fromNumberAsync=s}();var Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hi="=",ji=ji||{};ji.env=ji.env||{};var ki=ji,Fi=Object.prototype,_i="[object Function]",zi=["toString","valueOf"];ji.env.parseUA=function(t){var e,i=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},r=navigator,s={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},n=t||navigator&&navigator.userAgent,o=$.tb.location,h=o&&o.getHref();return s.secure=h&&0===h.toLowerCase().indexOf("https"),n&&(/windows|win32/i.test(n)?s.os="windows":/macintosh/i.test(n)?s.os="macintosh":/rhino/i.test(n)&&(s.os="rhino"),/KHTML/.test(n)&&(s.webkit=1),e=n.match(/AppleWebKit\/([^\s]*)/),e&&e[1]&&(s.webkit=i(e[1]),/ Mobile\//.test(n)?(s.mobile="Apple",e=n.match(/OS ([^\s]*)/),e&&e[1]&&(e=i(e[1].replace("_","."))),s.ios=e,s.ipad=s.ipod=s.iphone=0,e=n.match(/iPad|iPod|iPhone/),e&&e[0]&&(s[e[0].toLowerCase()]=s.ios)):(e=n.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),e&&(s.mobile=e[0]),/webOS/.test(n)&&(s.mobile="WebOS",e=n.match(/webOS\/([^\s]*);/),e&&e[1]&&(s.webos=i(e[1]))),/ Android/.test(n)&&(s.mobile="Android",e=n.match(/Android ([^\s]*);/),e&&e[1]&&(s.android=i(e[1])))),e=n.match(/Chrome\/([^\s]*)/),e&&e[1]?s.chrome=i(e[1]):(e=n.match(/AdobeAIR\/([^\s]*)/),e&&(s.air=e[0]))),s.webkit||(e=n.match(/Opera[\s\/]([^\s]*)/),e&&e[1]?(s.opera=i(e[1]),e=n.match(/Version\/([^\s]*)/),e&&e[1]&&(s.opera=i(e[1])),e=n.match(/Opera Mini[^;]*/),e&&(s.mobile=e[0])):(e=n.match(/MSIE\s([^;]*)/),e&&e[1]?s.ie=i(e[1]):(e=n.match(/Gecko\/([^\s]*)/),e&&(s.gecko=1,e=n.match(/rv:([^\s\)]*)/),e&&e[1]&&(s.gecko=i(e[1]))))))),s},ji.env.ua=ji.env.parseUA(),ji.isFunction=function(t){return"function"==typeof t||Fi.toString.apply(t)===_i},ji._IEEnumFix=ji.env.ua.ie?function(t,e){var i,r,s;for(i=0;i<zi.length;i+=1)r=zi[i],s=e[r],ki.isFunction(s)&&s!=Fi[r]&&(t[r]=s)}:function(){},ji.extend=function(t,e,i){if(!e||!t)throw new Error("extend failed, please check that all dependencies are included.");var r,s=function(){};if(s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Fi.constructor&&(e.prototype.constructor=e),i){for(r in i)ki.hasOwnProperty(i,r)&&(t.prototype[r]=i[r]);ki._IEEnumFix(t.prototype,i)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var i=t.toString(16);if("-"!=i.substr(0,1))i.length%2==1?i="0"+i:i.match(/^[0-7]/)||(i="00"+i);else{var r=i.substr(1),s=r.length;s%2==1?s+=1:i.match(/^[0-7]/)||(s+=2);for(var n="",o=0;s>o;o++)n+="f";var h=new e(n,16),a=h.xor(t).add(e.ONE);i=a.toString(16).replace(/^-/,"")}return i},this.getPEMStringFromHex=function(t,e){var i=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Base64.stringify(i),s=r.replace(/(.{64})/g,"$1\r\n");return s=s.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+s+"\r\n-----END "+e+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,i=e.toString(16);if(i.length%2==1&&(i="0"+i),128>e)return i;var r=i.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var s=128+r;return s.toString(16)+i},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex&&this.setStringHex(t.hex))},ji.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e){var i=this.zeroPadding,r=this.localDateToUTC(t),s=String(r.getFullYear());"utc"==e&&(s=s.substr(2,2));var n=i(String(r.getMonth()+1),2),o=i(String(r.getDate()),2),h=i(String(r.getHours()),2),a=i(String(r.getMinutes()),2),u=i(String(r.getSeconds()),2);return s+n+o+h+a+u+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setByDateValue=function(t,e,i,r,s,n){var o=new Date(Date.UTC(t,e-1,i,r,s,n,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},ji.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t.array&&(this.asn1Array=t.array)},ji.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},ji.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(t){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var i=new e(String(t),10);this.setByBigInteger(i)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.bigint?this.setByBigInteger(t.bigint):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},ji.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(t){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t
},this.setUnusedBitsAndHexValue=function(t,e){if(0>t||t>7)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var i=0;e>=i;i++)t+="0";for(var r="",i=0;i<t.length-1;i+=8){var s=t.substr(i,8),n=parseInt(s,2).toString(16);1==n.length&&(n="0"+n),r+=n}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)e+=1==t[i]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;t>i;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.hex?this.setHexValueIncludingUnusedBits(t.hex):"undefined"!=typeof t.bin?this.setByBinaryString(t.bin):"undefined"!=typeof t.array&&this.setByBooleanArray(t.array))},ji.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(t){KJUR.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},ji.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ji.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(t){var i=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",s=new e(t,10),n=s.toString(2),o=7-n.length%7;7==o&&(o=0);for(var h="",a=0;o>a;a++)h+="0";n=h+n;for(var a=0;a<n.length-1;a+=7){var u=n.substr(a,7);a!=n.length-7&&(u="1"+u),r+=i(parseInt(u,2))}return r};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var e="",s=t.split("."),n=40*parseInt(s[0])+parseInt(s[1]);e+=i(n),s.splice(0,2);for(var o=0;o<s.length;o++)e+=r(s[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[t])throw"DERObjectIdentifier oidName undefined: "+t;var e=KJUR.asn1.x509.OID.name2oidList[t];this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.oid?this.setValueOidString(t.oid):"undefined"!=typeof t.hex?this.setValueHex(t.hex):"undefined"!=typeof t.name&&this.setValueName(t.name))},ji.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(t){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},ji.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(t){KJUR.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},ji.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(t){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},ji.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(t){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},ji.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(t){KJUR.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},ji.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(t){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex?this.setStringHex(t.hex):"undefined"!=typeof t.date&&this.setByDate(t.date))},ji.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(t){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof t&&("undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex?this.setStringHex(t.hex):"undefined"!=typeof t.date&&this.setByDate(t.date))},ji.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(t){KJUR.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t+=i.getEncodedHex()}return this.hV=t,this.hV}},ji.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(t){KJUR.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.getEncodedHex())}return t.sort(),this.hV=t.join(""),this.hV}},ji.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(t){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,i){this.hT=e,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.tag&&(this.hT=t.tag),"undefined"!=typeof t.explicit&&(this.isExplicit=t.explicit),"undefined"!=typeof t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ji.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(t){"use strict";var e,i={};i.decode=function(i){var r;if(e===t){var s="0123456789ABCDEF",n=" \f\n\r	 \u2028\u2029";for(e=[],r=0;16>r;++r)e[s.charAt(r)]=r;for(s=s.toLowerCase(),r=10;16>r;++r)e[s.charAt(r)]=r;for(r=0;r<n.length;++r)e[n.charAt(r)]=-1}var o=[],h=0,a=0;for(r=0;r<i.length;++r){var u=i.charAt(r);if("="==u)break;if(u=e[u],-1!=u){if(u===t)throw"Illegal character at offset "+r;h|=u,++a>=2?(o[o.length]=h,h=0,a=0):h<<=4}}if(a)throw"Hex encoding incomplete: 4 bits missing";return o},window.Hex=i}(),function(t){"use strict";var e,i={};i.decode=function(i){var r;if(e===t){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="= \f\n\r	 \u2028\u2029";for(e=[],r=0;64>r;++r)e[s.charAt(r)]=r;for(r=0;r<n.length;++r)e[n.charAt(r)]=-1}var o=[],h=0,a=0;for(r=0;r<i.length;++r){var u=i.charAt(r);if("="==u)break;if(u=e[u],-1!=u){if(u===t)throw"Illegal character at offset "+r;h|=u,++a>=4?(o[o.length]=h>>16,o[o.length]=h>>8&255,o[o.length]=255&h,h=0,a=0):h<<=6}}switch(a){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:o[o.length]=h>>10;break;case 3:o[o.length]=h>>16,o[o.length]=h>>8&255}return o},i.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,i.unarmor=function(t){var e=i.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw"RegExp out of sync";t=e[2]}return i.decode(t)},window.Base64=i}(),function(t){"use strict";function e(t,i){t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=i)}function i(t,e,i,r,s){this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=s}var r=100,s="\u2026",n={tag:function(t,e){var i=document.createElement(t);return i.className=e,i},text:function(t){return document.createTextNode(t)}};e.prototype.get=function(e){if(e===t&&(e=this.pos++),e>=this.enc.length)throw"Requesting byte offset "+e+" on a stream of length "+this.enc.length;return this.enc[e]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},e.prototype.hexDump=function(t,e,i){for(var r="",s=t;e>s;++s)if(r+=this.hexByte(this.get(s)),i!==!0)switch(15&s){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},e.prototype.parseStringISO=function(t,e){for(var i="",r=t;e>r;++r)i+=String.fromCharCode(this.get(r));return i},e.prototype.parseStringUTF=function(t,e){for(var i="",r=t;e>r;){var s=this.get(r++);i+=128>s?String.fromCharCode(s):s>191&&224>s?String.fromCharCode((31&s)<<6|63&this.get(r++)):String.fromCharCode((15&s)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},e.prototype.parseStringBMP=function(t,e){for(var i="",r=t;e>r;r+=2){var s=this.get(r),n=this.get(r+1);i+=String.fromCharCode((s<<8)+n)}return i},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(t,e){var i=this.parseStringISO(t,e),r=this.reTime.exec(i);return r?(i=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(i+=":"+r[5],r[6]&&(i+=":"+r[6],r[7]&&(i+="."+r[7]))),r[8]&&(i+=" UTC","Z"!=r[8]&&(i+=r[8],r[9]&&(i+=":"+r[9]))),i):"Unrecognized time: "+i},e.prototype.parseInteger=function(t,e){var i=e-t;if(i>4){i<<=3;var r=this.get(t);if(0===r)i-=8;else for(;128>r;)r<<=1,--i;return"("+i+" bit)"}for(var s=0,n=t;e>n;++n)s=s<<8|this.get(n);return s},e.prototype.parseBitString=function(t,e){var i=this.get(t),r=(e-t-1<<3)-i,s="("+r+" bit)";if(20>=r){var n=i;s+=" ";for(var o=e-1;o>t;--o){for(var h=this.get(o),a=n;8>a;++a)s+=h>>a&1?"1":"0";n=0}}return s},e.prototype.parseOctetString=function(t,e){var i=e-t,n="("+i+" byte) ";i>r&&(e=t+r);for(var o=t;e>o;++o)n+=this.hexByte(this.get(o));return i>r&&(n+=s),n},e.prototype.parseOID=function(t,e){for(var i="",r=0,s=0,n=t;e>n;++n){var o=this.get(n);if(r=r<<7|127&o,s+=7,!(128&o)){if(""===i){var h=80>r?40>r?0:1:2;i=h+"."+(r-40*h)}else i+="."+(s>=31?"bigint":r);r=s=0}}return i},i.prototype.typeName=function(){if(this.tag===t)return"unknown";var e=this.tag>>6,i=(this.tag>>5&1,31&this.tag);switch(e){case 0:switch(i){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+i.toString(16)}case 1:return"Application_"+i.toString(16);case 2:return"["+i+"]";case 3:return"Private_"+i.toString(16)}},i.prototype.reSeemsASCII=/^[ -~]+$/,i.prototype.content=function(){if(this.tag===t)return null;var e=this.tag>>6,i=31&this.tag,n=this.posContent(),o=Math.abs(this.length);if(0!==e){if(null!==this.sub)return"("+this.sub.length+" elem)";var h=this.stream.parseStringISO(n,n+Math.min(o,r));return this.reSeemsASCII.test(h)?h.substring(0,2*r)+(h.length>2*r?s:""):this.stream.parseOctetString(n,n+o)}switch(i){case 1:return 0===this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+o);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+o);case 6:return this.stream.parseOID(n,n+o);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+o);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+o);case 30:return this.stream.parseStringBMP(n,n+o);case 23:case 24:return this.stream.parseTime(n,n+o)}return null},i.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},i.prototype.print=function(e){if(e===t&&(e=""),document.writeln(e+this),null!==this.sub){e+="  ";for(var i=0,r=this.sub.length;r>i;++i)this.sub[i].print(e)}},i.prototype.toPrettyString=function(e){e===t&&(e="");var i=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(i+="+"),i+=this.length,32&this.tag?i+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(i+=" (encapsulates)"),i+="\n",null!==this.sub){e+="  ";for(var r=0,s=this.sub.length;s>r;++r)i+=this.sub[r].toPrettyString(e)}return i},i.prototype.toDOM=function(){var t=n.tag("div","node");t.asn1=this;var e=n.tag("div","head"),i=this.typeName().replace(/_/g," ");e.innerHTML=i;var r=this.content();if(null!==r){r=String(r).replace(/</g,"&lt;");var s=n.tag("span","preview");s.appendChild(n.text(r)),e.appendChild(s)}t.appendChild(e),this.node=t,this.head=e;var o=n.tag("div","value");if(i="Offset: "+this.stream.pos+"<br/>",i+="Length: "+this.header+"+",i+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?i+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(i+="<br/>(encapsulates)"),null!==r&&(i+="<br/>Value:<br/><b>"+r+"</b>","object"==typeof oids&&6==this.tag)){var h=oids[r];h&&(h.d&&(i+="<br/>"+h.d),h.c&&(i+="<br/>"+h.c),h.w&&(i+="<br/>(warning!)"))}o.innerHTML=i,t.appendChild(o);var a=n.tag("div","sub");if(null!==this.sub)for(var u=0,c=this.sub.length;c>u;++u)a.appendChild(this.sub[u].toDOM());return t.appendChild(a),e.onclick=function(){t.className="node collapsed"==t.className?"node":"node collapsed"},t},i.prototype.posStart=function(){return this.stream.pos},i.prototype.posContent=function(){return this.stream.pos+this.header},i.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},i.prototype.fakeHover=function(t){this.node.className+=" hover",t&&(this.head.className+=" hover")},i.prototype.fakeOut=function(t){var e=/ ?hover/;this.node.className=this.node.className.replace(e,""),t&&(this.head.className=this.head.className.replace(e,""))},i.prototype.toHexDOM_sub=function(t,e,i,r,s){if(!(r>=s)){var o=n.tag("span",e);o.appendChild(n.text(i.hexDump(r,s))),t.appendChild(o)}},i.prototype.toHexDOM=function(e){var i=n.tag("span","hex");if(e===t&&(e=i),this.head.hexNode=i,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},i.asn1=this,i.onmouseover=function(){var t=!e.selected;t&&(e.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(t)},i.onmouseout=function(){var t=e.selected==this.asn1;this.asn1.fakeOut(t),t&&(e.selected=null,this.className="hex")},this.toHexDOM_sub(i,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(i,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)i.appendChild(n.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var r=this.sub[0],s=this.sub[this.sub.length-1];this.toHexDOM_sub(i,"intro",this.stream,this.posContent(),r.posStart());for(var o=0,h=this.sub.length;h>o;++o)i.appendChild(this.sub[o].toHexDOM(e));this.toHexDOM_sub(i,"outro",this.stream,s.posEnd(),this.posEnd())}return i},i.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},i.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===i)return-1;e=0;for(var r=0;i>r;++r)e=e<<8|t.get();return e},i.hasContent=function(t,r,s){if(32&t)return!0;if(3>t||t>4)return!1;var n=new e(s);3==t&&n.get();var o=n.get();if(o>>6&1)return!1;try{var h=i.decodeLength(n);return n.pos-s.pos+h==r}catch(a){return!1}},i.decode=function(t){t instanceof e||(t=new e(t,0));var r=new e(t),s=t.get(),n=i.decodeLength(t),o=t.pos-r.pos,h=null;if(i.hasContent(s,n,t)){var a=t.pos;if(3==s&&t.get(),h=[],n>=0){for(var u=a+n;t.pos<u;)h[h.length]=i.decode(t);if(t.pos!=u)throw"Content size is not correct for container starting at offset "+a}else try{for(;;){var c=i.decode(t);if(0===c.tag)break;h[h.length]=c}n=a-t.pos}catch(f){throw"Exception while decoding undefined length content: "+f}}else t.pos+=n;return new i(r,o,n,s,h)},i.test=function(){for(var t=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],r=0,s=t.length;s>r;++r){var n=new e(t[r].value,0),o=i.decodeLength(n);o!=t[r].expected&&document.write("In test["+r+"] expected "+t[r].expected+" got "+o+"\n")}},window.ASN1=i}(),ASN1.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},pi.prototype.parseKey=function(t){try{var e=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,i=e.test(t)?Hex.decode(t):Base64.unarmor(t),r=ASN1.decode(i);if(9===r.sub.length){var s=r.sub[1].getHexStringValue();this.n=ci(s,16);var n=r.sub[2].getHexStringValue();this.e=parseInt(n,16);var o=r.sub[3].getHexStringValue();this.d=ci(o,16);var h=r.sub[4].getHexStringValue();this.p=ci(h,16);var a=r.sub[5].getHexStringValue();this.q=ci(a,16);var u=r.sub[6].getHexStringValue();this.dmp1=ci(u,16);var c=r.sub[7].getHexStringValue();this.dmq1=ci(c,16);var f=r.sub[8].getHexStringValue();this.coeff=ci(f,16)}else{if(2!==r.sub.length)return!1;var p=r.sub[1],l=p.sub[0],s=l.sub[0].getHexStringValue();this.n=ci(s,16);var n=l.sub[1].getHexStringValue();this.e=parseInt(n,16)}return!0}catch(d){return!1}},pi.prototype.getPrivateBaseKey=function(){var t={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},e=new KJUR.asn1.DERSequence(t);return e.getEncodedHex()},pi.prototype.getPrivateBaseKeyB64=function(){return Ri(this.getPrivateBaseKey())},pi.prototype.getPublicBaseKey=function(){var t={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},e=new KJUR.asn1.DERSequence(t);t={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var i=new KJUR.asn1.DERSequence(t);t={hex:"00"+i.getEncodedHex()};var r=new KJUR.asn1.DERBitString(t);t={array:[e,r]};var s=new KJUR.asn1.DERSequence(t);return s.getEncodedHex()},pi.prototype.getPublicBaseKeyB64=function(){return Ri(this.getPublicBaseKey())},pi.prototype.wordwrap=function(t,e){if(e=e||64,!t)return t;var i="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},pi.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},pi.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},pi.prototype.hasPublicKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")},pi.prototype.hasPrivateKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},pi.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)};var Zi=function(t){pi.call(this),t&&("string"==typeof t?this.parseKey(t):(this.hasPrivateKeyProperty(t)||this.hasPublicKeyProperty(t))&&this.parsePropertiesFrom(t))};Zi.prototype=new pi,Zi.prototype.constructor=Zi;var Gi=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};Gi.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new Zi(t)},Gi.prototype.setPrivateKey=function(t){this.setKey(t)},Gi.prototype.setPublicKey=function(t){this.setKey(t)},Gi.prototype.decrypt=function(t){try{return this.getKey().decrypt(Di(t))}catch(e){return!1}},Gi.prototype.encrypt=function(t){try{return Ri(this.getKey().encrypt(t))}catch(e){return console.log(arguments),!1}},Gi.prototype.getKey=function(t){if(!this.key){if(this.key=new Zi,t&&"[object Function]"==={}.toString.call(t))return this.key.generateAsync(this.default_key_size,this.default_public_exponent,t),void 0;this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},Gi.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},Gi.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},Gi.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},Gi.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.JSEncrypt=Gi}(e.RSA),e.RSA=e.RSA.JSEncrypt}}});_.Module.define({path:"tbmall/widget/paykey_dialog",requires:["tbmall/widget/paykey_rsa"],sub:{ERROR:{2270018:"",1990005:"\u652F\u4ED8\u5BC6\u7801\u9A8C\u8BC1\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF0C\u60A8\u8FD8\u6709{#NUM#}\u6B21\u8F93\u5165\u673A\u4F1A",2190005:'\u4F60\u5DF2\u8F93\u5165\u5BC6\u7801\u9519\u8BEF5\u6B21\uFF0C\u652F\u4ED8\u5BC6\u7801\u88AB\u9501\u5B9A\uFF0C\u8BF7<a target="_blank" href="/tbmall/pass/set">\u627E\u56DE\u5BC6\u7801</a>'},MAX_ERR_TIME:5,_setTpl:['<div id="paykey_set_dialog" class="paykey_set_dialog clearfix">',"<p>\u8BF7\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801\u540E\u5B8C\u6210\u6D88\u8D39</br>\uFF08\u53EF\u964D\u4F4ET\u8C46\u88AB\u76D7\u98CE\u9669\uFF0C\u4FDD\u969C\u8D22\u4EA7\u5B89\u5168\uFF09</p>",'<div class="paykey_btn_area clearfix">','<a href="/tbmall/pass/set" target="_blank" class="paykey_set_accept_btn paykey_set_btn" id="paykey_set_accept_btn">\u7ACB\u5373\u8BBE\u7F6E</a>','<a href="#" class="paykey_set_cancel_btn paykey_set_btn" id="paykey_set_cancel_btn">\u4E0B\u6B21\u518D\u8BF4</a>',"</div>","</div>"].join(""),_inputTpl:['<div id="paykey_set_dialog" class="paykey_set_dialog clearfix">','<form id="paykey_set_form">','<div class="paykey_input_area">',"<span>\u8BF7\u8F93\u5165\u652F\u4ED8\u5BC6\u7801</span>",'<input type="password" class="j_paykey_input paykey_input" id="paykey_input"/>','<p id="paykey_input_msg" class="paykey_input_msg">{#ERROR#}</p>',"</div>",'<div class="paykey_btn_area clearfix">','<a class="j_paykey_submit_btn paykey_submit_btn paykey_set_btn" id="paykey_submit_btn">\u63D0\u4EA4</a>','<a href="/tbmall/pass/set" target="_blank" class="j_paykey_cancel_btn  paykey_set_btn" id="paykey_cancel_btn">\u5FD8\u8BB0\u5BC6\u7801</a>',"</div>","</form>","</div>"].join(""),_dialog:null,conf:{},initial:function(a){this.conf=$.extend(this.conf,a),this.RSA=this.use("tbmall/widget/paykey_rsa")},showDialog:function(a,e,t){var i=e;2==arguments.length&&(t=e,i=null),2===this.conf.showType?this.inputPasskeyDialog(a,i,t):1===this.conf.showType?this.setPasskeyDialog(a,i,t):"function"==typeof a&&(t?a.call(t):a())},inputPasskeyDialog:function(a,e,t){var i=this;2==arguments.length&&(t=e);var s=this._inputTpl;if(this.conf.errType&&(s=s.replace("{#ERROR#}",this.ERROR[this.conf.errType])),this.conf.errTime){var n=this.MAX_ERR_TIME-this.conf.errTime;s=s.replace("{#NUM#}",n)}this._dialog=new $.dialog({html:s,title:"\u652F\u4ED8\u5BC6\u7801",draggable:!1,width:420});var l=function(){var e=$("#paykey_input").val();if(!e)return $("#paykey_input_msg").text("\u8BF7\u8F93\u5165\u652F\u4ED8\u5BC6\u7801"),void 0;var s=i.RSA.vcode(e);"function"==typeof a&&(t?a.call(t,{password:s}):a({password:s})),i._dialog.close()};$("#paykey_submit_btn").click(function(a){a.preventDefault(),l()}),$("#paykey_set_form").submit(function(a){a.preventDefault(),l()}),this._dialog.onclose(function(){"function"==typeof e&&(t?e.call(t):e())})},setPasskeyDialog:function(a,e,t){var i=this;2==arguments.length&&(t=e),this._dialog=new $.dialog({html:this._setTpl,title:"\u63D0\u793A",draggable:!1,width:420}),$("#paykey_set_accept_btn").click(function(){i._dialog.close()}),$("#paykey_set_cancel_btn").click(function(){i._dialog.close()}),this._dialog.element.find(".dialogJclose").on("click",function(){"function"==typeof e&&(t?e.call(t,{ignore_set_paypass:1}):e({ignore_set_paypass:1}))})}}});_.Module.define({path:"frs/widget/headSkin",requires:["common/widget/ScrollPanel","tbmall/component/captcha_payment","tbmall/widget/paykey_dialog"],sub:{forumSkinHtml:['<div class="skin_wrapper">','<div class="skin_content">','<h4 class="skin_title">\u96C6\u8D44\u989D\u5EA6\u6EE1\u8DB3\u6761\u4EF6\uFF0C\u77AC\u95F4\u6362\u65B0\u88C5\uFF01\u6211\u7231\u6211\u5427\uFF0C\u6211\u51FA\u529B\uFF01</h4>','<div class="skin_items clearfix"></div>',"</div>",'<div class="skin_rank">','<h4 class="week_rank_title">\u672C\u5468\u8D21\u732E\u6392\u884C</h4>','<div class="skin_rank_items clearfix"></div>',"</div>","</div>"].join(""),skinPurchaseHtml:['<div class="skin_purchase">','<p><b>\u6211\u7684T\u8C46\uFF1A<span class="skin_money_remain">#{user_scores}</span></b></p>','<p class="skin_money_wrapper">\u4F60\u8981\u51FA\u529B\uFF1A<input class="skin_money_purchase" type="text"/> T\u8C46',"</p>",'<p class="skin_money_tip"></p>',"<p>",'<a href="#" class="skin_purchase_btn  purchase_submit"></a>','<a href="#" class="skin_purchase_btn  purchase_cancel"></a>','<div class="skin_purchase_set_pass"><p><a class="skin_purchase_setpass_link" href="/tbmall/pass/set" target="_blank">\u7ACB\u5373\u8BBE\u7F6E\u652F\u4ED8\u5BC6\u7801</a>\uFF0C\u964D\u4F4ET\u8C46\u88AB\u76D7\u98CE\u9669!</p></div>',"</p></div>"].join(""),skinPurchaseSuccessHtml:["<p><b>\u51FA\u529B\u6210\u529F\uFF01</b></p>",'<p class="skin_money_wrapper">\u9AD8\u7AEF\u5927\u6C14\u534E\u4E3D\u88C5\u4FEE\u5373\u5C06\u5B8C\u6210\uFF01',"</p>",'<p class="skin_success_timeout"><span></span>\u540E\u5C06\u81EA\u52A8\u56DE\u5230\u672C\u5427',"</p>"].join(""),skinPurchaseErrorHtml:["<p><b>\u51FA\u529B\u5931\u8D25\uFF01</b></p>",'<p class="skin_money_wrapper">#{content}</p>','<p class="skin_success_timeout"><span></span>\u540E\u5C06\u81EA\u52A8\u56DE\u5230\u672C\u5427',"</p>"].join(""),skinMap:{1060001:"/tb/static-frs/img/head_skin/1060001.gif",1060002:"/tb/static-frs/img/head_skin/1060002.gif",1060003:"/tb/static-frs/img/head_skin/1060003.gif",1060004:"/tb/static-frs/img/head_skin/1060004.gif",1060005:"/tb/static-frs/img/head_skin/1060005.gif",1060006:"/tb/static-frs/img/head_skin/1060006.gif",1060007:"/tb/static-frs/img/head_skin/1060007.gif",1060008:"/tb/static-frs/img/head_skin/1060008.gif",1060009:"/tb/static-frs/img/head_skin/1060009.gif",1060010:"/tb/static-frs/img/head_skin/1060010.gif",1060011:"/tb/static-frs/img/head_skin/1060011.gif",1060012:"/tb/static-frs/img/head_skin/1060012.gif"},headSkin:$(".card_top"),initial:function(s){try{this.skinId=0,this.skinNeedScore=0,this.forumId=s.forum_id,this.forumName=s.forum_name,this.skinUsedId=s.skin_used_id,this.skinEndTime=s.skin_end_time,this.userScores=parseInt(s.user_scores)||0,this.skinWrapper=$(this.forumSkinHtml),this.skinItems=this.skinWrapper.find(".skin_items"),this.skinRankItems=this.skinWrapper.find(".skin_rank_items"),this.skinPurchaseHtml=$.tb.format(this.skinPurchaseHtml,{user_scores:this.userScores}),PageData.user.setpass&&(this.skinPurchaseHtml=this.skinPurchaseHtml.replace("skin_purchase_set_pass","skin_purchase_set_none")),this.skinPurchase=$(this.skinPurchaseHtml),this.skinMoney=this.skinPurchase.find(".skin_money_purchase"),this.skinTip=this.skinPurchase.find(".skin_money_tip"),this.initHeadSkin(),this.bindEvent()}catch(i){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:105}),i}},initHeadSkin:function(){var s=this.skinUsedId,i=this.skinEndTime,e=Math.floor((new Date).getTime()/1e3);s&&i>=e&&this.skinMap[s]?this.headSkin.css("backgroundImage","url("+this.skinMap[s]+")"):(this.headSkin.css("backgroundImage",""),s="1060001"),this.initGuide(s)},initGuide:function(s){if("1"!=$.cookie("head_skin_guide")){var i=$('<img class="guide_img" src="'+this.skinMap[s]+'"/>').prependTo(this.headSkin);setTimeout(function(){i.fadeIn(1e3,function(){setTimeout(function(){i.animate({opacity:0,width:"-=978",height:"-=96",left:"+=978"},2e3,function(){i.remove(),$.cookie("head_skin_guide","1",{expires:365})})},1e3)})},1e3)}},initSkinDialog:function(){var s=this;this.skinDialog=new $.dialog({html:this.skinWrapper,title:"\u5427\u88C5\u4FEE",width:693,height:450,top:"28%",left:($(window).width()-705)/2,autoCenter:!1}),$(window).on("resize.skin",function(){s.skinDialog.setPosition(($(window).width()-705)/2,"28%")}),this.skinDialog.bind("onclose",function(){$(window).off("resize.skin"),s.initHeadSkin()}),this.skinWrapper.closest(".dialogJcontent").css("padding","0"),this.acquireSkins(),this.skinDialog.show()},initPurchaseDialog:function(){var s=this;this.purchaseDialog=new $.dialog({html:this.skinPurchase,title:"\u63D0\u793A",width:400,height:180}),this.skinDialog.hide(),this.purchaseDialog.show(),this.skinMoney.val("").focus(),this.purchaseDialog.bind("onclose",function(){s.skinTip.empty(),s.skinDialog.show()})},bindEvent:function(){var s=this;$(".head_skin_btn").bind("click",function(){try{s.initSkinDialog()}catch(i){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:194}),i}}),$("body").delegate(".purchase_skin","click",function(){try{if(!PageData.user.is_login)return s.skinDialog.close(),_.Module.use("common/widget/LoginDialog"),void 0;s.skinId=$(this).getData("data-skinid"),s.skinNeedScore=parseInt($(this).getData("data-skinneedscore")),s.initPurchaseDialog()}catch(i){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:204}),i}}).delegate(".purchase_submit","click",function(){try{s.buySkin($(this))}catch(i){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:206}),i}}).delegate(".purchase_cancel","click",function(){try{s.purchaseDialog.close()}catch(i){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:208}),i}}),$("body").on("click",".skin_pic_wrapper",function(){try{var i=$(this).tbattr("skinid");i&&s.headSkin.css("background-image","url("+s.skinMap[i]+")")}catch(e){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"frs:widget/head_skin/head_skin.js",method:"",ln:214}),e}})},acquireSkins:function(){var s=this,i=(new Date).getTime();url="tbmall/post/getforumskins?t="+i,this.skinItems.html('<div class="all_skin_loading"></div>'),$.get(url,{forum_id:s.forumId},function(i){return 0!=i.no?!1:(s.addAllSkin(i.data),s.addRankSkin(i.data),void 0)})},addAllSkin:function(s){var i=s.cur_skin,e=s.skin;if(s&&e&&0==e.length)return this.skinItems.html("\u76EE\u524D\u8FD8\u6CA1\u6709\u53EF\u4F9B\u8D2D\u4E70\u7684\u76AE\u80A4\u54E6\uFF01"),void 0;for(var n="",t=['<div class="skin_item">','<div class="skin_pic_wrapper" skinid="#{skin_id}" title="\u70B9\u51FB\u9884\u89C8">','<img class="skin_pic" src="/tb/static-frs/img/head_skin/small_#{skin_id}.png">',"#{showEndTime}","</div>","<p>\u4EF7\u683C\uFF1A","<span>#{scores_need}</span>","T\u8C46/","<span>#{keep_time}</span>","\u5929</p>","<p>\u5F53\u524D\u96C6\u8D44\uFF1A","<span>#{scores_have}</span>","T\u8C46</p>","<p>",'<a onclick="return false;" class="#{already_used_skin}" ','data-skinid="#{skin_id}" data-skinneedscore="#{skin_need_score}">',"<span><em>#{already_used_text}</em></span>","</a></p>","</div>"].join(""),a=0;a<e.length;a++){e[a].keep_time=parseInt(e[a].keep_time/86400)||"1";var r={already_used_skin:"ui_btn ui_btn_s purchase_skin ",already_used_text:"\u6211\u8981\u51FA\u529B",skin_need_score:e[a].scores_need-e[a].scores_have};i&&e[a].skin_id==i.skin_id&&(r={already_used_skin:"ui_btn_disable ui_btn_s_disable already_user_skin",already_used_text:"\u4F7F\u7528\u4E2D",scores_have:0,showEndTime:'<div class="show_end_time">\u5230\u671F\u65F6\u95F4\uFF1A'+this.endTimeFormat(i.end_time)+"</div>"}),n+=$.tb.format(t,$.extend(e[a],r))}this.skinItems.empty(),this.skinScroll&&(this.skinScroll=null),this.skinScroll=this.use("common/widget/ScrollPanel",{container:this.skinItems,height:400,content:n})},endTimeFormat:function(s){var i=new Date(1e3*s),e=[i.getMonth()>9?i.getMonth()+1:"0"+(i.getMonth()+1),"\u6708",i.getDate()>=10?i.getDate():"0"+i.getDate(),"\u65E5 ",i.getHours()>=10?i.getHours():"0"+i.getHours(),":",i.getMinutes()>=10?i.getMinutes():"0"+i.getMinutes()].join("");return e},addRankSkin:function(s){function i(s){return 1e6>s?s:(s/1e4).toFixed(2)+"\u4E07"}var e=this,n=s.week_ranking,t=['<div class="skin_rank_item clearfix">','<span class="rank_index #{index_class}">#{index}</span>','<a href="/home/main?un=#{encode_uname}&ie=utf-8&fr=head_skin" target="_blank" class="rank_user_name">#{user_name}</a>','<span class="rank_t_dou">\u51FA\u529B\uFF1A<span class="t_dou_count">#{t_dou}</span></span>',"</div>"].join(""),a="",r={};if(n&&n.length>0)for(var o=0,c=n.length;c>o;o++)r={},2>=o&&(r.index_class="rank_index_top"),r.index=o+1,r.user_name=n[o].user_name,r.encode_uname=encodeURIComponent(n[o].user_name),r.t_dou=i(n[o].scores),a+=$.tb.format(t,r);else a='<div class="empty_rank_txt">\u8FD8\u6CA1\u6709\u571F\u8C6A\u6765\u51FA\u529B\u5462~</div>';this.skinRankItems.empty(),this.rankScroll&&(this.rankScroll=null),this.rankScroll=e.use("common/widget/ScrollPanel",{container:e.skinRankItems,height:410,content:a})},buySkin:function(s){var i=this,e=this.skinMoney.val(),n="/tbmall/post/raisescore?ie=utf-8",t={101:"*\u8BF7\u586B\u5199T\u8C46\u6570\u91CF",102:'*\u60A8\u7684T\u8C46\u4E0D\u8DB3 <a href="/tbmall/getTdou" target="_blank">\u5982\u4F55\u83B7\u53D6T\u8C46>></a>',103:"*\u60A8\u53EA\u9700\u518D\u51FA "+this.skinNeedScore+"T\u8C46 \u5C31\u53EF\u4EE5\u5B8C\u6210\u96C6\u8D44\uFF01"};if(""==e||!e.match(/^\d*$/g)||0==parseInt(e))return this.skinTip.html(t["101"]).show(),void 0;if(e>this.userScores)return this.skinTip.html(t["102"]).show(),void 0;if(e>this.skinNeedScore)return this.skinMoney.val(this.skinNeedScore),this.skinTip.html(t["103"]).show(),void 0;s.removeClass("purchase_submit").addClass("purchase_submit_over");var a=function(t){var r={};t&&$.extend(r,t),$.extend(r,{forum_id:i.forumId,forum_name:i.forumName,skin_id:i.skinId,scores:parseInt(e),tbs:PageData.tbs}),$.post(n,r,function(e){if(s.closest(".uiDialogWrapper").find(".dialogJtitle").remove(),0==e.no)i.skinPurchase.html(i.skinPurchaseSuccessHtml);else{if(2150040==e.no||360007==e.no){var n=i.use("tbmall/component/captcha_payment",{data:e});return n.showCaptcha(a),void 0}if(2270018==e.no||1990005==e.no||2190005==e.no){e.data=e.data||{};var t=i.use("tbmall/widget/paykey_dialog",{showType:2,errType:e.no,errTime:e.data.wrongtime});return t.showDialog(a,function(){s.removeClass("purchase_submit_over").addClass("purchase_submit")},i),void 0}i.skinPurchaseErrorHandler(e.no)}i.setRelocationTime()})},r=Number(e);if(r>=3e4&&!PageData.user.setpass){var o=i.use("tbmall/widget/paykey_dialog",{showType:1});o.showDialog(a,i)}else a()},skinPurchaseErrorHandler:function(s){/^(2270002|2270005|2270007)$/.test(s)||(s=9999999);var i={2270002:{content:"\u672C\u5427\u4E0D\u652F\u6301\u4F7F\u7528\u5427\u88C5\u4FEE\u3002"},2270005:{content:"T\u8C46\u4E0D\u8DB3\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u3002"},2270007:{content:"\u5F53\u524D\u88C5\u4FEE\u6B63\u5728\u4F7F\u7528\uFF0C\u65E0\u6CD5\u8FDB\u884C\u96C6\u8D44\u3002"},9999999:{content:"\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u3002"}};this.skinPurchase.html($.tb.format(this.skinPurchaseErrorHtml,i[s]))},setRelocationTime:function(){var s=this,i=1,e=s.skinPurchase.find(".skin_success_timeout span").text("1s"),n=setInterval(function(){return 0==i?(clearInterval(n),$.tb.location.reload(),!1):(i-=1,e.text(i+"s"),void 0)},1e3)}}});_.Module.define({path:"common/component/SlideShow",sub:{defaultOptions:{delayLoadPic:!1,effect:"slide",activeClass:"tbui_slideshow_active",baseZIndex:0,interval:5e3,slide:{speed:500},fade:{speed:500},triggerHandler:"click"},initial:function(t){t=$.extend({},this.defaultOptions,t);var i=this;this.options=t,this.animating=!1,this.current=0,this.vendorPrefix=!1,this.$nav=$(t.nav),this.$navItem=this.$nav.children(),this.total=this.$navItem.size()||t.total,this.$container=$(t.target),this.$list=this.$container.children(".tbui_slideshow_list"),this.$tokens=this.$list.children(),t.width||(t.width=this.$container.width()),t.height||(t.height=this.$container.height()),this.$container.add(this.$list).css({width:t.width,height:t.height}),this.interval=t.interval||5e3,this.picLoadedIndex={},this.$navItem.first().addClass(t.activeClass),this.$tokens.first().show(),this.showOriPic(0),"click"==t.triggerHandler?this.$navItem.click(function(){var e=this;t.auto&&i.stop(),this.delayHandler=setTimeout(function(){i.delayHandler=null,i.setActive($(e).index())},10)}).bind("mouseout",function(){t.auto&&i.play(),this.delayHandler&&clearTimeout(this.delayHandler)}):"hover"==t.triggerHandler&&this.$navItem.hover(function(){var e=this;t.auto&&i.stop(),this.delayHandler=setTimeout(function(){i.delayHandler=null,i.setActive($(e).index())},200)},function(){t.auto&&i.play(),this.delayHandler&&clearTimeout(this.delayHandler)}),this.effectHandler=this["_"+t.effect],t.auto&&(this.play(),this.$list.hover(function(){i.stop()},function(){i.play()})),t.next&&$(t.next).click(function(t){t.preventDefault(),t.stopPropagation(),i.next()}),t.prev&&$(t.prev).click(function(t){t.preventDefault(),t.stopPropagation(),i.prev()})},setActive:function(t){return this.animating||t===this.current?!1:(this.$navItem.removeClass(this.options.activeClass).eq(t).addClass(this.options.activeClass),this.effectHandler(t),this.showOriPic(t),!0)},next:function(){var t=this.current+1;t==this.total&&(t=0),this.setActive(t)},prev:function(){var t=this.current-1;-1==t&&(t=this.total-1),this.setActive(t)},play:function(){var t=this;null==this.autoHandler&&(this.autoHandler=setInterval(function(){t.next()},this.options.interval))},showOriPic:function(t){if(this.options.delayLoadPic&&!this.picLoadedIndex["_"+t]){for(var i,e=this.$tokens.eq(t).find("img"),n=e.length,s=0;n>s;s++){i=$(e[s]);var a=i.tbattr("orisrc");a&&i.tbattr("src",a)}this.picLoadedIndex["_"+t]=1}},stop:function(){clearInterval(this.autoHandler),this.autoHandler=null},_slide:function(t){var i,e,n,s,a,o,r,h=this;this.animating=!0,i=this.current,r=t>i?1:-1,e=t>i?-this.options.width:this.options.width,s=t,this.$tokens.eq(i).siblings().css({display:"none",left:0,zIndex:0+this.options.baseZIndex}),this.$tokens.eq(s).css({display:"block",left:r*this.options.width,zIndex:10+this.options.baseZIndex}),this.vendorPrefix?(a=this.vendorPrefix,o=a+"Transform",n=a+"TransitionDuration",this.$list[0].style[o]="translateX("+e+"px)",this.$list[0].style[n]=this.options.slide.speed+"ms",this.$list.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){h.$list[0].style[o]="",h.$list[0].style[n]="",h.$tokens.eq(s).css({left:0}),h.$tokens.eq(i).css({display:"none",left:0,zIndex:0}),h.animating=!1,h.current=s,h.$list.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),h.trigger("animateEnd")})):h.$list.stop().animate({left:e},this.options.slide.speed,function(){h.$list.css({left:0}),h.$tokens.eq(s).css({left:0}),h.$tokens.eq(i).css({display:"none",left:0,zIndex:0}),h.current=s,h.animating=!1,h.trigger("animateEnd")})},_fade:function(t){var i,e,n=this;this.animating=!0,i=this.current,e=t,this.$tokens.eq(e).css({display:"none",left:0,zIndex:10+this.options.baseZIndex}),this.$tokens.eq(i).stop().fadeOut(this.options.fade.speed),this.$tokens.eq(e).stop().fadeIn(this.options.fade.speed,function(){n.$tokens.eq(e).css({zIndex:0+n.options.baseZIndex}),n.animating=!1,n.current=e,n.trigger("animateEnd")})},_getVendorPrefix:function(){var t,i,e,n,s;for(t=document.body||document.documentElement,e=t.style,n="Transition",s=["Moz","Webkit","Khtml","O","ms"],i=0;i<s.length;){if("string"==typeof e[s[i]+n])return s[i];i++}return!1}}});_.Module.define({path:"frs/widget/stockBanner",requires:["common/component/SlideShow"],sub:{initial:function(){try{this.runSlider()}catch(e){throw"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"frs:widget/stock_banner/stock_banner.js",method:"",ln:15}),e}},runSlider:function(){this.requireInstanceAsync("common/component/SlideShow",{target:".js-stock-slider",nav:".js-stock-nav",interval:2700,auto:!0,delayLoadPic:!0,slide:{speed:700}})}}});_.Module.define({path:"pfrs/widget/focus_btn",requires:["comforum/widget/attentionCategoryGame"],sub:{initial:function(e){this.isOfficial=e.isOfficial,this.tbs=e.tbs,this.uid=e.uid,this.is_forum_fourth_manager=e.is_forum_fourth_manager,this.avatar=e.avatar;var t=this,a=$("#j_head_focus_btn"),i=null;t.config={},t.config.url={closetip:"/f/like/commit/notice/delete",dolike:"/f/like/commit/add",undolike:"/f/like/commit/delete"},i=parseInt(e.islike)?function(){if(PageData.user.power&&PageData.user.power.bawu)return t._showAlert('<p style="text-align: center;">\u60A8\u8FD8\u662F\u672C\u5427\u7684\u5427\u52A1\uFF0C\u8F9E\u804C\u540E\u624D\u80FD\u53D6\u6D88\u5173\u6CE8\u54E6~</p>'),!1;var e=PageData.forum_name||PageData.forum.forum_name;e=$.tb.subByte(e,10,"...");var a=['<div style="width:190px;text-align:center;top:18px;left:10px;position:absolute;">\u786E\u5B9A\u4E0D\u518D\u5173\u6CE8 <span style="color:red">'+e+"</span> \u5427\uFF1F</div>",'<a href="#" id="cancel_focus_yes" class=" ui_btn ui_btn_s" style="position:absolute;top:50px;left:55px;">',"<span><em>\u786E\u8BA4</em></span>","</a>",'<a href="#" onclick="return false;" id="cancel_focus_no" class="ui_btn ui_btn_sub_s" style="position:absolute;top:50px;left:105px;">',"<span><em>\u53D6\u6D88</em></span>","</a>"].join(""),i=new $.dialog({html:a,showTitle:!1,fixed:!1,show:!0,draggable:!1,autoCenter:!1,modal:!1,top:$("#j_head_focus_btn").offset().top-$(this).height()/2-90,left:$("#j_head_focus_btn").offset().left-$(this).width()/2+15,width:210,height:70});$("#cancel_focus_yes").on("click",function(){t._undolike(),i.close()}),$("#cancel_focus_no").on("click",function(){i.close()})}:function(){t._dolike()},a.on("click",i),$(".j_search_post ").click(function(){$.stats.track("FRS\u5168\u5427\u641C\u7D22","PB\u53CAFRS\u7EDF\u8BA1\u5408\u9879","frs","click")}),$(".search_internal_btn").click(function(){$.stats.track("FRS\u5427\u5185\u641C\u7D22","PB\u53CAFRS\u7EDF\u8BA1\u5408\u9879","frs","click")}),$(".sign_title_text_bright").click(function(){$.stats.track("FRS\u7B7E\u5230\u5E7F\u544A","PB\u53CAFRS\u7EDF\u8BA1\u5408\u9879","frs","click")}),$(".j_nav_list > li:eq(2) a").click(function(){$.stats.track("FRS\u7B7E\u5230\u5E7F\u544A","PB\u53CAFRS\u7EDF\u8BA1\u5408\u9879","frs","click")})},_showAlert:function(e){var t='<div style="padding:20px 20px; text-align:cente; line-height:20px;font-size:13px;">'+e+"</div>";$.dialog.open(t,{title:"\u64CD\u4F5C\u5931\u8D25",width:380})},_dolike:function(){var e=this;if(!PageData.user.is_login)return TbCom.process("User","buildLoginFrame"),!1;if(PageData.user.is_login&&PageData.user.no_un)return TbCom.process("User","buildUnameFrame","\u586B\u5199\u7528\u6237\u540D","\u6709\u7528\u6237\u540D\u624D\u80FD\u70B9\u4EAE\u201C\u6211\u559C\u6B22\u201D\uFF0C\u8D76\u5FEB\u7ED9\u81EA\u5DF1\u8D77\u4E00\u4E2A\u5427~"),!1;var t={};PageData.forum&&(t={fid:PageData.forum.id||PageData.forum.forum_id,fname:PageData.forum.forum_name||PageData.forum_name,uid:PageData.user.name_url,ie:"gbk",tbs:PageData.tbs}),$.post(e.config.url.dolike,t,function(t){var a=!1;try{var i=t}catch(o){a=!0}if(!a)if(i&&0==i.no)Stats.sendRequest("fr=tb0_foruStatm&st_mod=frs&st_type=balvlikesucc&bduid="+PageData.user.bduid),e.isOfficial?_.Module.use("pplatform/widget/platform_attention_recommend",[{tbs:e.tbs,uid:e.uid,is_forum_fourth_manager:e.is_forum_fourth_manager,avatar:e.avatar}]):"\u6E38\u620F"==PageData.forum.first_class?_.Module.use("comforum/widget/attentionCategoryGame",["",!1,{index:i.data.ret.index,like_no:i.like_no}]):_.Module.use("ucenter/widget/LikeTip",["",!1,{index:i.data.ret.index,like_no:i.like_no}]),$.stats.sendRequest("fr=tb0_forum&st_page=frs&st_mod=like&st_type=auto");else if(1990055===i.no)if("undefined"==typeof passport||"undefined"==typeof passport.pop.init){var s="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),n="https://passport";$.JsLoadManager.use([n+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(s/6e4),n+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(s/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show();else{Stats.sendRequest("fr=tb0_foruStatm&st_mod=frs&st_type=balvlikefail&errorno="+i.no);var r="";r=8==i.no||9==i.no?"\u4F60\u5728\u672C\u5427\u88AB\u5C01\u7981\uFF0C\u6682\u65F6\u4E0D\u80FD\u8FDB\u884C\u64CD\u4F5C":220==i.no?"\u4F60\u88AB\u5427\u4E3B\u52A0\u5165\u9ED1\u540D\u5355\uFF0C\u6682\u65F6\u4E0D\u80FD\u8FDB\u884C\u64CD\u4F5C":221==i.no?"\u4F60\u5DF2like\u4E86\u672C\u5427,\u8BF7\u4E0D\u8981\u91CD\u590D\u64CD\u4F5C":"\u62B1\u6B49\uFF0C\u5F02\u5E38\u9519\u8BEF\uFF0C\u5EFA\u8BAE\u5237\u65B0\u9875\u9762\u91CD\u8BD5\u4E00\u4E0B",e._showAlert(r)}},"json")},_undolike:function(){var e=this,t=null;PageData.forum&&(t={fid:PageData.forum.forum_id,fname:PageData.forum.name_url,uid:PageData.user.name_url,ie:"utf-8",tbs:PageData.tbs}),$.tb.post(e.config.url.undolike,t,function(e){var t=!1;try{var a=e}catch(i){t=!0}if(!t)if(a&&0==a.no)$.tb.location.reload(!0);else if(1990055===a.no)if("undefined"==typeof passport||"undefined"==typeof passport.pop.init){var o="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),s="https://passport";$.JsLoadManager.use([s+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(o/6e4),s+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(o/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show()})}}});
;_.Module.define({path:"frs/widget/forum_card",sub:{initial:function(){this.delay=150,this.$title=$(".card_title_location"),this.$locations=$(".card_locations"),this.$num=$(".card_num"),this._resizeWidth(),this._handleEvent()},localDisplay:function(){var t=this;return setTimeout(function(){t.$title.parent().addClass("card_title_location_wrapper_sel"),t.$num.addClass("card_num_fix"),t.$locations.removeClass("card_nor").addClass("card_sel")},t.delay)},localHidden:function(){var t=this;return setTimeout(function(){t.$title.parent().removeClass("card_title_location_wrapper_sel"),t.$num.removeClass("card_num_fix"),t.$locations.removeClass("card_sel").addClass("card_nor")},t.delay)},_handleEvent:function(){var t,e=this;this.$title.on("mouseenter",function(){clearTimeout(t),t=e.localDisplay()}).on("mouseleave",function(){clearTimeout(t),t=e.localHidden()}),this.$locations.on("mouseenter",function(){clearTimeout(t),t=e.localDisplay()}).on("mouseleave",function(){clearTimeout(t),t=e.localHidden()}),this.$locations.delegate("a","mousedown",function(){$.stats.sendRequest("fr=tb0_forum&st_mod=difangba&difangba_down")})},_resizeWidth:function(){var t=this.$locations.find("a").length;t=t%2===0?t:t+1;var e=t/2*60+20*(t/2-1)+15+"px";this.$locations.css("width",e)}}});_.Module.define({path:"pcommon/widget/PadstyleNav",requires:[],sub:{data:{is_good:!1,forum_name:"",user_islogin:!1,domNav:null,domNavFake:null,objFixer:null},initial:function(a,s,e){this.data.is_good="good"===s?!0:!1,this.data.is_album="album"===s?!0:!1,this.data.forum_name=a,this.data.user_islogin=e,this.data.domNav=$("#frs_nav"),this._showType(),this._handleEvents()},_showType:function(){this.data.is_good&&($("#frs_nav_good").removeClass("frs_nav_item_normal").addClass("frs_nav_item_selected"),$("#frs_nav_main").removeClass("frs_nav_item_selected").addClass("frs_nav_item_normal")),this.data.is_album&&($("#frs_nav_album").removeClass("frs_nav_item_normal").addClass("frs_nav_item_selected"),$("#frs_nav_main").removeClass("frs_nav_item_selected").addClass("frs_nav_item_normal"))},_handleEvents:function(){var a=this;a.data.domNav.on("click","#nav_post",function(){}),a.data.domNav.on("click","#nav_refresh",function(){$.tb.location.setHref($.tb.unescapeHTML($.tb.location.getHref()))})},_focusOnEditor:function(a){this.data.user_islogin?$(a).focus():LoginInstance.show()}}});_.Module.define({path:"pcommon/widget/frs_version",sub:{initial:function(){}}});_.Module.define({path:"pcommon/widget/tbnav_bright/tbnav_search",requires:["pcommon/widget/search_handler"],sub:{_searchHandler:null,_jq_wrap:null,_jq_input:null,_options:{forumName:""},initial:function(t,e){var n=this;this._searchHandler=this.use("pcommon/widget/search_handler"),this._jq_wrap=t,this._jq_input=t.find(".j_search_internal_input"),this._options=$.extend(this._options,e),this._jq_wrap.find(".j_search_internal_form").submit(function(){return n._searchInternal(),!1}),this._initPlaceHolder(),this._addTabIcon(),this._initBarrageEnter()},_addJump:function(){$(".qiangzuo_trigger").length>0&&$(".qiangzuo_trigger").on("click",function(){window.open("/game/worldcup/index")})},_addTabIcon:function(){$("#tb_nav").find(".icon_world_cup").closest(".space").css("position","relative"),$("#tb_nav").find(".icon_world_cup").closest(".space").append($("<i class='word_cup_sp_icon'></i>"))},_searchInternal:function(){var t=this._getSearchWord();this._searchHandler.searchPostInBa(t,this._options.forumName)},_getSearchWord:function(){return this._jq_input.val()},_initBarrageEnter:function(){var t=$("#activity_nav_barrage_spring_enter");t.length&&$.stats.track("\u5BFC\u822A\u680F\u5C55\u793A","\u6625\u8282\u5410\u69FD\u665A\u4F1A","","view"),t.on("click",function(){$.stats.track("\u5BFC\u822A\u680F\u8DF3\u8F6C","\u6625\u8282\u5410\u69FD\u665A\u4F1A","","click"),$.cookie("tbnavHideBarrageEnter",1,{expires:365})})},_initPlaceHolder:function(){var t=this,e=this._jq_wrap.find(".j_search_internal_placeholder"),n=this._jq_input;""!=t._getSearchWord()&&e.hide(),n.focus(function(){e.hide()}).blur(function(){""==t._getSearchWord()&&e.show()}),e.click(function(){n.focus()})}}}),_.Module.define({path:"pcommon/widget/tbnav_bright",requires:["pcommon/widget/tbnav_bright/tbnav_search"],sub:{_jq_wrap:null,_nav_wrap:null,promotion_tmp:['<div id="activity_nav_promotion_enter">','<a href="#{link}" target="_blank">','<img src="#{img}">',"</a>","</div>"].join(""),initial:function(t,e,n){this._jq_wrap=t,this._nav_wrap=$("#tb_nav"),this.use("pcommon/widget/tbnav_bright/tbnav_search",e.jq_search,e),this._bindNavDropDownList(),this._initStats(),this._initWanleTip(),n&&n.promotion_setting&&this._initPromotionEnter(n.promotion_setting)},_bindNavDropDownList:function(){var t=this;this._nav_wrap.find(".j_tbnav_list").on("mouseenter",function(e){e.preventDefault();var n=$(e.currentTarget);n.addClass("nav_list_over"),t._nav_wrap.find(".j_nav_list").css("overflow","visible"),$("#star_class_nav").css("overflow","visible")}).on("mouseleave",function(t){t.preventDefault();var e=$(t.currentTarget);e.removeClass("nav_list_over")})},_initPromotionEnter:function(t){var e=$.getPageData("0.0",0,t),n=$.getPageData("1.0",0,t);if(!n||!e)return!1;var i=e.replace(/[\/,:,.,-]/g,"").substr(-30);if(1==$.tb.Storage.get("tbnavHideBarrageEnter_"+i))return!1;var a=$.tb.format(this.promotion_tmp,{link:n,img:e}),o=$(a);this._nav_wrap.find(".j_nav_list").append(o),$.stats.track("\u5BFC\u822A\u680F\u5C55\u793A","\u5206\u53D1\u5BFC\u822A\u680F\u63A8\u5E7F\u4F4D","","view"),o.on("click",function(){$.stats.track("\u5BFC\u822A\u680F\u8DF3\u8F6C","\u5206\u53D1\u5BFC\u822A\u680F\u63A8\u5E7F\u4F4D","","click"),$.tb.Storage.set("tbnavHideBarrageEnter_"+i,1)})},_initStats:function(){var t=this._nav_wrap.find(".j_nav_list"),e="\u5BFC\u822A\u680Ftab\u7EDF\u8BA1";t.find("a").on("click",function(){var t=$(this).text().split("\uFF08")[0];$.stats.track(t,e)})},_initWanleTip:function(){var t=PageUnit.load("tbnav_bright_wanle_type");if(1!=t)return!1;var e=new Date,n=e.getTime(),i=new Date(e.getTime()+864e5-1e3*(60*e.getHours()*60+60*e.getMinutes()+e.getSeconds())),a=$.cookie("wanleTipCircle");if(a){if(n>a+1728e5)return $.cookie("wanleTipCircle",0),void 0;if(0==a)return}else $.cookie("wanleTipCircle",n);var o=this._nav_wrap.find("#j_navtab_wanle");if(o.on("click",function(){$.stats.track("tab\u5BFC\u6D41","\u8D34\u5427PC\u76D6\u697C\u6D3B\u52A8","","click"),s.hide(),$.cookie("wanleTipHide",1,{expires:i})}),1!=$.cookie("wanleTipHide")){var r=['<div class="wanle_tab_tip">','<a class="jump_tip" href="/f?ie=utf-8&kw='+encodeURIComponent("\u4E50\u6B64\u4E0D\u75B2")+'" target="_self"></a>','<a class="close_tip" href="#" onclick="return false;"></a>',"</div>"].join(""),s=$(r);o.closest(".space").append(s),s.on("click","a",function(){s.hide(),$.cookie("wanleTipHide",1,{expires:i})}),s.on("click",".jump_tip",function(){$.stats.track("tab\u5BFC\u6D41","\u8D34\u5427PC\u76D6\u697C\u6D3B\u52A8","","click")})}}}}),_.Module.define({path:"pcommon/widget/often_forum_bright",sub:{_wrapId:null,_jqWrap:null,_imgPostParams:null,oftengo_bubble:null,initial:function(t,e){this._wrapId=t,this._imgPostParams=e,this.oftenGoForum()},oftenGoForum:function(){var t=this._imgPostParams.user.user_forum_list?this._imgPostParams.user.user_forum_list.info:null,e=$("#often_forum"),n=this;if(e.length>0){var i=null,a=null;n.renderForumMenu(t);var o=n.j_menu;if(!o)return;e.click(function(){return n.fixedPosition(),e.addClass("btn_select"),o.slideDown(100),clearTimeout(i),!1}),PageData.is_ipad||(e.mouseenter(function(){return clearTimeout(a),"none"!=o.css("display")?!1:(i=setTimeout(function(){n.fixedPosition(),e.addClass("btn_select"),o.slideDown(100)},300),void 0)}),e.mouseleave(function(){clearTimeout(i),a=setTimeout(function(){e.removeClass("btn_select"),o.hide()},50)}),o.mouseenter(function(){clearTimeout(a)}),o.mouseleave(function(){a=setTimeout(function(){e.removeClass("btn_select"),o.hide()},50)})),o.find(".j_often_go_fname").mousedown(function(){if($.stats.hive("of_click"),$.stats.sendRequest("fr="+PageData.product+"&st_mod=oftenforum&st_type=forumclick&uid="+PageData.user.id),PageData&&PageData.forum&&PageData.product){if($(this).hasClass("ui_text_desc"))return;var t={st_mod:"nav_oftenforum_bar",st_type:"enterba",st_from:encodeURIComponent(PageData.product),st_uid:PageData.user.id,st_benba:encodeURIComponent(PageData.forum.name),st_goto:encodeURIComponent($(this).text())};$.tb.Stats.sendRequest("http://tb1.bdstatic.com/tb/img/hive.gif",t)}}),o.find(".j_often_go_more").mousedown(function(){$.stats.hive("of_more"),$.stats.sendRequest("fr="+PageData.product+"&st_mod=oftenforum&st_type=forummoreclick&uid="+PageData.user.id)})}},renderForumMenu:function(t){var e=this.genericForumMenu(t);if(e){{var n=$(e);$("#often_forum"),$("#"+this._wrapId)}$("body").append(n),this.j_menu=n}},genericForumMenu:function(t){if(t&&t.length>0){for(var e='<div id="nav_forum_menu" class="nav_forum_menu"><div class="n_menu_wrap clearfix"><ul class="n_menu_content clearfix">',n=PageData.is_ipad?"n_menu_item_ipad":"n_menu_item",i=0,a=t.length;a>i;i++){var o=t[i],r="";if(!(7>i||7==i&&8==a)){r='<li class="'+n+'"><a href="http://tieba.baidu.com/home/forum?id='+PageData.user.portrait+'&fr=tbnav" target="_blank" class="j_often_go_more nav_g_more">\u66F4\u591A&gt;&gt;</a></li>',e+=r;break}r='<li class="'+n+'"><a class="j_often_go_fname" title="'+o.forum_name+'" href="/f?ie=utf-8&kw='+encodeURIComponent(o.forum_name)+'" target="_blank">'+$.tb.subByte(o.forum_name,12,"..")+"</a></li>",e+=r}return e+='</ul></div> <div class="btn_inherit">&nbsp;</div></div>'}return null},fixedPosition:function(){var t=this.j_menu,e=$("#often_forum"),n=$("#"+this._wrapId);e.removeClass("btn_select"),n.addClass("nav_position");var i=(e.position(),e.offset()),a=n.height();n.removeClass("nav_position");var o=t.find("li.n_menu_item"),r=o.length;1==r?(o.width(94),t.width(111),t.find(".btn_inherit").css("left","0px"),t.css({top:i.top+a-14,left:i.left})):(t.find(".btn_inherit").css("left","80px"),t.css({top:i.top+a-14,left:i.left-e.width()+5}))}}});_.Module.define({path:"ppb/component/Pager",sub:{initial:function(t,e){this.jumpPage=$("#"+e),this.jump(t),this.bindPageNum(t),this.pagerWrap=$("#"+t),this.pageCheckLogin()},jump:function(t){var e=this.jumpPage.tbattr("theme"),n=$("#pager_go"+e),a=this;this.jumpPage.bind("keydown",function(e){a._go(e,t)}),n.click(function(){a._go("click",t)})},_go:function(t,e){var n=this.jumpPage;totalPage=n.tbattr("max-page"),inPageNum=n.val(),("click"===t||13===t.keyCode)&&(/^(-?)(\d+)$/.test(inPageNum)?(inPageNum=Math.max(1,Math.min(inPageNum,totalPage)),this.sendRequest("pb_jump_page",e),this.jumpToPage(inPageNum)):n.val(""))},jumpToPage:function(t){var e=$.tb.location.getHref(),n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),-1==e.indexOf("pn")?e+=-1==e.indexOf("?")?"?pn="+t:e.indexOf("?")==e.toString().length-1?"pn="+t:"&pn="+t:e=e.replace(/(.*pn=)(\d+)?/,function(e,n){return n+""+t}),e.length>0&&(PageData.user.is_login?$.tb.location.setHref(e):window.open("/f/user/passport?jumpUrl="+e+"&statsInfo=pb_pager#login_anchor"))},bindPageNum:function(t){var e=this;$("#"+t).delegate("a","mousedown",function(){return $(this).hasClass("pager_disabled")?!1:void e.sendRequest("pb_fanye_page",t)})},sendRequest:function(t,e){$.tb.Stats.sendRequest("http://tb1.bdstatic.com/tb/img/pv.gif",{fr:"tb0_forum",st_mod:"pb",st_type:t,st_value:e})},pageCheckLogin:function(){var t=this;t.pagerWrap.find(".l_pager a").on("click",function(){if(!PageData.user.is_login){var t="http://tieba.baidu.com"+$.tb.unescapeHTML($(this).tbattr("href"));return window.open("/f/user/passport?jumpUrl="+t+"&statsInfo=pb_pager#login_anchor"),!1}})}}});var bds_config={snsKey:{tsina:"2285628874",tqq:"801209366"}};window.__abbaidu_2027_subidgetf=function(){var e="tb_pc_pb";return e},function(){var e=document.createElement("script");e.src="https://dlswbr.baidu.com/heicha/mw/abclite-2027-s.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),document.getElementById("bdshell_js").src="http://bdimg.share.baidu.com/static/js/shell_v2.js?t="+(new Date).getHours();_.Module.define({path:"pcommon/widget/BlockUser",requires:[],sub:{template:'<div class="block_user_wrapper"> <ul class="b_u_items">   <li class="b_u_items_outer">  <label>\u5C01\u7981\u8D26\u6237</label><div class="b_username" ></div> </li>  <li class="b_u_items_outer">    <label>\u5C01\u7981\u65F6\u957F:</label>  <div class="b_block_time"> <span class="b_fixed_time">1\u5929</span>   <select class="b_select_time"> <option data-info="1">1\u5929</option> <option data-info="3">3\u5929</option><option data-info="10">10\u5929</option>  </select>  </div>   </li>  <li class="b_u_items_outer"> <label>\u5C01\u7981\u539F\u56E0:</label> <div class="b_reason_box"><ul class="b_reason_ul">   <li class="b_reason_item" data-prefix="1."></li><li class="b_reason_item" data-prefix="2."></li> <li class="b_reason_item" data-prefix="3."></li>  <li class="b_reason_item" data-prefix="4."></li>  <li class="b_reason_item" data-prefix="5."></li> <li class="b_reason_item" data-prefix="6."></li>  </ul><div class="b_reason_content">    <div class="b_reason_top">   <div class="b_top_mod_bar" > <div class="b_mod_bar"><span></span>\u4FEE\u6539</div>  <div class="b_del_bar"><span></span>\u5220\u9664</div>   </div><div class="b_top_save_bar">  <div class="b_save_bar"><span></span>\u4FDD\u5B58</div> <div class="b_cancel_bar"><span></span>\u53D6\u6D88</div></div>     </div>   <div class="b_reason_textarea">  <label for="b_user_textarea" class="b_label_tips">\u62B1\u6B49\uFF0C\u4F60\u7684\u53D1\u8D34\u64CD\u4F5C\u6216\u53D1\u8868\u8D34\u5B50\u7684\u5185\u5BB9\u8FDD\u53CD\u4E86\u672C\u5427\u7684\u5427\u89C4\uFF0C\u5DF2\u7ECF\u88AB\u5C01\u7981\uFF0C\u5C01\u7981\u671F\u95F4\u4E0D\u80FD\u5728\u672C\u5427\u7EE7\u7EED\u53D1\u8A00\u3002</label><textarea id="b_user_textarea" class="b_textarea"></textarea>      </div>    </div>   </div>   </li>   </ul>   <div class="block_btns">  <div class="block_tips"></div> <div class="b_id_btn">\u5C01\u7981ID</div> <div class="b_fixed_tips"></div>  </div> </div>',errTemplate:'<div class="block_response_info"></div> ',initial:function(e,t,a,o,i){this.config={block_reason_list:"/pmc/tpl",add_block_reason:"/pmc/tpl",modify_block_reason:"/pmc/tpl",del_block_reason:"/pmc/tpl",save_block_id:"/pmc/blockid"},this.blockList=$.extend(!0,[],e),this.power=t,this.forum=a,this.tbs=o,this.sucCallback=i,this.user_num=this.blockList.length,this.add_new_temp="<span>+</span>\u65B0\u5EFA\u6A21\u677F",this.textarea_maxlength=200,this.curr_pattern="",this.$blockPopWinHtml=$(this.template),this.$responseBlockInfo=$(this.errTemplate),this.paramValidate(),this.setBlockDefaultInfo(),this.textareaKeyupEvtBind(),this.blockIDbtnEvtBind(),this.tabSwitchEvtBind(),this.textareaFocusEvtBind(),this.textareaBlurEvtBind(),this.logicalControl(),this.blockDialog.show(),this.trigger("show")},duplicateRemoval:function(e){for(var t={},a=[],o=e.length,i=0;o>i;i++)t[e[i]]||(a.push(e[i]),t[e[i]]=!0);return a},paramValidate:function(){var e=this;null===e.power.ban_id||null===e.power.ban_ip||""===e.power.ban_id||""===e.power.ban_ip?(this.blockDialog=new $.dialog({title:"\u5C01\u7981\u63D0\u793A",width:"556",html:this.$responseBlockInfo}),e.$responseBlockInfo.find(".block_response_info").html("\u4F60\u6CA1\u6709\u5C01\u7981\u64CD\u4F5C\u6743\u9650\uFF01")):e.blockDialog=new $.dialog({title:"\u5C01\u7981\u64CD\u4F5C",width:"556",html:this.$blockPopWinHtml}),e.blockDialog.bind("onclose",function(){e.user_num>1&&$.tb.location.reload()}),e.blockDialog.bind("onhide",function(){e.user_num>1&&$.tb.location.reload()})},insertDefaultNewTemp:function(){var e=this,t=0,a=0,o=!1;if($(".b_reason_ul .b_reason_item").each(function(e,o){$(o).hasClass("b_add_new_reason")||($(o).data("reasonId")&&""!=$(o).data("reasonId")&&$(o).data("isBuiltinTpl")===!1&&t++,a++)}),6>t){$(".b_reason_ul .b_reason_item").each(function(t,i){o&&$(".b_reason_ul .b_reason_item").eq(t).remove(),""!==$(i).html().trim()||o||($(i).tbattr("data-is-builtin-tpl",!1).tbattr("data-prefix",a),$(i).addClass("b_add_new_reason").append(e.add_new_temp),o=!0)});var i=$(".b_reason_ul .b_add_new_reason").length;0==i&&$(".b_reason_ul").append('<li class="b_reason_item b_add_new_reason" data-is-builtin-tpl="false" data-prefix="'+(a+1)+'.">'+e.add_new_temp+"</li>")}},setTextareaVal:function(){var e=this;0!=e.$blockPopWinHtml.find(".b_reason_curr").length||e.$blockPopWinHtml.find(".b_reason_item").eq(0).hasClass("b_add_new_reason")||e.$blockPopWinHtml.find(".b_reason_item").eq(0).addClass("b_reason_curr");var t=e.$blockPopWinHtml.find(".b_reason_curr");if(t.hasClass("b_add_new_reason"))e.$blockPopWinHtml.find(".b_textarea").val("");else if(t.html()){var a=t.html(),o=2;t.data("prefix")>=10&&(o=3),e.$blockPopWinHtml.find(".b_textarea").val(a.substr(o,a.length))}},noReasonCantModify:function(){var e=0,t=this;t.$blockPopWinHtml.find(".b_reason_item").each(function(t,a){"undefined"!=typeof $(a).tbattr("data-reason-id")&&e++}),0==e&&(t.$blockPopWinHtml.find(".b_add_new_reason").removeClass("b_reason_curr"),t.$blockPopWinHtml.find(".b_reason_top").hide(),""==t.$blockPopWinHtml.find(".b_textarea").val()&&t.$blockPopWinHtml.find(".b_label_tips").show())},setBlockReasonList:function(){var e=this,t=!1;$.ajax({url:e.config.block_reason_list,type:"POST",dataType:"json",data:{fid:e.forum.forum_id,tbs:e.tbs},success:function(a){if("0"==a.errno){var o=a.data;if(0==o.length)e.$blockPopWinHtml.find(".b_label_tips").show(),e.$blockPopWinHtml.find(".b_textarea").val(""),e.noReasonCantModify(),e.$blockPopWinHtml.find(".b_reason_item").each(function(e,t){$(t).removeAttr("data-reason-id").html("")}),e.$blockPopWinHtml.find(".b_reason_item").removeClass("b_reason_curr");else{var i=e.$blockPopWinHtml.find(".b_reason_item").length,n=o.length,s=n-i;if(s>0){for(var l=i,r="";s>0;)r+='<li class="b_reason_item" data-prefix="'+(l+1)+'." ></li>',l++,s--;$(".b_reason_ul").append(r)}e.$blockPopWinHtml.find(".b_reason_item").each(function(a,i){0==a&&(e.curr_pattern="undefined"!=typeof o[a]?"modify":"add"),"undefined"!=typeof o[a]?$(i).html(a+1+"."+o[a].template_text).tbattr("data-reason-id",o[a].template_id).tbattr("data-is-builtin-tpl",o[a].is_builtin_tpl).tbattr("data-prefix",a+1):$(i).html(""),$(i).hasClass("b_add_new_reason")&&!t&&($(i).removeClass("b_add_new_reason"),t=!0)}),e.$blockPopWinHtml.find(".b_reason_item").each(function(t,a){""==$(a).html()&&e.$blockPopWinHtml.find(".b_reason_item").eq(t).remove(),$(a).hasClass("b_reason_curr")&&($(a).data("isBuiltinTpl")?$(".b_top_mod_bar .b_del_bar").hide():$(".b_top_mod_bar .b_del_bar").show())})}(e.power.ban_id&&e.power.ban_ip||e.power.can_filter_id&&e.power.can_filter_ip)&&e.insertDefaultNewTemp(),e.setTextareaVal()}else e.setResponseTips(2,"\u83B7\u53D6\u5C01\u7981\u539F\u56E0\u5217\u8868\u5931\u8D25!")},error:function(t){e.setNewDialogRespTips(2,t)}})},setBlockDefaultInfo:function(){for(var e=this,t=[],a=[],o=0;o<e.blockList.length;++o){var i=e.blockList[o].nickname,n=e.blockList[o].username,s=[i,n].join("|");-1===$.inArray(s,a)&&t.push(i?i:n)}t=t.join(),e.$blockPopWinHtml.find(".b_username").html($.tb.subByte(t,30,"\u2026")),e.setBlockReasonList()},textareaKeyupEvtBind:function(){var e=this;e.$blockPopWinHtml.find(".b_textarea").on("keyup",function(){var t=$(this).val(),a=$.tb.getByteLength(t),o=e.$blockPopWinHtml.find(".block_tips");o.css({display:"block"}),e.textarea_maxlength-a>0?($(this).hasClass("input_right_pattern")||$(this).addClass("input_right_pattern"),$(this).removeClass("input_error_pattern"),o.html("\u8FD8\u53EF\u8F93\u5165"+parseInt((e.textarea_maxlength-a)/2)+"\u5B57").addClass("b_green")):($(this).hasClass("input_error_pattern")||$(this).addClass("input_error_pattern"),$(this).removeClass("input_right_pattern"),o.removeClass("b_green").addClass("b_red").html("\u5DF2\u8D85\u51FA"+parseInt(parseInt((a-e.textarea_maxlength)/2)+1)+"\u5B57"))})},textareaFocusEvtBind:function(){var e=this;e.$blockPopWinHtml.on("focus.showEditor",".b_textarea",function(){e.curr_pattern="add",e.toogleToolBar(),e.$blockPopWinHtml.find(".block_tips").html("").removeClass("b_red,b_green"),e.$blockPopWinHtml.find(".b_label_tips").css({display:"none"}),e.power.ban_id&&e.power.ban_ip||e.power.can_filter_id&&e.power.can_filter_ip?e.$blockPopWinHtml.find(".b_reason_top").show():e.$blockPopWinHtml.find(".b_reason_top").hide()})},textareaBlurEvtBind:function(){var e=this;e.$blockPopWinHtml.on("click",function(t){var a=$(t.target);if(0==a.closest(".b_reason_box").length){e.curr_pattern="modify",e.toogleToolBar(),0==e.$blockPopWinHtml.find(".b_reason_curr").length&&e.$blockPopWinHtml.find(".b_reason_top").hide();var o="undefined"==e.power.can_filter_id?!e.power.ban_id||!e.power.ban_ip:!e.power.can_filter_id||!e.power.can_filter_ip;o&&(""==e.$blockPopWinHtml.find(".b_textarea").val()?e.$blockPopWinHtml.find(".b_label_tips").show():e.$blockPopWinHtml.find(".b_label_tips").hide()),e.$blockPopWinHtml.find(".block_tips").html(""),e.noReasonCantModify()}})},modifyTextareaCon:function(){var e=this;e.$blockPopWinHtml.find(".b_mod_bar").on("click",function(){e.$blockPopWinHtml.find(".b_textarea").trigger("focus")})},deleteTextareaCon:function(){var e=this;e.$blockPopWinHtml.find(".b_del_bar").on("click",function(){if("undefined"==typeof e.$blockPopWinHtml.find(".b_reason_curr").tbattr("data-reason-id")||e.$blockPopWinHtml.find(".b_reason_curr").hasClass("b_add_new_reason")||e.$blockPopWinHtml.find(".b_reason_curr").data("isBuiltinTpl"))return!1;var t={op:"del",id:e.$blockPopWinHtml.find(".b_reason_curr").tbattr("data-reason-id"),fid:e.forum.forum_id,tbs:e.tbs};$.ajax({url:e.config.del_block_reason,type:"POST",dataType:"json",data:t,success:function(t){"0"==t.errno?(e.$blockPopWinHtml.find(".b_reason_curr").removeAttr("data-reason-id"),e.setBlockReasonList(),e.setResponseTips(1,"\u5220\u9664\u6210\u529F\uFF01")):e.setResponseTips(2,"\u5220\u9664\u5931\u8D25!")},error:function(t){e.setNewDialogRespTips(2,t)}})})},toogleToolBar:function(){var e=this;e.power.ban_id&&e.power.ban_ip||e.power.can_filter_id&&e.power.can_filter_ip?(e.$blockPopWinHtml.find(".b_reason_top").css({display:"block"}),"modify"==this.curr_pattern?(e.$blockPopWinHtml.find(".b_top_mod_bar").css({display:"block"}),e.$blockPopWinHtml.find(".b_top_save_bar").css({display:"none"})):"add"==this.curr_pattern&&(e.$blockPopWinHtml.find(".b_top_mod_bar").css({display:"none"}),e.$blockPopWinHtml.find(".b_top_save_bar").css({display:"block"}))):e.$blockPopWinHtml.find(".b_reason_top").css({display:"none"})},saveTextareaCon:function(){var e,t=this,a={},o=t.$blockPopWinHtml.find(".b_textarea");t.$blockPopWinHtml.find(".b_save_bar").on("click",function(){if(!t.checkCanbeBlocked())return!1;var i=t.$blockPopWinHtml.find(".b_reason_curr").hasClass("b_add_new_reason")||0==t.$blockPopWinHtml.find(".b_reason_curr").length;i?(a={op:"add",tbs:t.tbs,fid:t.forum.forum_id,ie:"gbk",text:o.val()},e=t.config.add_block_reason):(a={op:"update",tbs:t.tbs,fid:t.forum.forum_id,ie:"gbk",text:t.$blockPopWinHtml.find(".b_textarea").val(),id:t.$blockPopWinHtml.find(".b_reason_curr").tbattr("data-reason-id")},e=t.config.modify_block_reason),$.ajax({url:e,type:"POST",dataType:"json",data:a,success:function(e){t.curr_pattern="modify",t.toogleToolBar(),"0"==e.errno?(t.setBlockReasonList(),t.setResponseTips(1,"\u4FDD\u5B58\u6210\u529F\uFF01"),i?$.stats.track("AddReasonItem","uegCount","bawuAppeal","success"):$.stats.track("modifyReasonItem"+$(".b_reason_curr").index(),"uegCount","bawuAppeal","success")):t.setResponseTips(2,"\u4FDD\u5B58\u5931\u8D25!")},error:function(e){t.setNewDialogRespTips(2,e)}})})},cancelTextareaCon:function(){var e=this;e.$blockPopWinHtml.find(".b_cancel_bar").on("click",function(){e.setTextareaVal(),e.curr_pattern="modify",e.toogleToolBar(),e.$blockPopWinHtml.find(".b_reason_curr").hasClass("b_add_new_reason")&&e.$blockPopWinHtml.find(".b_reason_item").siblings().removeClass("b_reason_curr").end().eq(0).addClass("b_reason_curr")})},getSavesData:function(e){var t=this,a={};a.day="block"===t.$blockPopWinHtml.find(".b_fixed_time").css("display")?"1":t.$blockPopWinHtml.find(".b_select_time").find("option:selected").tbattr("data-info"),a.fid=t.forum.forum_id,a.tbs=t.tbs,a.ie="gbk",a.user_name=[],a.nick_name=[],a.pid=[],a.portrait=[];for(var o=0;o<t.blockList.length;++o){var i=t.blockList[o];i.portrait?-1===$.inArray(i.portrait,a.portrait)&&(a.user_name.push($.tb.escapeHTML(i.username)),a.nick_name.push($.tb.escapeHTML(i.nickname||"")),a.portrait.push(i.portrait),i.pid&&a.pid.push(i.pid)):(-1===$.inArray(i.username,a.user_name)&&a.user_name.push(i.username),i.pid&&a.pid.push(i.pid))}var n=t.$blockPopWinHtml.find(".b_textarea"),s=0;return t.$blockPopWinHtml.find(".b_reason_item").each(function(e,t){"undefined"==typeof $(t).tbattr("data-reason-id")&&s++}),a.reason=6==s&&""===n.val().trim()?t.$blockPopWinHtml.find(".b_label_tips").html():t.$blockPopWinHtml.find(".b_textarea").val(),2===e&&(a.ip="1"),a},checkCanbeBlocked:function(){var e=this,t=e.$blockPopWinHtml.find(".b_textarea"),a=0;return t.hasClass("input_error_pattern")||""===t.val().trim()?(e.$blockPopWinHtml.find(".b_reason_item").each(function(e,t){"undefined"==typeof $(t).tbattr("data-reason-id")&&a++}),6==a?!0:(e.$blockPopWinHtml.find(".b_textarea").trigger("focus"),t.hasClass("input_error_pattern")?e.setResponseTips(2,"\u5C01\u7981\u539F\u56E0\u4E0D\u80FD\u8D85\u51FA100\u5B57"):e.setResponseTips(2,"\u5C01\u7981\u539F\u56E0\u4E0D\u80FD\u4E3A\u7A7A"),!1)):!0},blockIDbtnEvtBind:function(){var e=this;e.$blockPopWinHtml.find(".b_id_btn").on("click",function(){if(!e.checkCanbeBlocked())return!1;var t=e.getSavesData(1),a=function(o){t=o?$.extend(t,o):t,$.ajax({url:e.config.save_block_id,type:"POST",dataType:"json",data:t,success:function(t){if(1990055===t.errno)if("undefined"==typeof passport||"undefined"==typeof passport.pop.init){var o="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),i="https://passport";$.JsLoadManager.use([i+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(o/6e4),i+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(o/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show();else"0"==t.errno?(e.setNewDialogRespTips(1,"\u5C01\u7981\u6210\u529F\uFF01"),(e.sucCallback||"function"==typeof e.sucCallback)&&e.sucCallback()):224011==t.errno?e.getCaptcha(t,a,e):e.setNewDialogRespTips(2,t.errmsg||"\u5C01\u7981\u5931\u8D25\uFF01")},error:function(t){e.setNewDialogRespTips(2,t)}})};a()})},getCaptcha:function(e,t,a){var o=this;a=a||o;var i=PageData.forum_name||(PageData.forum?PageData.forum.forum_name:""),n=PageData.forum_id||(PageData.forum?PageData.forum.forum_id:"");_.Module.use("pcommon/component/CaptchaDialog",{title:"\u5C01\u7981",message:"\u5C01\u7981\u4E86\u90A3\u4E48\u591A\u4EBA\uFF0C\u8F93\u4E2A\u7801\u9A8C\u8BC1\u4E0B\u8EAB\u4EFD\u5427~",vCode:e.res.captcha_vcode_str,vCodeType:e.res.captcha_code_type,forumName:i,forumId:n,postType:"thread",paramsCallback:function(){return{}}},function(e){o.captchaDialog=e,e.bind("onclose",function(){return e.hide(),!1}),e.bind("onaccept",function(){var o={vcode:e.getInputValue(),vcode_md5:e.getVCode()};t.call(a,o)}),e.show()})},setResponseTips:function(e,t){var a=this,o=a.$blockPopWinHtml.find(".block_tips");1==e?o.removeClass("b_red").addClass("b_green").html(t):o.removeClass("b_green").addClass("b_red").html(t),window.setTimeout(function(){o.hasClass("b_green")&&o.html("")},2e3)},setNewDialogRespTips:function(e,t){var a=this,o=a.$blockPopWinHtml;o.html(a.$responseBlockInfo),1==e?o.find(".block_response_info").removeClass("b_red").addClass("b_green").html(t):o.find(".block_response_info").removeClass("b_green").addClass("b_red").html(t),window.setTimeout(function(){a.blockDialog.hide(),a.user_num>1&&$.tb.location.reload(),a.trigger("hide")},2e3)},tabSwitchEvtBind:function(){var e=this;e.$blockPopWinHtml.on("click",".b_reason_item",function(){return $(this).data("isBuiltinTpl")?$(".b_top_mod_bar .b_del_bar").hide():$(".b_top_mod_bar .b_del_bar").show(),"undefined"!=typeof $(this).tbattr("data-reason-id")||$(this).hasClass("b_add_new_reason")?("none"==e.$blockPopWinHtml.find(".b_reason_top").css("display")&&e.$blockPopWinHtml.find(".b_reason_top").css({display:"block"}),$(this).siblings(".b_reason_item").removeClass("b_reason_curr").end().addClass("b_reason_curr"),$(this).hasClass("b_add_new_reason")?(e.curr_pattern="add",e.$blockPopWinHtml.find(".b_textarea").trigger("focus")):(e.curr_pattern="modify",$.stats.track("reasonItem"+$(this).index(),"uegCount","bawuAppeal","click")),e.setTextareaVal(),void e.toogleToolBar()):!1})},logicalControl:function(){var e=this,t=e.$blockPopWinHtml.find(".b_fixed_time"),a=e.$blockPopWinHtml.find(".b_select_time");e.$blockPopWinHtml.find(".b_reason_item").eq(0).addClass("b_reason_curr"),e.power.ban_id&&e.power.ban_ip||e.power.can_filter_id&&e.power.can_filter_ip?(e.$blockPopWinHtml.find(".b_fixed_tips").html("\u63D0\u793A\uFF1A\u5927\u5427\u4E3B\u53EF\u7F16\u8F91\u539F\u56E0\u6A21\u7248\uFF0C\u4FDD\u5B58\u540E\u5C0F\u5427\u4E3B\u53EF\u76F4\u63A5\u4F7F\u7528\u6587\u6848~"),e.user_num>1?(t.css({display:"block"}),a.css({display:"none"})):1==e.user_num&&(t.css({display:"none"}),a.css({display:"block"})),e.$blockPopWinHtml.find(".b_reason_top,.b_top_mod_bar").css({display:"block"}),e.modifyTextareaCon(),e.deleteTextareaCon(),e.saveTextareaCon(),e.cancelTextareaCon()):(e.$blockPopWinHtml.find(".b_fixed_tips").html("\u63D0\u793A\uFF1A\u539F\u56E0\u6A21\u7248\u53EA\u6709\u5927\u5427\u4E3B\u53EF\u4EE5\u7F16\u8F91\uFF0C\u5C0F\u5427\u4E3B\u4E5F\u53EF\u76F4\u63A5\u5728\u8F93\u5165\u6846\u4E2D\u5199\u4E0A\u5185\u5BB9\u5E76\u5B8C\u6210\u5C01\u7981~"),t.css({display:"block"}),a.css({display:"none"}))}}});_.Module.define({path:"pcommon/widget/live_complaint",requires:[],sub:{initial:function(){},_defaultOpt:{onCloseFn:function(){},msg:'<div class="center-text">\u8BE5\u8D34\u5B50\u5DF2\u88AB\u4FDD\u62A4\uFF0C\u65E0\u6CD5\u76F4\u63A5\u5220\u9664\uFF0C\u5982\u53D1\u73B0\u8D34\u5B50\u6709\u95EE\u9898\u8BF7\u76F4\u63A5\u4E3E\u62A5</div>'},showReport:function(o){o=$.extend({},this._defaultOpt,o);var t=o.msg,e=$.dialog.confirm(t,{showTitle:!1,acceptValue:"\u4E3E\u62A5",buttonCancelValue:" \u53D6\u6D88 "}),n=this;e.bind("onaccept",function(){n._report(o)}),e.bind("oncancel",function(){o.onCloseFn()})},_report:function(o){var t=this,e=o.tids?o.tids:"pb"===window.PageData.product?[window.PageData.thread.thread_id]:[],n={ie:"utf-8",tbs:window.PageData.tbs,kw:window.PageData.forum.forum_name,fid:window.PageData.forum.forum_id,tids:e};$.post("/complaint/batchcommit",n,function(e){e=e?$.parseJSON(e):{},0===e.errno?t.showReportResult({res:!0,onCloseFn:o.onCloseFn}):t.showReportResult({res:!1,onCloseFn:o.onCloseFn})})},showReportResult:function(o){var t=o.res?"\u4E3E\u62A5\u4FE1\u606F\u63D0\u4EA4\u6210\u529F\uFF01\u5904\u7406\u7ED3\u679C\u5C06\u4EE5\u901A\u77E5\u6216\u90AE\u4EF6\u544A\u77E5":"\u4E3E\u62A5\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",e={time:3e3,onclose:o.onCloseFn};$.dialog.assert(t,function(){},e)}}});_.Module.define({path:"ppb/widget/Admin/ThreadManage",requires:["pcommon/widget/live_complaint"],sub:{initial:function(e){this.threadCate=e,this.jdom=$("#j_quick_thread"),this._bindEvents()},_bindEvents:function(){var e=this;if(this.jdom){this.jdom.delegate("a","click",function(){switch(this.className){case"j_thread_setgood":e.set_good();break;case"j_thread_disgood":e.unset_good();break;case"j_thread_settop":e.set_top();break;case"j_thread_distop":e.unset_top();break;case"j_thread_settopic":e.set_topic();break;case"j_thread_distopic":e.unset_topic();break;case"j_thread_setpictopic":e.set_pictopic();break;case"j_thread_dispictopic":e.unset_pictopic();break;case"j_thread_setmembertop":var a={forum_id:PageData.forum.forum_id,thread_id:PageData.thread.thread_id,tbs:PageData.tbs,fag:1};$.tb.get("/tbmall/get/top",a,function(a){0===a.data.end_time?$("#d_post_manage").addClass("zdt"):$("#d_post_manage").removeClass("zdt"),e.set_membertop()});break;case"j_thread_dismembertop":e.unset_membertop()}return!1});var a={forum_id:PageData.forum.forum_id,thread_id:PageData.thread.thread_id,tbs:PageData.tbs,fag:1};$.tb.get("/tbmall/get/top",a,function(e){0===e.data.end_time&&$("#d_post_manage").addClass("zdt")}),$("a.j_thread_delete").live("click",function(){e.threadCate&&e.threadCate.is_top?e.showMessage("\u60A8\u597D\uFF0C\u8BE5\u5E16\u5DF2\u5728["+e.threadCate.second_class_name+"]\u5206\u7C7B\u4E0B\u7F6E\u9876\uFF0C\u6682\u65F6\u65E0\u6CD5\u5220\u9664","",!1):e.del()});var t=$("#d_post_manage"),s=this.jdom;s.children().length>0&&(t.show(),t.hover(function(){$.getJSON("/fex/check/isRealName",function(e){if(e.data===!1&&1===PageData.user.is_login)if("undefined"==typeof passport||"undefined"==typeof passport.pop.init){var a="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),t="https://passport";$.JsLoadManager.use([t+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(a/6e4),t+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(a/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show();else s.show()})},function(){s.hide()}))}if(null==$.cookie("timeShow")){var i=(new Date).getTime(),i=$.cookie("timeShow",i);e.notifyBubble()}else{var i=$.cookie("timeShow"),o=(new Date).getTime(),n=(o-i)/1e3/60/60,r=7;if(n>r&&$("#notify_bubble").length>0){e.notifyBubble();var i=(new Date).getTime(),i=$.cookie("timeShow",i)}}},showMessage:function(e,a,t,s){if(e){var i=this;i.message?i.message.showMessage(e,a,t,s):_.Module.getInstance("ppb/widget/Message",function(o){i.message=o,i.message.showMessage(e,a,t,s)})}},notifyBubble:function(){$("#notify_bubble").show();var e={content:'<p class="small_tip"><i class="icon_top_badge"></i>\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876</p>\u8D85\u7EA7\u4F1A\u5458\u7F6E\u9876\u7279\u6743\u5347\u7EA7\uFF0C\u65E0\u9650\u4F7F\u7528\uFF0C\u5FEB\u6765\u8BD5\u8BD5\u5427\uFF01',arrow_dir:"down",bubble_css:{top:0,right:0,width:150},arrow_pos:{left:30},attr:' id="tb_message_tip_d" ',wrap:$("#notify_bubble"),closeBtn:!0},a=new UiBubbleTipBase(e);a.showBubble()},del:function(){var e=!1;for(var a in PageData.user.new_iconinfo)"net_police"===PageData.user.new_iconinfo[a].name&&(e=!0);var t=e?"\u4E3E\u62A5":"\u5220\u9664",s=$.dialog.confirm('<div class="d_messager_txt">\u786E\u8BA4'+t+"\u8FD9\u6761\u4E3B\u9898\u5417\uFF1F</div>",{showTitle:!1,buttonAcceptValue:" \u786E\u8BA4 ",buttonCancelValue:" \u53D6\u6D88 "}),i=this;s.bind("onaccept",function(){i.execute_delete()})},execute_delete:function(e){var a=this,t={commit_fr:"pb",ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};e&&(t=$.extend(t,a._captcha)),PostHandler.execute("threadDelete",t,function(e){var t="";switch(e.no){case 2501:if("undefined"!=typeof TbSafe){var s=TbSafe.getEnvState();"risk"===s?TbSafe.showRiskTip():"uninstall"===s?TbSafe.showInstallTip("\u6267\u884C\u5220\u8D34\u64CD\u4F5C"):TbSafe.showSidErrorTip();break}case 2502:if("undefined"!=typeof TbSafe){TbSafe.showSidErrorTip();break}case 2503:if("undefined"!=typeof TbSafe){TbSafe.showRiskTip();break}case 0:$.tb.location.setHref("/f?kw="+PageData.forum.name_url);break;case 12:case 13:Thread_add_result.resultNo=e.no,t=Thread_add_result.getMessage();break;case 871:t="\u62B1\u6B49\uFF0C\u4ECA\u5929\u5DF2\u8FBE\u60A8\u5220\u8D34\u7684\u6700\u5927\u9650\u989D\uFF0C\u660E\u5929\u518D\u6765\u8BD5\u8BD5\u5427~";break;case 4011:a._getCaptcha.call(a,e);break;case 899:t="\u5BF9\u4E0D\u8D77\uFF0C\u4F60\u6CA1\u6709\u6743\u9650\u5220\u9664\u8BE5\u8D34\u5B50";break;case 1314001:t="\u60A8\u597D\uFF0C\u8BE5\u5E16\u5DF2\u5728["+a.threadCate.second_class_name+"]\u5206\u7C7B\u4E0B\u7F6E\u9876\uFF0C\u6682\u65F6\u65E0\u6CD5\u5220\u9664";break;case 4014:var i=a.requireInstance("pcommon/widget/live_complaint");return void i.showReport();case 1066:return void $.dialog.alert(e.error,{title:"\u5220\u9664\u6B64\u8D34\u9700\u4E8C\u6B21\u5BA1\u6838"});default:t=e.error||"\u5220\u9664\u4E3B\u9898\u64CD\u4F5C\u5931\u8D25"}""!=t&&a.showMessage(t,"",!1)})},_captcha:{},_getCaptcha:function(e){var a=this;_.Module.use("pcommon/component/CaptchaDialog",{title:"\u5220\u9664\u8D34\u5B50",message:"\u5220\u4E86\u90A3\u4E48\u591A\u8D34\u5B50\uFF0C\u8F93\u4E2A\u7801\u9A8C\u8BC1\u4E0B\u8EAB\u4EFD\u5427~",vCode:e.data.vcode.captcha_vcode_str,vCodeType:e.data.vcode.captcha_code_type,forumName:PageData.forum.forum_name,forumId:PageData.forum.forum_id,postType:"thread",paramsCallback:function(){return{}}},function(e){a.captchaDialog=e,e.bind("onclose",function(){return e.hide(),!1}),e.bind("onaccept",function(){a._captcha.vcode=e.getInputValue(),a._captcha.vcode_md5=e.getVCode(),a.execute_delete.call(a,1)}),e.show()})},set_good:function(){var e=this,a={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,cid:0};$.get("/f/center/goodclass?kw="+PageData.forum.name_url,function(t){var s=[];if(s.push('<div style="width:90%;margin:0 auto; line-height:25px;padding-top:20px">'),s.push("<p>\u5C06\u8BE5\u5E16\u5B50\u5206\u7C7B\u81F3\uFF1A"),s.push('<select class="j_thread_classes">'),s.push('<option value="0" selected>\u672A\u5206\u7C7B</option>'),t)for(var i=0;i<t.length;i++)s.push('<option value="'+t[i].class_id+'">'+t[i].class_name+"</option>");s.push("</select>"),s.push("</p>"),s.push("<p>\u63D0\u793A\uFF1A\u60A8\u53EF\u4EE5\u5230\u5427\u52A1\u7BA1\u7406\u9875\u4E2D\u6DFB\u52A0/\u4FEE\u6539\u5206\u7C7B</p>"),s.push('<div style="text-align:center">'),s.push('<input type="button" value="\u63D0\u4EA4" class="j_thread_classes_confirm"><input type="button" value="\u53D6\u6D88" class="j_thread_classes_cancel">'),s.push("</div>"),s.push("</div>");var o=new $.dialog({html:s.join(""),title:"\u8BBE\u7F6E\u7CBE\u534E\u8D34",width:400,height:140});$("select.j_thread_classes").bind("change",function(){a.cid=this.options[this.selectedIndex].value}),$("input.j_thread_classes_confirm").bind("click",function(){PostHandler.execute("goodAdd",a,function(a){var t="";switch(a.no){case 0:t="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:t=Thread_add_result.getMessage();break;case 1057:t='\u64CD\u4F5C\u5931\u8D25,\u8BE6\u89C1<a href="/helpcenter/index#/index">\u4E2A\u4EBA\u4E2D\u5FC3</a>~';break;default:t="\u8BBE\u4E3A\u7CBE\u534E\u8D34\u64CD\u4F5C\u5931\u8D25"}o.close(),e.showMessage(t,"",!1)})}),$("input.j_thread_classes_cancel").bind("click",function(){o.close()})},"json")},unset_good:function(){function e(e){$.JsLoadManager.use(["http://passport.baidu.com/passApi/js/uni_forceverify_wrapper.js?cdnversion="+(new Date).getTime()],function(){var t=passport.pop.initForceverify({token:e,title:"\u53D6\u6D88\u7CBE\u54C1\u8D34",msg:"\u4E3A\u4E86\u9632\u6B62\u76D7\u53F7\u9020\u6210\u8BEF\u64CD\u4F5C\uFF0C\u53D6\u6D88\u7CBE\u54C1\u8D34\u524D\u8BF7\u5148\u8FDB\u884C\u5B89\u5168\u9A8C\u8BC1",onSubmitSuccess:function(){a.unset_good()}});t.show()},!0,"utf-8")}var a=this,t={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};PageData.user.mobilephone?PostHandler.execute("goodCancel",t,function(t){var s="";switch(t.no){case 0:s="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:s=Thread_add_result.getMessage();break;case 41:e(t.data.token);break;default:s="\u8BBE\u4E3A\u7CBE\u534E\u8D34\u64CD\u4F5C\u5931\u8D25"}a.showMessage(s,"",!1)}):$.dialog.alert("\u4EB2\u7231\u7684\u5427\u4E3B\uFF0C\u6211\u4EEC\u68C0\u6D4B\u5230\u60A8\u5F53\u524D\u672A\u7ED1\u5B9A\u624B\u673A\uFF0C\u8BF7\u524D\u5F80\u5B89\u5168\u4E2D\u5FC3\u7ED1\u5B9A\u624B\u673A\u53F7\u540E\uFF0C\u518D\u8FDB\u884C\u76F8\u5173\u64CD\u4F5C\uFF1B\u5982\u679C\u4E0D\u7ED1\u5B9A\u624B\u673A\u53F7\uFF0C\u5219\u5B58\u5728\u88AB\u76D7\u53F7\u6216\u88AB\u76D7\u53F7\u8005\u62C6\u5427\u7684\u98CE\u9669\u54E6",{title:"\u53D6\u6D88\u7CBE\u54C1\u8D34"})},set_top:function(){var e=this,a={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};PostHandler.execute("threadTopAdd",a,function(a){var t="";switch(a.no){case 0:t="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:t=Thread_add_result.getMessage();break;case 21:t="\u8BE5\u8D34\u4E3A\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u8D34\uFF0C\u65E0\u6CD5\u8FDB\u884C\u666E\u901A\u7F6E\u9876\u64CD\u4F5C";break;case 1057:t='\u64CD\u4F5C\u5931\u8D25,\u8BE6\u89C1<a href="/helpcenter/index#/index">\u4E2A\u4EBA\u4E2D\u5FC3</a>~';break;default:t="\u7F6E\u9876\u4E3B\u9898\u64CD\u4F5C\u5931\u8D25"}e.showMessage(t,"",!0)})},unset_top:function(){var e=this,a={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};PostHandler.execute("threadTopCancel",a,function(a){var t="";switch(a.no){case 0:t="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:t=Thread_add_result.getMessage();break;case 21:t="\u8BE5\u8D34\u4E3A\u4F1A\u5458\u7F6E\u9876\u8D34\uFF0C\u8BF7\u70B9\u51FB\u53D6\u6D88\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u8D34\u64CD\u4F5C";default:t="\u53D6\u6D88\u7F6E\u9876\u64CD\u4F5C\u5931\u8D25"}e.showMessage(t,"",!0)})},set_topic:function(){var e={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,type:3};this.set_topic_request(e)},set_topic_request:function(e){var a=this;$.post("/f/commit/thread/topic/set",e,function(e){var t="",s=80;switch(e.no){case 0:if(t="\u8BDD\u9898\u8D34\u8BBE\u7F6E\u6210\u529F\uFF0C\u6709\u6548\u671F\u81F3"+e.data.expire_time+"\uFF0C\u8FC7\u671F\u81EA\u52A8\u5931\u6548\u54E6~",e.data.conflict_info){var i,o=e.data.conflict_info;t+="\n\u60A8\u6240\u8BBE\u7F6E\u7684\u8BDD\u9898\u8D34\uFF0C\u4E0E\u4E0B\u5217\u8D34\u5427\u76F4\u64AD\u6D3B\u52A8\u51B2\u7A81\uFF0C\u5C4A\u65F6\u5C06\u66FF\u6362\u4E3A\u8D34\u5427\u6D3B\u52A8\uFF0C\u8BF7\u77E5\u6653\uFF1A\n",s+=20;for(var n in o)if(o.hasOwnProperty(n))for(var r=0;r<o[n].length;++r)i=o[n][r],t+=i.forum_name+"\u5427\uFF0C"+$.dateFormat(new Date(1e3*parseInt(i.start_time,10)),"yyyy-MM-dd HH:mm")+" ~ "+$.dateFormat(new Date(1e3*parseInt(i.end_time,10)),"yyyy-MM-dd HH:mm")+"\n",s+=20}break;case 12:case 13:t=Thread_add_result.getMessage();break;case 100012:t="\u8BE5\u5E16\u5B50\u5DF2\u7ECF\u88AB\u8FD0\u8425\u914D\u7F6E\u4E3A\u76F4\u64AD\u8D34\uFF0C\u8BF7\u6362\u4E2A\u5E16\u5B50\u8FDB\u884C\u64CD\u4F5C";break;case 100013:t="\u8BE5\u5427\u5DF2\u7ECF\u6709\u8BDD\u9898\u8D34";break;case 100005:t="\u672C\u5427\u6CA1\u6709\u5F00\u901A\u8BDD\u9898\u8D34\u7684\u6743\u9650";break;case 100003:t="\u8BE5\u7528\u6237\u6CA1\u6709\u914D\u7F6E\u8BDD\u9898\u5E16\u6743\u9650";break;case 1057:t='\u64CD\u4F5C\u5931\u8D25,\u8BE6\u89C1<a href="/helpcenter/index#/index">\u4E2A\u4EBA\u4E2D\u5FC3</a>~';break;default:t="\u518D\u8BD5\u4E00\u4E0B\uFF0C\u670D\u52A1\u5668\u53EF\u80FD\u5F00\u5C0F\u5DEE\u4E86"}a.showMessage(t,"",!1,{align:"left",height:s})},"json")},unset_topic:function(){var e=this,a={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};$.post("/f/commit/thread/topic/del",a,function(a){var t="";switch(a.no){case 0:t="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:t=Thread_add_result.getMessage();break;default:t="\u53D6\u6D88\u8BDD\u9898\u8D34\u64CD\u4F5C\u5931\u8D25"}e.showMessage(t,"",!0)},"json")},set_pictopic:function(){var e={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,type:4};this.set_topic_request(e)},unset_pictopic:function(){var e=this,a={ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};$.post("/f/commit/thread/topic/del",a,function(a){var t="";switch(a.no){case 0:t="\u64CD\u4F5C\u6210\u529F";break;case 12:case 13:t=Thread_add_result.getMessage();break;default:t="\u53D6\u6D88\u56FE\u7247\u8BDD\u9898\u8D34\u64CD\u4F5C\u5931\u8D25"}e.showMessage(t,"",!0)},"json")},set_membertop:function(){var e=this;if(!PageData.user.Parr_props||!PageData.user.Parr_props.level||1e3*PageData.user.Parr_props.level.end_time<(new Date).getTime()){var a=new $.dialog({html:"",title:"\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876",draggable:!1,width:415,height:162});return e.setMtopDialogContent(a,{msg:'<p>\u60A8\u5C1A\u672A\u5F00\u901A\u8D85\u7EA7\u4F1A\u5458<i class="icon_top_badge"></i>\uFF0C\u65E0\u6CD5\u4F7F\u7528\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u7279\u6743</p><p class="small_tip">\u73B0\u5728\u5F00\u901A\uFF0C\u5728\u4F1A\u5458\u6709\u6548\u671F\u5185\u53EF\u65E0\u9650\u6B21\u4F7F\u7528\u7F6E\u9876\u7279\u6743</p>',btnTrue:"\u7ACB\u5373\u5F00\u901A",btnCancel:"\u53D6 \u6D88"}),a.bind("true",function(){_.Module.use("pcommon/widget/JoinVipDialog",[],function(e){e.getMemberDialog()}),a.close()}),void a.bind("cancel",function(){a.close()})}if($("#d_post_manage").hasClass("zdt"))e.setTopSuc();else{var t=['<div id="membertop_dialog_container" class="membertop_rst_container">','<div class="tips">',"<p>\u662F\u5426\u8981\u5C06\u6B64\u8D34\u7F6E\u9876\uFF1F</p>",'<p class="small_tip">\u65B0\u4F1A\u5458\u4E13\u4EAB\u7F6E\u9876\u8D34\u4F1A\u5C06\u65E7\u539F\u7F6E\u9876\u8D34\u66FF\u6362</p>',"</div>",'<div class="btn">','<a href="#" class="ui_btn ui_btn_m j_true">',"<span><em>\u786E \u5B9A</em></span>","</a>",'<a href="#" class="ui_btn ui_btn_sub_m j_cancel">',"<span><em>\u53D6 \u6D88</em></span>","</a>","</div>"].join(""),s=0;PageData.user.Parr_props&&PageData.user.Parr_props[118]&&PageData.user.Parr_props[118][1180001]&&(s=PageData.user.Parr_props[118][1180001].left_num);var i=$.tb.format(t,{count:s}),o=new $.dialog({html:i,title:"\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876",draggable:!1,width:415,height:162}),n=o.element.find("#membertop_dialog_container"),r={forum_id:PageData.forum.forum_id,thread_id:PageData.thread.thread_id,tbs:PageData.tbs,fag:1};$.tb.get("/tbmall/get/top",r,function(e){if(0===e.no&&e.data&&e.data.end_time&&1e3*e.data.end_time>(new Date).getTime()){var a='<p class="counttime_section">\u5269\u4F59\u7F6E\u9876\u65F6\u95F4\uFF1A#{time}</p>',t="",s=1e3*e.data.end_time-(new Date).getTime();if(0>s)t="<span>0</span>\u5C0F\u65F6<span>0</span>\u5206";else{var i=Math.floor(s/36e5),o=Math.floor((s-36e5*i)/6e4);t="<span>"+i+" </span>\u5C0F\u65F6<span> "+o+"</span>\u5206"}var r=$.tb.format(a,{time:t}),d=n.find(".count_section");$(r).insertBefore(d),n.parent("#dialogJbody").css("height",140)}}),0===s&&n.find(".j_true").tbattr("class","ui_btn_disable ui_btn_m_disable j_true"),n.find(".j_true").on("click",function(a){a.preventDefault(),$(this).hasClass("ui_btn_disable")||(o.close(),e.setTopSuc())}),n.find(".j_cancel").on("click",function(e){e.preventDefault(),o.close()})}},setTopSuc:function(){var e=this,a={tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,props_id:1180001,user_id:PageData.user.id};$.tb.post("/f/commit/thread/top/madd",a,function(a){var t=new $.dialog({html:"",title:"\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876",draggable:!1,width:415,height:162});switch(parseInt(a.err_code,10)){case 0:e.setMtopDialogContent(t,{msg:"\u4F1A\u5458\u7F6E\u9876\u6210\u529F",btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){$.tb.location.reload()}),e.postTrack("\u975E\u4F1A\u5458\u5427\u4E3B\u70B9\u51FB_\u7ACB\u5373\u5F00\u901A",PageData.user.id);break;case 2270020:e.setMtopDialogContent(t,{msg:'<p>\u60A8\u5C1A\u672A\u5F00\u901A\u8D85\u7EA7\u4F1A\u5458<i class="icon_top_badge"></i>\uFF0C\u65E0\u6CD5\u4F7F\u7528\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u7279\u6743</p><p class="small_tip">\u73B0\u5728\u5F00\u901A\uFF0C\u5728\u4F1A\u5458\u6709\u6548\u671F\u5185\u53EF\u65E0\u9650\u6B21\u4F7F\u7528\u7F6E\u9876\u7279\u6743</p>',btnTrue:"\u7ACB\u5373\u5F00\u901A",btnCancel:"\u53D6 \u6D88"}),t.bind("true",function(){_.Module.use("pcommon/widget/JoinVipDialog",[],function(e){e.getMemberDialog()}),t.close()}),t.bind("cancel",function(){t.close()});break;case 2270022:e.setMtopDialogContent(t,{msg:"\u8BE5\u8D34\u5DF2\u7ECF\u8BBE\u7F6E\u4E3A\u7F6E\u9876\u8D34\uFF0C\u65E0\u6CD5\u88AB\u8BBE\u7F6E\u4E3A\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u8D34",btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){t.close()});break;case 1211057:e.setMtopDialogContent(t,{msg:'\u64CD\u4F5C\u5931\u8D25,\u8BE6\u89C1<a href="/helpcenter/index#/index">\u4E2A\u4EBA\u4E2D\u5FC3</a>~',btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){t.close()});break;default:e.setMtopDialogContent(t,{msg:"\u670D\u52A1\u5668\u62BD\u98CE\u4E86\uFF0C\u9519\u8BEF\u7801\uFF1A"+a.err_code,btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){t.close()})}var s=t.element.find("#membertop_dialog_container");s.find(".j_cancel").on("click",function(e){e.preventDefault(),t.close()})})},unset_membertop:function(){var e=this,a={tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id};$.tb.post("/f/commit/thread/top/mcancel",a,function(a){var t=new $.dialog({html:"",title:"\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876",draggable:!1,width:415,height:122,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id});switch(parseInt(a.err_code,10)){case 0:e.setMtopDialogContent(t,{msg:"\u53D6\u6D88\u4F1A\u5458\u7F6E\u9876\u6210\u529F",btnTrue:"\u786E \u5B9A"}),$("#d_post_manage").addClass("zdt"),t.bind("true",function(){t.close()});break;case 2270020:e.setMtopDialogContent(t,{msg:'<p>\u60A8\u5C1A\u672A\u5F00\u901A\u8D85\u7EA7\u4F1A\u5458<i class="icon_top_badge"></i>\uFF0C\u65E0\u6CD5\u4F7F\u7528\u8D85\u7EA7\u4F1A\u5458\u4E13\u5C5E\u7F6E\u9876\u7279\u6743</p><p class="small_tip">\u73B0\u5728\u5F00\u901A\uFF0C\u5728\u4F1A\u5458\u6709\u6548\u671F\u5185\u53EF\u65E0\u9650\u6B21\u4F7F\u7528\u7F6E\u9876\u7279\u6743</p>',btnTrue:"\u7ACB\u5373\u5F00\u901A",btnCancel:"\u53D6 \u6D88"}),t.bind("true",function(){_.Module.use("pcommon/widget/JoinVipDialog",[],function(e){e.getMemberDialog()}),t.close()}),t.bind("cancel",function(){t.close()});break;case 2270024:e.setMtopDialogContent(t,{msg:"\u53EA\u6709\u4F1A\u5458\u7F6E\u9876\u5E16\u624D\u53EF\u4EE5\u88AB\u53D6\u6D88",btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){t.close()});break;default:e.setMtopDialogContent(t,{msg:"\u670D\u52A1\u5668\u62BD\u98CE\u4E86\uFF0C\u9519\u8BEF\u7801\uFF1A"+a.err_code,btnTrue:"\u786E \u5B9A"}),t.bind("true",function(){t.close()})}})},setMtopDialogContent:function(e,a){var t=['<div id="membertop_rst_container" class="membertop_rst_container">','<div class="tips">#{msg}</div>','<div class="btn">#{btns}</div>',"</div>"].join(""),s=['<a href="#" class="ui_btn ui_btn_m j_rst_true">',"<span><em>#{btnTrue}</em></span>","</a>"].join(""),i=['<a href="#" class="ui_btn ui_btn_sub_m j_rst_cancel">',"<span><em>#{btnCancel}</em></span>","</a>"].join(""),o="";a.btnTrue&&(o+=$.tb.format(s,a)),a.btnCancel&&(o+=$.tb.format(i,a)),a.btns=o;var n=$.tb.format(t,a);e.setContent(n),e.element.find(".j_rst_true").on("click",function(a){a.preventDefault(),e.triggerHandler("true")}),e.element.find(".j_rst_cancel").on("click",function(a){a.preventDefault(),e.triggerHandler("cancel")})},postTrack:function(e,a){$.stats.track(e,"\u4F1A\u5458\u5065\u5EB7\u7EDF\u8BA1","","click",{obj_name:"\u7F6E\u9876\u7684\u70B9\u51FB\u91CF",obj_id:a})}}});
;_.Module.define({path:"ppb/widget/Admin",requires:["ppb/widget/Admin/ThreadManage","pcommon/widget/BlockUser","pcommon/widget/live_complaint"],sub:{initial:function(){},loadThreadManage:function(a){PageData.is_thread_admin&&this.requireInstance("ppb/widget/Admin/ThreadManage",a)},loadAdmin:function(a,e,t){var i=a.find("ul.p_mtail");i.append(this._getAdminOplistHtml(e,t)),PageData.power.lz_del&&!PageData.user.forbidden.isForbid&&2==t.post_no&&this._showVipdelTip(i)},loadLzlAdmin:function(a){for(var e=a.find("li.j_lzl_s_p"),t=null,i=null,n=null,o=0,r=e.length;r>o;o++)t=$(e[o]),i=t.find("span.j_lzl_o_l"),n=t.getData(),i.html(this._getLzlAdminOplistHtml(n)),i.show()},_getAdminOplistHtml:function(a,e){var t=new Array,i="&nbsp;|";return e.is_anonym?PageData.power.can_filter_ip&&t.push('<li><a class="p_post_ban_anonym" href="#">\u5C01</a>'+i+"</li>"):PageData.power.can_filter_id&&t.push('<li><a class="p_post_ban" href="#">\u5C01</a>'+i+"</li>"),1!=e.post_no&&(PageData.power.can_mask_delete||PageData.power.lz_del&&!PageData.user.forbidden.isForbid&&!PageData.user.is_black)&&t.push('<li><a class="p_post_del" href="#">\u5220\u9664</a>'+i+"</li>"),PageData.power.can_super&&!e.is_anonym&&t.push('<li><a class="p_tieba_manage" href="/f?ct=503316480&cm=6000&tn=bdUserManager&un='+a.name_u+'" target="_blank">\u8D34\u5427\u7BA1\u7406</a>&nbsp;|</li>'),t.join("")},_getLzlAdminOplistHtml:function(a){var e=new Array,t="&nbsp;|&nbsp;";(PageData.power.can_filter_ip||PageData.power.can_filter_id)&&e.push('<a href="#" class="j_lzl_ban">\u5C01</a>'+t),(PageData.power.can_mask_delete||PageData.power.lz_del&&!PageData.user.forbidden.isForbid&&!PageData.user.is_black)&&e.push('<a href="#" class="j_lzl_del">\u5220\u9664</a>'+t),PageData.power.can_super&&e.push('<a href="/f?ct=503316480&cm=6000&tn=bdUserManager&un="'+a.user_name+' class="j_lzl_manage p_tieba_manage" target="_blank">\u8D34\u5427\u7BA1\u7406</a>'+t);var i=e.join("");return $.browser.msie&&"6.0"==$.browser.version&&!$.support.style&&(i+="&nbsp;"),i},_showVipdelTip:function(a){var e=$.cookie("VIP_TIP_USERS")||"|",t="|"+PageData.user.user_id+"|";if(!(e.indexOf(t)>=0)){e+=PageData.user.user_id+"|",$.cookie("VIP_TIP_USERS",e);var i=$('<div id="vip_del_tip" class="vip_del_tip"></div>');a.append(i);var n=0,o=0;o=0,n=-112;var r={content:"\u60A8\u53EF\u4EE5\u5220\u9664\u81EA\u5DF1\u4E3B\u9898\u8D34\u4E2D\u7684\u56DE\u590D",arrow_dir:"down",bubble_css:{top:o,right:n,width:180},arrow_pos:{left:30},attr:' id="tb_message_tip_n" ',wrap:$("#vip_del_tip"),closeBtn:!0},s=new UiBubbleTipBase(r);s.showBubble()}},bindAdminEvents:function(){var a=this,e=($("#j_p_postlist"),null);$("a.p_post_ban_anonym,.p_post_ban").live("click",function(){return $postItem=$(this).parents("div.l_post"),e=$postItem.getData(),a.use("pcommon/widget/BlockUser",[{username:e.author.user_name,pid:e.content.post_id,nickname:e.author.user_nickname,portrait:e.author.portrait}],{ban_ip:PageData.power.can_filter_ip,ban_id:PageData.power.can_filter_id},{forum_name:PageData.forum.forum_name,forum_id:PageData.forum.forum_id},PageData.tbs),!1}),$("a.p_post_del").live("click",function(){$postItem=$(this).parents("div.l_post"),e=$postItem.getData();var t={author_name:e.author.user_name,content_id:e.content.post_id};return a._del_post_confirm(t,0),!1})},bindLzlAdminEvents:function(){var a=this,e=($("#j_p_postlist"),null),t=null;$("a.j_lzl_ban").live("click",function(){return $lzlItem=$(this).parents("li.j_lzl_s_p "),t=$lzlItem.getData(),a.use("pcommon/widget/BlockUser",[{username:t.user_name,pid:t.spid||t.pid,nickname:t.user_nickname,portrait:t.portrait}],PageData.power,{forum_id:PageData.forum.forum_id,forum_name:PageData.forum.forum_name},PageData.tbs),!1}),$("a.j_lzl_del").live("click",function(){return e=$(this).parents("li.j_lzl_s_p"),t=e.getData(),a._del_post_confirm(t,1),!1})},_del_post_confirm:function(a,e){var t=this,i=!1;for(var n in PageData.user.new_iconinfo)"net_police"===PageData.user.new_iconinfo[n].name&&(i=!0);var o=i?"\u4E3E\u62A5":"\u5220\u9664",r=$.dialog.confirm('<div style="margin:15px auto 0;text-align:center;">\u786E\u8BA4'+o+"\u8FD9\u6761\u56DE\u590D?<div>",{showTitle:!1});r.bind("onaccept",function(){t._del_post(a,e)})},_del_post:function(a,e,t){var i=this,n={commit_fr:"pb",ie:"utf-8",tbs:PageData.tbs,kw:PageData.forum.forum_name,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,is_vipdel:PageData.power.lz_del?1:0};e?(n.pid=a.spid,n.is_finf=1):(n.pid=a.content_id,n.is_finf=!1),t&&(n=$.extend(n,i._captcha)),PostHandler.execute("postDelete",n,function(t){var n="";switch(t.no){case 2501:if("undefined"!=typeof TbSafe){var o=TbSafe.getEnvState();"risk"===o?TbSafe.showRiskTip():"uninstall"===o?TbSafe.showInstallTip("\u6267\u884C\u5220\u8D34\u64CD\u4F5C"):TbSafe.showSidErrorTip();break}case 2502:if("undefined"!=typeof TbSafe){TbSafe.showSidErrorTip();break}case 2503:if("undefined"!=typeof TbSafe){TbSafe.showRiskTip();break}case 0:$.tb.location.reload(!0);break;case 12:case 13:n=Thread_add_result.getMessage();break;case 871:n="\u62B1\u6B49\uFF0C\u4ECA\u5929\u5DF2\u8FBE\u60A8\u5220\u8D34\u7684\u6700\u5927\u9650\u989D\uFF0C\u660E\u5929\u518D\u6765\u8BD5\u8BD5\u5427~";break;case 4011:i._getCaptcha.call(i,t,a,e);break;case 4001:n="\u60A8\u597D\uFF0C\u8BE5\u5E16\u5DF2\u5728\u5F53\u524D\u5206\u7C7B\u4E0B\u7F6E\u9876\uFF0C\u6682\u65F6\u65E0\u6CD5\u5220\u9664";break;case 4014:var r=i.requireInstance("pcommon/widget/live_complaint");return void r.showReport();default:n="\u62B1\u6B49\uFF0C\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u8D34\u5B50\u5220\u9664\u5931\u8D25\u3002"}n&&(i.message?i.message.showMessage(n,"",!1):i.requireInstanceAsync("ppb/widget/Message",[],function(a){i.message=a,a.showMessage(n,"",!1)}))})},_captcha:{},_getCaptcha:function(a,e,t){var i=this;_.Module.use("pcommon/component/CaptchaDialog",{title:"\u5220\u9664\u8D34\u5B50",message:"\u5220\u4E86\u90A3\u4E48\u591A\u8D34\u5B50\uFF0C\u8F93\u4E2A\u7801\u9A8C\u8BC1\u4E0B\u8EAB\u4EFD\u5427~",vCode:a.data.vcode.captcha_vcode_str,vCodeType:a.data.vcode.captcha_code_type,forumName:PageData.forum.forum_name,forumId:PageData.forum.forum_id,postType:"thread",paramsCallback:function(){return{}}},function(a){i.captchaDialog=a,a.bind("onclose",function(){return a.hide(),!1}),a.bind("onaccept",function(){i._captcha.vcode=a.getInputValue(),i._captcha.vcode_md5=a.getVCode(),i._del_post.call(i,e,t,1)}),a.show()})}}});_.Module.define({path:"ppb/widget/TomsAdmin",sub:{OPT_TYPE:{DEL:1,GOOD:2,LOCK:3},ERROR_MAP:{2820110:"\u5220\u5E16\u8FC7\u4E8E\u9891\u7E41\uFF0C\u5F53\u65E5\u5220\u5E16\u529F\u80FD\u4E0D\u53EF\u7528",2820117:"\u5E16\u5B50\u5DF2\u7ECF\u88AB\u7533\u8BC9\u8FC7\u4E86",2820112:"\u5DF2\u5230\u5F53\u65E5\u8BBE\u4E3A\u7CBE\u534E\u5E16\u6570\u91CF\u4E0A\u9650",2820111:"\u5DF2\u5230\u5F53\u65E5\u9501\u5E16\u4E0A\u9650\uFF0C\u9501\u5E16\u529F\u80FD\u4E0D\u53EF\u7528",260410:"\u65E0\u6743\u64CD\u4F5C",2820107:"\u5DF2\u7533\u8BF7\u52A0\u7CBE\uFF0C\u4E0D\u80FD\u64CD\u4F5C",2820108:"\u5E16\u5B50\u5DF2\u7ECF\u7533\u8BF7\u9501\u5E16",2820106:"\u5E16\u5B50\u5DF2\u7ECF\u7533\u8BF7\u5220\u9664"},AJAX_OPT_URL:"/toms/admin/submit/frontCommit",initial:function(){this.$itemList=$(".js-toms-admin-item"),this.$admin=$(".js-toms-admin"),this._bindEvents()},_bindEvents:function(){var e=this,t=this.$itemList,o=this.$admin,i=o.find(".js-title");if(o.length){o.show(),t.on("click","a",function(){var t=$(this);if(t.hasClass("disabled"))return!1;var o=t.data("optType");switch(o){case"del":e.del();break;case"lock":e.lock();break;case"good":e.good()}return!1});var a=e.$delItem=t.find('a[data-opt-type="del"]');a.hasClass("disabled")&&a.hover(function(){e.delBubble||e.createDelBubble(),e.delBubble.showBubble()},function(){e.delBubble&&e.delBubble.hideBubble()});var s=e.$lockItem=t.find('a[data-opt-type="lock"]');s.hasClass("disabled")&&s.hover(function(){e.lockBubble||e.createLockBubble(),e.lockBubble.showBubble()},function(){e.lockBubble&&e.lockBubble.hideBubble()}),i.hasClass("disabled")?o.hover(function(){e.tomsBubble||e.createTomsBubble(),e.tomsBubble.showBubble()},function(){e.tomsBubble&&e.tomsBubble.hideBubble()}):o.hover(function(){t.show()},function(){t.hide()})}},del:function(){var e=$.dialog.confirm('<div class="d_messager_txt">\u786E\u8BA4\u5220\u9664\u8FD9\u6761\u4E3B\u9898\u5417\uFF1F</div>',{title:"\u63D0\u793A",buttonAcceptValue:" \u786E\u8BA4 ",buttonCancelValue:" \u53D6\u6D88 "}),t=this;e.bind("onaccept",function(){t.execute_opt(t.OPT_TYPE.DEL)})},lock:function(){var e=$.dialog.confirm('<div class="d_messager_txt">\u786E\u8BA4\u9501\u5B9A\u8FD9\u6761\u4E3B\u9898\u5417\uFF1F</div>',{title:"\u63D0\u793A",buttonAcceptValue:" \u786E\u8BA4 ",buttonCancelValue:" \u53D6\u6D88 "}),t=this;e.bind("onaccept",function(){t.execute_opt(t.OPT_TYPE.LOCK)})},good:function(){var e=$.dialog.confirm('<div class="d_messager_txt">\u8BBE\u7F6E\u672C\u6761\u8D34\u5B50\u4E3A\u7CBE\u534E\u8D34</div>',{title:"\u63D0\u793A",buttonAcceptValue:" \u786E\u8BA4 ",buttonCancelValue:" \u53D6\u6D88 "}),t=this;e.bind("onaccept",function(){t.execute_opt(t.OPT_TYPE.GOOD)})},execute_opt:function(e){var t=this,o={type:e,tbs:PageData.tbs,fid:PageData.forum.forum_id,tid:PageData.thread.thread_id,lz_uid:t.$itemList.data("lzId"),pid:t.$itemList.data("postId")};$.ajax({url:t.AJAX_OPT_URL,data:o,dataType:"json",type:"post",cache:!1}).success(function(o){var i="";if(o&&0===o.errno){if(i="\u64CD\u4F5C\u6210\u529F",e===t.OPT_TYPE.DEL){var a="/f?ie=utf-8&kw="+$.tb.escapeHTML(PageData.forum.forum_name||"");return void t.showMessage(i,{onaccept:function(){$.tb.location.setHref(a)}})}t.showMessage(i)}else o&&(i=t.ERROR_MAP[o.errno]||"\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",t.showMessage(i))}).fail(function(){var e="\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01";t.showMessage(e)})},showMessage:function(e,t){e&&$.dialog.alert('<div class="d_messager_txt">'+e+"</div>",$.extend({title:"\u63D0\u793A"},t))},createTomsBubble:function(){var e={content:"\u8BE5\u8D34\u6682\u65F6\u65E0\u6CD5\u64CD\u4F5C",arrow_dir:"down",bubble_css:{top:4,right:-2,width:97},arrow_pos:{left:48},wrap:this.$admin,closeBtn:!1,arrowReq:!0};this.tomsBubble=new UiBubbleTipBase(e)},createDelBubble:function(){var e={content:"2\u5C0F\u65F6\u5185\u4E0D\u5F97\u91CD\u590D\u5220\u9664\u540C\u4E00\u4E3B\u9898\u8D34",arrow_dir:"left",bubble_css:{top:-7,right:-175,width:185},arrow_pos:{top:5},wrap:this.$delItem,closeBtn:!1,arrowReq:!0};this.delBubble=new UiBubbleTipBase(e)},createLockBubble:function(){var e={content:"\u65E0\u6743\u9501\u5B9A\u8BE5\u4E3B\u9898\u8D34",arrow_dir:"left",bubble_css:{top:-7,right:-96,width:106},arrow_pos:{top:5},wrap:this.$lockItem,closeBtn:!1,arrowReq:!0};this.lockBubble=new UiBubbleTipBase(e)}}});!function(){window.Path={map:function(t){return this.routes.defined[t]||(this.routes.defined[t]=new this.Route(t)),this.routes.defined[t]},listened:!1,listen:function(){this.listened=!0,this.supported=!(!window.history||!window.history.pushState),this.oldIE=navigator.userAgent.toLowerCase().search("msie")>0&&(!document.documentMode||document.documentMode<8);var t,e,i=$.tb.location;this.supported?(t=function(){Path.dispatch(i.getPathname()+i.getSearch())},window.onpopstate=t,e=i.getPathname()+i.getSearch()):(e=this.getHash(),this.oldIE?(t=function(){Path.dispatch(Path.getHash(Path.iframe.location))},this.iframe=document.createElement('<iframe src="javascript:0" tabindex="-1">'),this.iframe.style.display="none",document.body.insertBefore(this.iframe,document.body.firstChild),this.iframe=this.iframe.contentWindow,this.iframe.document.open().close(),this.iframe.location.hash=e,setInterval(t,1e4)):(t=function(){Path.dispatch(i.getHash().replace("#",""))},window.onhashchange=t),""!==e&&this.execute(e)),this.routes.current=e},nav:function(t){if(this.listened){if(/pn=1$/.test(t)){var e=$.tb.location.getHref(),i=/pn=\d+/g,n=i.test(e)?e.replace(i,"pn=1"):"/p/"+PageData.thread.thread_id+"?pn=1";return void $.tb.location.setHref(n)}this.supported?(window.history.pushState(null,null,t),this.dispatch(t)):this.oldIE?(this.iframe.document.open().close(),this.iframe.location.hash=t):$.tb.location.setHash(t)}},refresh:function(){this.execute(this.routes.current,!0)},setDefaultAction:function(t){this.defaultAction=t},Route:function(t){this.action=null,this.path=t},routes:{current:null,defined:{}},dispatch:function(t){t!==this.routes.current&&(this.routes.current=t,this.oldIE&&$.tb.location.setHash(t),this.execute(t))},execute:function(t,e){""===t&&(t=$.tb.location.getPathname()+$.tb.location.getSearch());var i,n;for(var a in Path.routes.defined)if(i=Path.routes.defined[a],n=Path.match(i.path,t))return void i.action.call(i,n[0],n[1],e);"function"==typeof this.defaultAction&&this.defaultAction.call(this,t,!0)},match:function(t,e){var i=[e];if(t=t.split("/"),e=e.split("/"),t.length!==e.length)return!1;for(var n,a=0,o=t.length;o>a;a++)if(n=t[a].search(":"),-1!==n){if(t[a].slice(0,n)!==e[a].slice(0,n))return!1;i.push(e[a].slice(n))}else if(t[a]!==e[a])return!1;return i},getHash:function(t){var e="";return e=t?t.href.match(/#(.*)$/):$.tb.location.getHref().match(/#(.*)$/),e?e[1]:""},clean:function(){this.routes.current=null,this.routes.defined={}}},Path.Route.prototype={to:function(t){this.action=t}}}(),_.Module.define({path:"ppb/widget/NoRefresh",sub:{initial:function(t,e){function i(){$(".pb_list_pager").off("click").on("click",function(t){var e,i,n=$.tb.location,a=t.target;return PageData.user.is_login||_.Module.use("common/widget/LoginDialog",["","userbar",function(){},"pb_pager"]),i=$(this).parents(".p_thread"),i.find(".loading-tip").css({top:i.offset().top+i.height()+20+"px",left:i.offset().left+$(".left_section").width()/2-35+"px"}).show(),m&&m.start_event(),"a"===a.tagName.toLowerCase()?(e=a.getAttribute("href",2).replace(n.getProtocol()+"//"+n.getHost(),""),d||(e="/pn="+e.match(/\d+$/)),Path.nav(e),t.preventDefault(),!1):void 0}),$(".jump_input_bright").off("keypress").on("keypress",function(t){var e=$(this);m&&m.start_event(),13==t.keyCode&&h(t,e)}),$(".jump_btn_bright").off("click").on("click",function(t){var e=$(this).prev(".jump_input_bright");m&&m.start_event(),h(t,e)})}function n(){bdShareTb.fn?bdShareTb.fn.init():_.Module.use("pcommon/widget/bd_share",null,function(){bdShareTb.fn.init()})}function a(){mbox.player&&mbox.player.stop(),mbox.player&&mbox.player.dispose()}function o(o,s,h){var c;if(-1!==o.indexOf("#")&&o.slice(0,o.indexOf("#")),c=d?o+"&ajax=1&t="+(new Date).getTime():t+s+"&ajax=1&t="+(new Date).getTime(),h&&(c+="&refresh=true"),l){if(f===s)return;l.abort()}a(),f=s,m&&m.start_send(),l=$.get(c,function(t){l=null,m&&m.transfer_time(),e||r(),setTimeout(function(){var e=$(t),a=e.slice(1),o=e.find("#j_p_postlist"),r=e.find("#ajax-up"),s=e.find("#ajax-down"),h=e.find("#ajax-title .core_title_txt");buttons=e.find("#ajax-title .core_title_btns"),script=e.find("#ajax-script"),$("#j_p_postlist").empty().html(o.html()),$(".p_thread:first").replaceWith(r.html()),$(".p_thread:last").replaceWith(s.html()),$(".core_title_txt").replaceWith(h),$(".core_title_btns").empty().html(buttons.html()),$("body").append(a),u.fire("noRefreshFinish"),i(),n(),PageData.pager.total_page=parseInt(r.find(".jump_input_bright").tbattr("max-page"))||1,PageData.pager.cur_page=parseInt(f,10)||1,m&&m.view_time(),m&&m.ready(),$.stats.track("pbpage","pbpv","pb","show")},0)},"html")}function r(){var t=$(window).scrollTop();t>0&&($("body").animate({scrollTop:1},"medium"),setTimeout(function(){window.scrollTo(0,0)},500))}function s(t){var e=$.tb.location.getPathname()+$.tb.location.getSearch(),i=e.indexOf("#");return i>=0&&(e=e.substr(0,i)),-1==e.indexOf("pn")?e+=-1==e.indexOf("?")?"?pn="+t:e.indexOf("?")==e.toString().length-1?"pn="+t:"&pn="+t:e=e.replace(/(.*pn=)(\d+)?/,function(e,i){return i+""+t}),e}function h(t,e){var i,n=e,a=n.val(),o=n.tbattr("max-page");return d?/^(-?)(\d+)$/.test(a)?($pthread=n.parents(".p_thread"),$pthread.find(".loading-tip").css({top:$pthread.offset().top+$pthread.height()+20+"px",left:$pthread.offset().left+$(".left_section").width()/2-35+"px"}).show(),a=Math.max(1,Math.min(a,o)),i=s(a),d||(i="/pn="+a),Path.nav(i),t.preventDefault(),!1):(n.val(""),!1):/^(-?)(\d+)$/.test(a)?(Path.nav("/pn="+a),$pthread=n.parents(".p_thread"),$pthread.find(".loading-tip").css({top:$pthread.offset().top+$pthread.height()+20+"px",left:$pthread.offset().left+$(".left_section").width()/2-35+"px"}).show(),!1):void 0}function c(){$("#container").on("mousedown",".pb_list_pager a",function(){var t=$(this).parents(".p_thread").tbattr("id");return $(this).hasClass("pager_disabled")?!1:void p("pb_fanye_page",t)})}function p(t,e){$.tb.Stats.sendRequest("http://tb1.bdstatic.com/tb/img/pv.gif",{fr:"tb0_forum",st_mod:"pb",st_type:t,st_value:e})}var f,d=!(!window.history||!window.history.pushState),u=this,l=null;if("undefined"!=typeof AJAX_MONITOR){AJAX_MONITOR.PDC.init({product_id:14,sample:1,max:5});var m=AJAX_MONITOR.PDC.createInstance(13)}i(),c(),Path.map(d?t+":num":"/pn=:num").to(function(t,e,i){o(t,e,i)}),Path.setDefaultAction(function(t,e){if(""===t.replace("#","")||e){var i=t.match(/&pn=(\d+)/i);i=i?i[1]:void 0===f?0:f,o(i,e)}}),Path.listen(),window.refreshPage=o}}});window._.Module.define({path:"star/widget/crowdfundingTraveling",sub:{$root:$(".crowdfunding-traveling-wrapper"),initial:function(i){if(parseInt($.browser.version,10)<=8)return this.$root.remove(),void 0;var r="crowdfdundingTravelingTimes"+i.activityId+i.displayForumId+i.userId,o=$.cookie(r)||0;3>o&&(this.$root.show(),o++,$.cookie(r,o,{expires:1/12,path:"/"}))}}});_.Module.define({path:"pcommon/component/force_login",sub:{_config:{apiOpt:{staticPage:"http://"+$.tb.location.getHost()+"/tb/static-common/html/pass/v3Jump.html",product:"pctb_3",charset:PageData&&PageData.charset?PageData.charset:"GBK",u:"",memberPass:!0,safeFlag:0},cache:!1,img:"",onLoginSuccess:function(t){t.returnValue=!1,$.stats.sendRequest("st_type=login_succeed&fr=tb0&st_pos="),$.tb.location.reload()},onSubmitStart:function(){$.stats.sendRequest("st_type=login_click&fr=tb0&st_pos=")},registerLink:"https://passport.baidu.com/v2/?reg&tpl=tieba&u=http://tieba.baidu.com",tangram:!0},initial:function(t,e,s,a,c){var i=this,p=1,o="string"==typeof s&&""!==s?s:"dialog";if(i._config.apiOpt.u="string"==typeof t&&""!=t?t:$.tb.location.getHref(),"page"===o)return void $.tb.location.setHref("/f/user/passport?jumpUrl="+i._config.apiOpt.u+"&statsInfo="+a);switch(a){case"pb_lzl_more":$.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web");break;case"pb_see_lz":$.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web")}if("string"==typeof e){switch(e){case"userBar":p=1;break;case"editor1":case"lzl":p=2;break;case"editor":p=3;break;case"lzonly":p=4;break;case"ilike":p=5;break;default:p=1}i._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+p+".png"}else i._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+p+".png";PageData&&(i._config.apiOpt.isQuickUser=PageData.is_quick_user||0),i._config.onLoginSuccess=c?function(t){switch(a){case"pb_lzl_more":$.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u767B\u5F55\u6210\u529F","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web");break;case"pb_see_lz":$.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u767B\u5F55\u6210\u529F","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web")}t.returnValue=!1,c(),setTimeout(function(){$.tb.location.setHref(i._config.apiOpt.u)},500)}:function(t){switch(a){case"pb_lzl_more":$.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u767B\u5F55\u6210\u529F","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web");break;case"pb_see_lz":$.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u767B\u5F55\u6210\u529F","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","view","pc_web")}t.returnValue=!1,setTimeout(function(){$.tb.location.setHref(i._config.apiOpt.u)},500)},arguments.length>4&&(i._config.apiOpt.product=arguments[4]),function(t){var e="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime();t.JsLoadManager.use(["http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(e/6e4),"http://passport.bdimg.com/passApi/js/wrapper.js?cdnversion="+Math.floor(e/6e4)],function(){t.passPopInstance||(t.passPopInstance=passport.pop.init(i._config)),t.passPopInstance.show();var e=setInterval(function(){var s=t("#passport-login-pop");0!==s.length&&(s.find(".pass-login-pop-img img").tbattr("src",i._config.img),s.find(".pass-reglink").click(function(){switch(a){case"pb_lzl_more":t.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u7ACB\u5373\u6CE8\u518C","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web");break;case"pb_see_lz":t.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u7ACB\u5373\u6CE8\u518C","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web")}}),s.find(".pass-fgtpwd").click(function(){switch(a){case"pb_lzl_more":t.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u5FD8\u8BB0\u5BC6\u7801","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web");break;case"pb_see_lz":t.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u5FD8\u8BB0\u5BC6\u7801","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web")}}),s.find(".pass-button-submit").click(function(){switch(a){case"pb_lzl_more":t.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u767B\u5F55","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web");break;case"pb_see_lz":t.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u767B\u5F55","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web")}}),s.find(".close-btn").click(function(){switch(a){case"pb_lzl_more":t.stats.track("PB\u9875\u70B9\u51FB\u697C\u4E2D\u697C\u67E5\u770B\u66F4\u591A\u767B\u5F55\u5F39\u7A97_\u5173\u95ED","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web");break;case"pb_see_lz":t.stats.track("PB\u9875\u70B9\u51FB\u53EA\u770B\u697C\u4E3B\u767B\u5F55\u5F39\u7A97_\u5173\u95ED","PC\u7AEF\u5F3A\u5236\u767B\u5F55\u7EDF\u8BA1","pb","click","pc_web")}}),clearInterval(e))},200);setTimeout(function(){t("#passport-login-pop").find("input.pass-button-submit").tbattr("alog-alias","login")},1e3)},!0,"utf-8")}(window.jQuery)}}});_.Module.define({path:"common/widget/BskService",requires:[],sub:{initial:function(){this.loader=window._BSK?{done:function(n){n()},fail:function(){}}:$.ajax({url:"https://fex.bdstatic.com/bsk/??dknsaZmLdyKfEeIVbKxn_dcc70f7.js,omzVouOACqkNljzDbdOB_af501e9.js",cache:!0,dataType:"script"})},slientEncrypt:function(n,e){return this.encrypt(n,e)["catch"](function(){return e})},encrypt:function(n,e){var t=this;return new Promise(function(i,o){t.loader.done(function(){window._BSK||o(new Error("BSK load failed"));var t={};window._BSK.a("omzVouOACqkNljzDbdOB",{IN:n,OUT:t}),$.extend(e,{_BSK:t.data}),i(e)}).fail(function(){o(new Error("BSK load failed"))})})}}});_.Module.define({path:"adsense/widget/tool_async",requires:[],sub:{initial:function(){this.dataHandler=this.requireInstance("adsense/widget/data_handler_async",[])},genMd5:function(e){var t="AS"+this.genRandChar(),a=(new Date).getTime();return t+e.substr(-3)+(""+a).substr(-6)},genQaClassName:function(){return"1"==$.tb.location.getSearchValue("__qa_page_diff")?"__qa_page_diff":""},genRandChar:function(){var e="abcdefghijklmnopqrstuvwxyz";return e[this._randomInt(0,e.length-1)]},_randomInt:function(e,t){return e-=1,Math.ceil(e+Math.random()*(t-e))},getStatsUrl:function(e,t){var a;return a=t.click_url_params?this.getUrl({url:"/link",tbjump:t.click_url_params,extra:{obj_id:t.id}}):e},getUrl:function(e){var t=$.getPageData("forum"),a=$.getPageData("user"),r=$.getPageData("context.thread_info",{}),n=e.url?e.url:"",i=$.getPageData("product",""),u=["client_type=pc_web","tbjump="+(e.tbjump?e.tbjump:""),"task="+(e.task?e.task:""),"locate="+(e.locate?e.locate:""),"page="+(e.page?e.page:""!=i?i:"MODULE_NAME"),"type=click","fid="+(t.forum_id?t.forum_id:""),"fname="+(t.forum_name?t.forum_name:""),"uid="+(a.user_id?a.user_id:""),"uname="+(a.user_name?a.user_name:""),"is_new_user="+(a.is_new_user?a.is_new_user:""),"tid="+(r.thread_id?r.thread_id:""),"_t="+(new Date).getTime()];return e.extra&&$.each(e.extra,function(e,t){u.push(e+"="+t)}),n+"?"+u.join("&")},getDirInfo:function(){var e=this.dataHandler.getData();return{forum_dir:$.getPageData("forum.first_class",""),forum_second_dir:$.getPageData("forum.second_class",""),forum_vdir:$.getPageData("forum_vdir","",e)}},getSpecialInfo:function(e){for(var t=this.dataHandler.getData(),a={},r=0,n=e.length;n>r;r++)a[e[r]]=t[e[r]];return a},preProcess:function(e,t,a){return"undefined"==typeof a&&(a=0),t.loc_index=a+1,t}}});_.Module.define({path:"adsense/widget/loader_async",requires:["adsense/widget/tool_async"],sub:{initial:function(e){var t=this.requireInstance("adsense/widget/tool_async"),a="/dasense/"+e.url,n=e.extraData||{},s=e.specialDataName||[];this.tool=t,a=t.getUrl({url:a}),this.dataname=e.dataname||null,this.dfd=$.Deferred(),this._getData(a,n,s)},_getData:function(e,t,a){var n=this,s=this.tool.getDirInfo(),i=this.tool.getSpecialInfo(a);t=$.extend(null,t,s,i,{ie:"utf-8"}),$.getJSON(e,t,function(e){if(0!=e.errno||!n.dataname)return!1;var t=$.getPageData("data.adsense",{},e);n.data=t[n.dataname]||[],n._loadTPL()})},_loadTPL:function(){for(var e=!0,t=null,a=0,n=this.data.length;n>a;a++){var s=this.data[a];s=this.tool.preProcess(this.dataname,s,a),s.first_screen&&"0"!=s.first_screen||!e||(t=-1==(s.tpl_name+"").indexOf("ASYNC_")?"tpl_async_"+s.tpl_name:"tpl_"+s.tpl_name,t="adsense/widget/"+t,this.requireInstanceAsync(t,[{adData:s,needStats:!0}]))}this._resolve()},_resolve:function(){var e=null;e=this.data.length?{no:0,error:""}:{no:1,error:"has no data"},this.dfd.resolve(e)}}});_.Module.define({requires:["adsense/widget/loader_async"],path:"ucenter/widget/LikeTip",sub:{initial:function(e,s,i,t){var r=this;if(this.userForumList=t||"",i&&i.like_no&&i.like_no>=1){var a=$.dialog.open(['<div id="do_like_back_wrapper">','<img class="like_back_img" src="//tb2.bdstatic.com/tb/static-ucenter/widget/like_tip/img/like_back_c3abf90.jpg">',this.like_forum_tmp,"</div>"].join(""),{width:478,acceptValue:"\u77E5\u9053\u4E86"});$(a.element[0]).find(".dialogJcontent").css("padding-bottom","0px"),$(a.element[0]).find(".dialogJanswers").css("padding-top","0px"),a.bind("onaccept",function(){r.reloadAndGotop()}).bind("onclose",function(){r._postDaLikeTrack("\u5173\u95ED"),r.reloadAndGotop()})}else{var n=this.getTipContent(e,s,i),l={title:"\u6210\u529F\u63D0\u793A",width:478,modal:!e};this.isSuperMember()&&(l.width=535);var a=$.dialog.open(n,l);e&&$(a.element[0]).css("padding","2px"),$(a.element[0]).find(".dialogJcontent").tbattr("id","balv_first_like_dialog"),$(a.element[0]).find(".userlike_tip_span a").click(function(){Stats.sendRequest("fr=tb0_forum&st_mod=frs&st_type=entryimallinpop")}),$(a.element[0]).on("click",".userlike_supermember_btn",function(){window.open("/tbmall/mall/forumMember"),r.reloadAndGotop()}),a.bind("onclose",function(){r._postDaLikeTrack("\u5173\u95ED"),r.reloadAndGotop()})}this.initLikeForum(a)},like_forum_tmp:['<div id="content-recommend-like-forum">','<p class="like-btn-wrapper">\u4F60\u53EF\u80FD\u8FD8\u60F3\u5173\u6CE8<button class="btn-default btn-small pull-right a-like-all-btn">\u4E00\u952E\u5173\u6CE8</button></p>','<div class="adsense-content-recommend-forum"></div>',"</div>"].join(""),initLikeForum:function(e){var s=100,i=this.requireInstance("adsense/widget/loader_async",[{url:"recommend",dataname:"PC_RECOMM_BOTTOM",extraData:{user_forum_list:this.userForumList}}]),t=$("#content-recommend-like-forum"),r=this;t.on("click",".a-like-all-btn",function(){r._postDaLikeTrack("\u4E00\u952E\u5173\u6CE8"),t.find(".a-like-btn.btn-sub:lt(4)").trigger("click")}),i.dfd.done(function(i){0==i.no&&t.html().length&&(t.show(),e.setPosition(null,s))})},_postDaLikeTrack:function(e,s,i,t){"undefined"==typeof e&&(e=""),"undefined"==typeof t&&(t="click"),i=i||{},s&&(i=$.extend({obj_name:s.game_name,obj_game_id:s.game_id},i)),$.stats.track(e,"\u5206\u53D1\u5173\u6CE8\u5427\u63A8\u8350","",t,i)},getTipContent:function(e,s,i){var t=PageData,r=t.user.level_id?t.user:t.user.balv,a="<span>";e&&(a+=e+"\uFF0C"),a+="\u606D\u559C\u4F60\u6210\u4E3A\u672C\u5427\u7B2C</span>",a+="<span class='tip_font_orange'>"+i.index+"</span>",a+="<span>\u4F4D\u4F1A\u5458</span>";var n="";n+='<div class="userlike_tip_join" id="userlike_tip_join">',n+='<div class="userlike_tip_info" id="userlike_tip_info">'+a+"</div>",e?n+='<div class="user_rights_msg"><span class="user_rights_msg_gray">\u83B7\u5F97\u5934\u8854&nbsp;</span><img class="user_rights_msg_img" src="/tb/static-frs/img/balv/lv_join.png">&nbsp;'+r.level_name+'<span class="user_rights_msg_gray">&nbsp;\u5347\u7EA7\u4EAB\u7279\u6743\uFF0C<span><a rel="noreferrer" class="user_rights_msg_link" target="_blank" href="/f/like/level?kw='+t.forum.name_url+'">\u67E5\u770B\u4F1A\u5458\u6743\u5229</a></div>':1==r.level_id?n+='<div class="user_rights_msg">\u83B7\u5F97\u5934\u8854&nbsp;<img class="user_rights_msg_img" src="/tb/static-frs/img/balv/lv_join.png">&nbsp;'+r.level_name+'\uFF0C\u5347\u7EA7\u4EAB\u7279\u6743\uFF0C<a rel="noreferrer" target="_blank" href="/f/like/level?kw='+t.forum.name_url+'">\u67E5\u770B\u5347\u7EA7\u79D8\u7C4D</a></div>':(n+='<div class="user_rights_msg">\u6839\u636E\u4F60\u5728\u672C\u5427\u7684\u6D3B\u8DC3\u8868\u73B0\uFF0C\u76F4\u63A5\u6388\u4E88<img src="//tb2.bdstatic.com/tb/static-member/img/badges/'+r.level_id+'.png">&nbsp;'+r.level_name+"\uFF0C\u7ED9\u529B\uFF01</div>",n+='<div class="userlike_tip_span">\u672C\u5427\u767E\u5B9D\u7BB1\u5BF9\u4F60\u5F00\u653E\u4E86\uFF0C<a rel="noreferrer" target="_blank" href="/imall/mall?kw='+t.forum.name_url+'">\u53BB\u767E\u5B9D\u7BB1\u770B\u770B\u6709\u54EA\u4E9B\u7279\u6743\u548C\u5B9D\u8D1D</a></div>'),this.isSuperMember()&&(n+=this.getSuperMemberHtml()),n+=this.like_forum_tmp,n+='<div class="lvlup_tip_btnzone">';var l="";return this.isSuperMember()&&(n+='<input class="userlike_supermember_btn userlike_sm_btn_style" type="button" value="\u8BE6\u7EC6\u4E86\u89E3\u7279\u6743"/>',l="userlike_sm_btn_style"),e&&(n+='<a rel="noreferrer" class="userlike_tip_cancel" target="_blank" href="/home/forum?id='+t.user.portrait+"&fr="+t.product+'">\u5982\u4F55\u53D6\u6D88\u4F1A\u5458</a>'),n+="</div></div>"},reloadAndGotop:function(){$.tb.location.setHref($.tb.location.getHref().split("#")[0])},getSuperMemberHtml:function(){var e=[],s=PageData.user?PageData.user.Parr_props?PageData.user.Parr_props.level?PageData.user.Parr_props.level:{}:{}:{},i=PageData.forum.name||PageData.forum.forum_name;return e.push('<div class="userlike_supermember">'),e.push('<div class="userlike_sm_up clearfix">'),e.push('<div class="userlike_sm_up_gift"></div>'),e.push('<div class="userlike_sm_up_info">'),e.push('<h3>\u5C0A\u8D35\u7684<span class="userlike_sm_up_icon">\u8D34\u5427\u8D85\u7EA7\u4F1A\u5458</span></h3>'),e.push("<h2>\u60A8\u5DF2\u6210\u529F\u83B7\u5F97<b>\u3010"+i+"\u5427\u7279\u6743\u5305\u3011</b></h2>"),e.push("<p>\u6709\u6548\u671F\u81F3"+this.getFormatZhTime(1e3*s.end_time)+"</p>"),e.push("</div>"),e.push("</div>"),e.push('<div class="userlike_sm_down clearfix">'),e.push('<div class="userlike_sm_down_item">'),e.push('<div class="userlike_sm_down_title">\u7EA2\u8272\u6807\u9898</div>'),e.push('<div class="userlike_sm_down_pic userlike_sm_down_pic_1"></div>'),e.push("</div>"),e.push('<div class="userlike_sm_down_item">'),e.push('<div class="userlike_sm_down_title">\u7ECF\u9A8C\u52A0\u901F</div>'),e.push('<div class="userlike_sm_down_pic userlike_sm_down_pic_2"></div>'),e.push("</div>"),e.push("</div>"),e.push("</div>"),e.join("")},isSuperMember:function(){var e=PageUnit.load("like_tip_svip_black_list");if(e)return!1;var s=PageData.user?PageData.user.Parr_props?PageData.user.Parr_props.level?PageData.user.Parr_props.level:{}:{}:{};return 1e3*s.end_time>1*new Date&&2===s.props_id&&!PageData.forum.is_star},getFormatZhTime:function(e){return"number"!=typeof e?"":(e=new Date(e),[e.getFullYear()+"\u5E74",parseInt(e.getMonth()+1)+"\u6708",e.getDate()+"\u65E5"].join(""))}}});_.Module.define({path:"pcommon/widget/RewardTip",sub:{_tpl:['<div class="reward_tip_dialog_wrapper">','<div class="reward_tip_dialog">','<div class="up">','<p class="status"><i class="icon_success"></i>\u53D1\u8868\u6210\u529F</p>','<p>\u4EB2~\u4E0B\u6B21\u8BB0\u5F97\u7528\u5BA2\u6237\u7AEF\u53D1\u8D34\uFF0C\u6709<span class="red_text">3\u500D</span>\u7ECF\u9A8C\u5462!</p>','<p>\u53D1\u8D34\u6210\u529F\uFF0C\u83B7\u53D6<span class="red_text">+1</span><i class="icon_tdou"></i></p>',"</div>",'<div class="down">','<% if (typeof rewards != "undefined") {%>','<p class="status">\u606D\u559C\u4F60\u83B7\u5F97\u4EE5\u4E0B\u5956\u52B1\uFF01</p>','<div class="rewards">','<span class="rewards_item" style="background: url(http://tb1.bdstatic.com/tb/cms/tbmall/reward/pc/icon/<%=rewards.props_id%>.png) no-repeat;">','<%=rewards.title%>*<span class="orange_text"><%=rewards.num%></span>',"</span>","<% if (rewards.props_id == 1210001) {%>",'<p class="tdou_tips">',"\u6CE8\u610F\uFF1A\u5F53\u6D3B\u8DC3T\u8C46\u8FBE\u52308000\u4E0A\u9650\u65F6\uFF0C\u4E0D\u80FD\u9886\u53D6\u5168\u90E8T\u8C46\u3002","</p>","<% } %>","</div>",'<div class="btn_wrapper">','<a href="javascript:;" class="j_rewards_get ui_btn ui_btn_s">',"<span><em>\u9886\u53D6\u5956\u52B1</em></span>","</a>",'<a href="javascript:;" class="j_rewards_giveup ui_btn ui_btn_sub_s">',"<span><em>\u653E\u5F03\u5956\u52B1</em></span>","</a>","</div>","<% } else { %>",'<p class="status">\u5F88\u9057\u61BE\uFF0C\u4EC0\u4E48\u90FD\u6CA1\u6709\u5F97\u5230\uFF0C\u7EE7\u7EED\u52AA\u529B\u5427\uFF01</p>','<div class="btn_wrapper">','<a href="javascript:;" class="j_rewards_refresh ui_btn ui_btn_s">',"<span><em>\u786E \u8BA4</em></span>","</a>","</div>","<% } %>","</div>","</div>","</div>"].join(""),_data:null,initial:function(a){this._data=a,this._buildDialog(),this.fire("rewardsSuccess"),a.rewards||(this._timer=setTimeout(function(){$.tb.location.reload()},3e3))},_getHtml:function(){var a=baidu.template,s=this._data;return a(this._tpl,s)},_buildDialog:function(){var a=this._getHtml();this._dialog=$(a).appendTo($(".editor_wrapper")),this._bindEvents()},_bindEvents:function(){var a=this;this._dialog.find(".j_rewards_get").one("click",function(){var s=PageData,i={tbs:s.tbs,forum_id:s.forum.forum_id,thread_id:s.thread.thread_id,reward_id:a._data.rewards.reward_id};$.tb.post("/tbmall/rthread/recieve",i,function(){$.tb.location.reload()})}),this._dialog.find(".j_rewards_giveup").one("click",function(){$.tb.location.reload()}),this._dialog.find(".j_rewards_refresh").one("click",function(){a._timer&&clearTimeout(a._timer),$.tb.location.reload()})}}});_.Module.define({path:"tbmall/widget/paykey_mobile",requires:[],sub:{_conf:{token:"",type:"bind"},initial:function(e){this._conf=$.extend(this._conf,e)},show:function(e,i,s,t){"check"===this._conf.type?this.showMobileCheck(e,i,s,t):this.showMobileBind(e,i,s,t)},showMobileCheck:function(e,i,s,t){var o=this,n="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime();PageData.user.setpass;var c=t||"\u4E3A\u4E86\u4FDD\u969C\u60A8\u7684\u8D22\u4EA7\u5B89\u5168\uFF0C\u8BF7\u9A8C\u8BC1\u5BC6\u4FDD\u624B\u673A\u540E\u8FDB\u884C\u652F\u4ED8\u3002";$.JsLoadManager.use(["//passport.baidu.com/passApi/js/uni_forceverify_wrapper.js?cdnversion="+Math.floor(n/6e4),"http://passport.bdimg.com/passApi/js/wrapper.js?cdnversion="+Math.floor(n/6e4)],function(){var t=passport.pop.initForceverify({token:o._conf.token,curType:"mobile",title:"\u6D88\u8D39\u9A8C\u8BC1\u5BC6\u4FDD\u624B\u673A",msg:c,onRender:function(){var e=$(this.getById("mask")),i=$(this.getById("wrapper"));e.css("zIndex",5e4+parseInt(e.css("zIndex"))),i.css("zIndex",5e4+parseInt(i.css("zIndex")))},onHide:function(){s=s||o,"function"==typeof i&&i.call(s,{})},onSendvcodeSuccess:function(){},onSubmitSuccess:function(){s=s||o,"function"==typeof e&&e.call(s,{mobile_check:1})}});t.show()},!0,"utf-8")},showMobileBind:function(e,i,s,t){var o=this;if(o.bindMobileDialog)return o.bindMobileDialog.show(),void 0;var n="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime();$.JsLoadManager.use(["//passport.baidu.com/passApi/js/uni_armorwidget_wrapper.js?cdnversion="+Math.floor(n/6e4),"http://passport.bdimg.com/passApi/js/wrapper.js?cdnversion="+Math.floor(n/6e4)],function(){var n=t||"\u7ED1\u5B9A\u624B\u673A\u662F\u76EE\u524D\u6700\u7B80\u5355\u6709\u6548\u964D\u4F4E\u8D26\u53F7\u88AB\u76D7\u98CE\u9669\u7684\u65B9\u6CD5~\u8BF7\u7ED1\u5B9A\u540E\u8FDB\u884C\u652F\u4ED8";o._conf.firstFlag&&(n="\u4E3A\u4FDD\u969C\u8D22\u4EA7\u5B89\u5168\uFF0C\u5EFA\u8BAE\u60A8\u7ED1\u5B9A\u624B\u673A\u540E\u8FDB\u884C\u6D88\u8D39\uFF0C\u82E5\u60F3\u6B8B\u5FCD\u7684\u62D2\u7EDD\u8BF7\u5173\u95ED\u6D6E\u5C42\u540E\u7EE7\u7EED\u6D88\u8D39\u3002"),o.bindMobileDialog=passport.pop.ArmorWidget("bindmobile",{token:o._conf.token,title:"\u5B89\u5168\u53CB\u60C5\u63D0\u793A",msg:n,auth_title:"\u6D88\u8D39\u9A8C\u8BC1\u5BC6\u4FDD\u624B\u673A",auth_msg:"\u60A8\u6B63\u5728\u8FDB\u884C\u652F\u4ED8\u5BC6\u7801\u8BBE\u7F6E\uFF0C\u4E3A\u4E86\u60A8\u7684\u8D26\u53F7\u5B89\u5168\uFF0C\u8BF7\u5148\u9A8C\u8BC1\u5BC6\u4FDD\u4FE1\u606F\u3002",onRender:function(){var e=$(this.getById("mask")),i=$(this.getById("wrapper"));e.css("zIndex",5e4+parseInt(e.css("zIndex"))),i.css("zIndex",5e4+parseInt(i.css("zIndex")))},onHide:function(){o.bindid||(s=s||o,"function"==typeof i&&i.call(s))},onSendvcodeSuccess:function(){},onSubmitSuccess:function(i){o.bindid=i.bindid,s=s||o;var t={bindid:o.bindid};o.showSetMobileCheck(t,e,s)}}),o.bindMobileDialog.show()},!0,"utf-8"),$.ajax({url:"/tbmall/pass/setAuthPhone",type:"post",data:{type:1,tbs:PageData.tbs}})},_setTpl:['<a class="dialogJclose j_set_mobile_check_dialogJclose" title="\u5173\u95ED\u672C\u7A97\u53E3">&nbsp;</a>','<div class="set_mobile_check_wrap" id="set_mobile_check_wrap">','<div class="set_mobile_check_msg">','<span class="set_mobile_check_icon"></span>','<span class="set_mobile_check_title">\u64CD\u4F5C\u6210\u529F</span>',"</div>","<p>\u4E3A\u4FDD\u969C\u8D26\u53F7T\u8C46\u5B89\u5168\uFF0C\u5EFA\u8BAE\u60A8\u9009\u62E9\u5F00\u542F\u624B\u673A\u9A8C\u8BC1\u529F\u80FD</p>",'<div class="set_mobile_check_operator">','<a href="#" class="set_mobile_check_select">','<input type="radio" class="j_set_mobile_check_ok set_mobile_check_radio" name="set_mobile_check_radio" checked/>\u5355\u7B14T\u8C46\u6D88\u8D39\u8D85\u8FC7100000\u5F00\u542F\u624B\u673A\u9A8C\u8BC1\u529F\u80FD',"</a>",'<a href="#" class="set_mobile_check_select">','<input type="radio" class="j_set_mobile_check_cancel set_mobile_check_radio" name="set_mobile_check_radio"/>\u4E0D\u5F00\u542F\u624B\u673A\u9A8C\u8BC1\u529F\u80FD',"</a>",'<a href="#" class="j_set_mobile_check_submit set_mobile_check_submit ui_btn ui_btn_m"><span><em>\u786E\u5B9A</em></span></a>',"</div>","</div>"].join(""),showSetMobileCheck:function(e,i,s){var t=this,o=new $.dialog({html:this._setTpl,showTitle:!1,height:260,width:420}),n=$(o.element);t.openCheck=1;var c=function(){$.ajax({url:"/tbmall/pass/setAuthPhone",type:"post",dataType:"json",data:{type:t.openCheck,tbs:PageData.tbs},success:function(e){0===e.no?setTimeout(function(){o.close()},1e3):$.dialog.alert("\u6D88\u8D39\u624B\u673A\u9A8C\u8BC1\u529F\u80FD\u8BBE\u7F6E\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")},error:function(){$.dialog.alert("\u6D88\u8D39\u624B\u673A\u9A8C\u8BC1\u529F\u80FD\u8BBE\u7F6E\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}})};n.find(".j_set_mobile_check_submit").click(function(){c()}),n.find(".j_set_mobile_check_ok").click(function(){t.openCheck=1}),n.find(".j_set_mobile_check_cancel").click(function(){t.openCheck=0}),n.find(".j_set_mobile_check_dialogJclose").click(function(){t.openCheck=1,c()}),o.onclose(function(){"function"==typeof i&&i.call(s,e)})}}});_.Module.define({path:"tbmall/widget/TbeanSafe",requires:["tbmall/component/captcha_payment","tbmall/widget/paykey_dialog","tbmall/widget/paykey_mobile"],sub:{ERROR:{},initial:function(t){this._initParam(t),this._handleErr()},needCheck:function(){return!!this.type},getType:function(){return this.type},_initParam:function(t){t=$.extend({json:{},sucCallback:function(){},errCallback:function(){}},t),this.type=0,this._json=t.json||{},this._no=this._json.no||this._json.errno,this._msg=this._json.msg,this._data=this._json.data||{},this._content=t.content,this._sucCall=$.isFunction(t.sucCallback)?t.sucCallback:function(){},this._errCall=$.isFunction(t.errCallback)?t.errCallback:function(){},this._mobileMsg="undefined"!=typeof t.tbeanOptions?t.tbeanOptions.mobileMsg:""},_handleErr:function(){switch(this._no){case 360007:case 2150040:this._initCaptcha(),this.type=1;break;case 2270018:case 1990005:case 2190005:this._initPaykey(2),this.type=2;break;case 2270066:this._initPaykey(1),this.type=2;break;case 2270040:this._initFirstMobile("bind"),this.type=3;break;case 2270041:this._initMobile("bind"),this.type=3;break;case 2270042:this._initMobile("check"),this.type=3;break;case 2270072:this._initFrozen(),this.type=4}},_initCaptcha:function(){var t=this.use("tbmall/component/captcha_payment",{data:this._json});t.showCaptcha(this._sucCall,this._content,this._errCall)},_initPaykey:function(t){var i=this.use("tbmall/widget/paykey_dialog",{showType:t,errType:this._no,errTime:this._data.wrongtime});i.showDialog(this._sucCall,this._errCall,this._content)},_initMobile:function(t){var i=this,e=this.use("tbmall/widget/paykey_mobile",{token:i._data.token,type:t});e.show(this._sucCall,this._errCall,this._content,this._mobileMsg)},_initFirstMobile:function(t){var i=this,e=this.use("tbmall/widget/paykey_mobile",{token:i._data.token,type:t,firstFlag:!0});e.show(this._sucCall,this._sucCall,this._content)},_FROZEN_TPL:['<div id="tdou_frozen_dialog" class="tdou_frozen_dialog clearfix">',"<p>\u60A8\u7684\u8D26\u53F7\u5904\u4E8E\u5F02\u5E38\u72B6\u6001\uFF0C\u6682\u65F6\u4E0D\u80FD\u6D88\u8D39T\u8C46\uFF0C\u7ED9\u60A8\u9020\u6210\u7684\u4E0D\u4FBF\u656C\u8BF7\u8C05\u89E3\u3002</p>",'<div class="tdou_frozen_btn_area clearfix">','<a href="#" target="_blank" class="tdou_frozen_accept_btn tdou_frozen_btn" id="tdou_frozen_accept_btn">\u786E\u5B9A</a>','<a href="#" class="tdou_frozen_cancel_btn tdou_frozen_btn" id="tdou_frozen_cancel_btn">\u53D6\u6D88</a>',"</div>","</div>"].join(""),_initFrozen:function(){var t=this,i=new $.dialog({html:t._FROZEN_TPL,title:"T\u8C46\u51BB\u7ED3\u63D0\u793A"});$(i.element).find(".tdou_frozen_btn").click(function(t){t.preventDefault(),i.close()}),i.onclose(function(){"function"==typeof t._errCall&&t._errCall()})}}});_.Module.define({path:"pcommon/widget/ParamsXssHandler",requires:[],sub:{_escapeKeyArray:["title","prefix","kw","word"],initial:function(e){e&&e.escapeKeyArray&&e.escapeKeyArray.length>0&&(this._escapeKeyArray=e.escapeKeyArray)},xssFilter:function(e){var r=$.extend({},e),a=$.tb.escapeHTML,s=this._escapeKeyArray;return $.each(s,function(i){var t=s[i],n=e[t];void 0!==n&&(r[t]=a(n))}),r}}});_.Module.define({path:"pcommon/widget/JiyanService",requires:["Captcha_Gt"],sub:{initial:function(){this.geeTest=this.requireInstance("Captcha_Gt");var e=this;$.ajax({url:"/f/commit/commonapi/antiGetCaptchaNew?t="+(new Date).getTime(),type:"get",dataType:"json",success:function(t){e.geetest_success=+t.success,1===e.geetest_success?initGeetest({gt:t.gt,challenge:t.challenge,offline:!t.success,new_captcha:t.new_captcha,product:"bind"},function(t){t.onReady(function(){e.jiyanCaptcha=t,e.trigger("validate_ready")}).onClose(function(){e.trigger("validate_close")}).onSuccess(function(){e.trigger("validate_success")}).onError(function(t){e.trigger("validate_error",t.code)})}):e.trigger("validate_init_error")},error:function(t){e.trigger("validate_ajax_error",t)}})},getJiyanChallenge:function(){for(var e=$('head script[src*="api.geetest.com"]').filter('[src*="challenge"]').last().attr("src").split("&"),t=0;t<e.length;t++)if(-1!=e[t].indexOf("challenge"))return e[t].split("=")[1]},onValidateReady:function(e){return this.unbind("validate_ready"),this.bind("validate_ready",e),this},onValidateClose:function(e){return this.unbind("validate_close"),this.bind("validate_close",e),this},onValidateSuccess:function(e){return this.unbind("validate_success"),this.bind("validate_success",e),this},onValidateError:function(e){return this.unbind("validate_error"),this.bind("validate_error",e),this},onValidateInitError:function(e){return this.unbind("validate_init_error"),this.bind("validate_init_error",e),this},onValidateAjaxError:function(e){return this.unbind("validate_ajax_error"),this.bind("validate_ajax_error",e),this}}});_.Module.define({path:"pcommon/widget/PostService/PostResultHandlerManager",requires:[],sub:{initial:function(){this.isBlock=PageData&&PageData.user&&PageData.user.is_block,this.isBlockBySys=this.isBlock&&PageData.user.balv&&PageData.user.balv.is_by_pm,this._initHandlerMap()},_initHandlerMap:function(){function e(e,t){var a=this;_.Module.use("pcommon/component/CaptchaDialog",{message:e.data.vcode.str_reason,vCode:e.data.vcode.captcha_vcode_str,vCodeType:e.data.vcode.captcha_code_type,exceptionalAccount:1==e.data.vcode.userstatevcode,forumName:t.kw,forumId:t.fid,postType:t.__type__,paramsCallback:function(){return{content:t.content,title:t.title,tid:t.tid}}},function(e){e.bind("onclose",function(){return e.hide(),a.trigger("complete"),!1}),e.bind("onaccept",function(){t.vcode=e.getInputValue(),t.vcode_md5=e.getVCode(),a.trigger("retry",t)}),e.show()})}function t(e){var t=this,a="";switch(e.data.access_state.type){case"email":a="\u5E10\u53F7\u5B89\u5168\u9A8C\u8BC1\uFF08\u90AE\u7BB1)";break;case"mobile":a="\u5E10\u53F7\u5B89\u5168\u9A8C\u8BC1\uFF08\u624B\u673A\uFF09";break;case"bindmobile":a="\u5E10\u53F7\u5B89\u5168\u7ED1\u5B9A\uFF08\u624B\u673A\uFF09"}if("bindmobile"!==e.data.access_state.type){var r=passport.pop.initForceverify({token:e.data.access_state.token,curType:e.data.access_state.type,title:a,msg:"\u60A8\u7684\u5E10\u53F7\u7591\u4F3C\u88AB\u76D7,\u9A8C\u8BC1\u5BC6\u4FDD\u540E\u7EE7\u7EED",onRender:function(){},onHide:function(){t.trigger("complete")},onSendvcodeSuccess:function(){},onGetapiError:function(){$.ajax("/f/commit/commonapi/checkUserInfoCallback",{data:{action:"reset"},success:function(){t.trigger("complete")}})},onSubmitSuccess:function(){$.ajax("/f/commit/commonapi/checkUserInfoCallback",{success:function(){t.trigger("complete")}})},onInitFail:function(){t.trigger("complete"),$.ajax("/f/commit/commonapi/checkUserInfoCallback",{data:{action:"reset"},success:function(){t.trigger("complete")}})}});r.show()}else{var i=passport.pop.ArmorWidget("bindmobile",{token:e.data.access_state.token,title:a,msg:"\u60A8\u7684\u5E10\u53F7\u7591\u4F3C\u88AB\u76D7,\u7ED1\u5B9A\u5BC6\u4FDD\u540E\u7EE7\u7EED",auth_title:"\u7ED1\u5B9A\u624B\u673A",auth_msg:"\u8BF7\u5148\u7ED1\u5B9A\u624B\u673A",onSubmitSuccess:function(e){$.ajax("/f/commit/commonapi/checkUserInfoCallback",{data:{bindid:e.bindid},success:function(){t.trigger("complete")}})},onSubmitFail:function(){t.trigger("complete")},onHide:function(){t.trigger("complete")},onInitFail:function(){$.ajax("/f/commit/commonapi/checkUserInfoCallback",{data:{action:"reset"},success:function(){t.trigger("complete")}})}});i.show()}}function a(){var e=this,t=d.messageMap[224010];null==t&&(t="\u672A\u77E5\u9519\u8BEF");$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:t,buttons:[{text:"\u7ED1\u5B9A\u624B\u673A",callback:function(){var t=$.tb.location,a=t.getHost()+t.getPathname()+t.getSearch(),r="http://passport.baidu.com/v2/?accountbindphone&tpl=tb&u="+encodeURIComponent(a+"#sub");e.trigger("complete"),$.tb.location.setHref(r)}}]});this.trigger("error")}function r(e){var t=this,a=d.auditMessageMap[e.bdauditreason];null==a&&(a=d.auditMessageMap["default"]);$.tb.alert({iconSrc:"http://static.tieba.baidu.com/tb/img/messageFace.gif",title:"\u7B49\u5F85\u5BA1\u6838",heading:"\u7B49\u5F85\u5BA1\u6838...",message:a,buttons:{text:"\u786E\u5B9A",callback:function(){t.trigger("complete"),$.tb.location.reload()}}});this.trigger("error")}function i(){{var e=this;$.tb.alert({iconSrc:"http://static.tieba.baidu.com/tb/img/errorFace.gif",title:"\u53D1\u8D34\u5931\u8D25",heading:"\u53D1\u8D34\u5931\u8D25",message:g,buttons:{text:"\u786E\u5B9A",callback:function(){e.trigger("complete")}}})}this.trigger("error")}function o(e,t){{var a=this,r=function(){$.tb.alert({title:"T\u8C46\u5145\u503C",message:"\u6211\u5DF2\u6210\u529F\u5145\u503CT\u8C46",holderClassName:"tdou_notenough_dialog",buttons:{text:"\u91CD\u65B0\u53D1\u8868",callback:function(){a.trigger("retry",t)}}})};$.tb.alert({title:"T\u8C46\u4F59\u989D\u4E0D\u8DB3",message:"\u60A8\u7684T\u8C46\u4F59\u989D\u4E0D\u8DB3\uFF0C\u53D1\u8868\u8D34\u5B50\u5931\u8D25\uFF0C\u8BF7\u5145\u503C\u540E\u91CD\u8BD5",holderClassName:"tdou_notenough_dialog",onclose:function(){a.trigger("complete")},buttons:{text:"\u5145\u503CT\u8C46",callback:function(){_.Module.use("pcommon/widget/tcharge_dialog"),a.trigger("complete"),r()}}})}}function n(){{var e=this;$.tb.alert({title:"\u63D0\u793A\u4FE1\u606F",message:"<p>\u4EB2\uFF0C\u60A8\u53CD\u9988\u7684\u95EE\u9898\u53EF\u80FD\u4E0E\u5220\u5E16\u6216\u5C01\u7981\u6709\u5173\u3002</p>\u8BF7\u786E\u8BA4\u53CD\u9988\u5185\u5BB9\u4E2D\u5305\u542B<strong>\u88AB\u5C01\u8D26\u53F7</strong>\u3001<strong>\u88AB\u5220\u5E16\u94FE\u63A5</strong>\u3001<strong>\u9875\u9762\u622A\u56FE</strong>\uFF0C\u4EE5\u4FBF\u4E8E\u6211\u4EEC\u66F4\u5FEB\u5E2E\u60A8\u89E3\u51B3\u95EE\u9898\u54E6~",holderClassName:"ueg_confirm_note_dialog",onclose:function(){e.trigger("complete")},buttons:[{text:"\u786E\u8BA4\u53D1\u8868",callback:function(){e.trigger("complete"),e.trigger("retryPost")}},{text:"\u6211\u518D\u6539\u6539",callback:function(){e.trigger("complete")}}]})}e.trigger("uegPostParameter")}function s(){{var e=this;$.tb.alert({title:"\u63D0\u793A\u4FE1\u606F",message:"<p>\u7EBF\u8DEF\u5347\u7EA7\u6539\u9020\uFF0C\u6682\u65F6\u65E0\u6CD5\u53D1\u8D34\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\uFF0C\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\u8868\u793A\u62B1\u6B49~</p>",holderClassName:"ueg_confirm_note_dialog",onclose:function(){e.trigger("complete")},buttons:[{text:"\u5173\u95ED",callback:function(){e.trigger("complete")}}]})}}function c(e,t){{var a=this;a.use("tbmall/widget/TbeanSafe",{json:e,sucCallback:function(e){var r=$.extend(t,e);a.trigger("retry",r)},errCallback:function(){a.trigger("complete")},content:a})}}var l=document.createElement("script");l.src="http://passport.baidu.com/passApi/js/uni_armorwidget_wrapper.js",document.getElementsByTagName("head")[0].appendChild(l);var g,d=this;_.Module.use("ueglibs/widget/Ban",[void 0,void 0,void 0,void 0,void 0,void 0,!0],function(e){g=e.render("richPoster")}),this.registerHandler(0,function(e,t){var a=this;"reply"==t.__type__&&1==t.rewards?a.use("pcommon/widget/RewardTip",e.data):"thread"==t.__type__&&e.data.balv&&e.data.balv.member_status?($.stats.sendRequest("fr=tb0_forum&st_page=frs&st_mod=like&st_type=thread"),a.use("ucenter/widget/LikeTip","\u53D1\u8D34\u6210\u529F",!1,{index:e.data.balv.member_index})):t.file_id?$.tb.alert({iconSrc:"http://tb1.bdstatic.com/tb/img/messageFace.gif",title:"\u53D1\u8868\u8D34\u5B50",heading:"\u89C6\u9891\u8F6C\u7801\u4E2D",message:"\u7A0D\u540E\u8F6C\u7801\u5B8C\u6210\u540E\u8D34\u5B50\u5C06\u81EA\u52A8\u53D1\u8868\u3002\u8BF7\u8010\u5FC3\u7B49\u5F85\uFF0C\u8C22\u8C22",buttons:[{text:"\u786E\u5B9A",callback:function(){a.trigger("complete"),a.trigger("success")}}]}):a.trigger("success",e)}),this.registerHandler(224011,e),this.registerHandler(40,e),this.registerHandler(227001,t),this.registerHandler(224010,a),this.registerHandler(4010,a),this.registerHandler(220009,r),this.registerHandler(9,r),this.registerHandler(12,i),this.registerHandler(220012,i),this.registerHandler(2270005,o),this.registerHandler(220902,n),this.registerHandler(220903,s),this.registerHandler(360007,c),this.registerHandler(2150040,c),this.registerHandler(2270018,c),this.registerHandler(1990005,c),this.registerHandler(2190005,c),this.registerHandler(2270043,c),this.registerHandler(2270040,c),this.registerHandler(2270041,c),this.registerHandler(2270042,c)},registerHandler:function(e,t){this.handlerMap[e]=t},getHandler:function(e,t){var a=this,r=a.handlerMap[e];if(null==r){var i=a.messageMap[e];null==i&&(i="\u672A\u77E5\u9519\u8BEF\uFF0C\u9519\u8BEF\u53F7\uFF1A"+e),r=function(){var e=this,a=$.tb.alert({iconSrc:"http://static.tieba.baidu.com/tb/img/errorFace.gif",title:"\u53D1\u8D34\u5931\u8D25",heading:"\u53D1\u8D34\u5931\u8D25",message:$.tb.format(i,{error:t}),buttons:{text:"\u786E\u5B9A",callback:function(){e.trigger("complete")}}});a.onclose(function(){e.trigger("complete")}),this.trigger("error")}}return r},messageMap:{220001:"\u53C2\u6570\u9519\u8BEF",220008:"\u5148\u53D1\u540E\u5BA1",220009:"",220011:"\u8D34\u5B50\u6807\u9898\u548C\u5185\u5BB9\u592A\u957F",220013:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u60A8\u7684\u7F51\u7EDC\u5730\u5740\u7531\u4E8E\u975E\u6CD5\u64CD\u4F5C\u88AB\u5C01<br/><a href='/upc/userinfo?fid=fid' target=\"_blank\">\u67E5\u770B\u5C01\u7981\u4FE1\u606F</a>",220015:"\u8BF7\u4E0D\u8981\u53D1\u8868\u542B\u6709\u4E0D\u9002\u5F53\u5185\u5BB9\u7684\u7559\u8A00<br>\u8BF7\u4E0D\u8981\u53D1\u8868\u5E7F\u544A\u8D34",220034:"\u60A8\u8BF4\u8BDD\u592A\u5FEB\u4E86:) \u8BF7\u5148\u505C\u4E0B\u6765\u559D\u676F\u8336\u5427\uFF0C\u6216\u8005\u53EF\u4EE5\u53BB\u522B\u7684\u5427\u770B\u770B\u54E6\uFF0C\u4E00\u5B9A\u4F1A\u53D1\u73B0\u8FD8\u6709\u60A8\u611F\u5174\u8DA3\u7684\u8BDD\u9898",220035:"\u4EB2\uFF0C\u5DF2@\u4E0D\u5C11\u4EBA\u4E86\uFF0C\u4EE5\u514D\u6253\u6405\u66F4\u591A\u4EBA\uFF0C\u6B47\u4E00\u4F1A\u5427~",220037:"\u60A8\u5DF2\u5C1D\u8BD5\u63D0\u4EA4\u591A\u6B21\u4E86\uFF0C\u8BF7\u8FD4\u56DE\u540E\u5237\u65B0\u9875\u9762\uFF0C\u65B9\u53EF\u91CD\u65B0\u53D1\u8D34",220038:"\u9A8C\u8BC1\u7801\u8D85\u65F6\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",220040:"\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF\uFF0C\u8BF7\u60A8\u8FD4\u56DE\u540E\u91CD\u65B0\u8F93\u5165",220119:"\u5BF9\u4E0D\u8D77\uFF0C\u672C\u4E3B\u9898\u7684\u56DE\u590D\u6570\u5DF2\u7ECF\u8FBE\u5230\u4E0A\u9650\uFF0C\u611F\u8C22\u60A8\u7684\u53C2\u4E0E\uFF0C\u6B22\u8FCE\u60A8\u6D4F\u89C8\u672C\u5427\u7684\u5176\u5B83\u4E3B\u9898",220901:"",224009:"\u8D34\u5B50\u5DF2\u88AB\u9501\u5B9A\uFF0C\u65E0\u6CD5\u8FDB\u884C\u8BE5\u64CD\u4F5C",224010:"\u60A8\u7684\u8D26\u53F7\u5B58\u5728\u5B89\u5168\u98CE\u9669\u6682\u4E0D\u80FD\u53D1\u8D34\uFF0C\u8BF7\u5148\u8FDB\u884C\u624B\u673A\u7ED1\u5B9A\u540E\u518D\u53D1\u8D34\u5427\u3002",230004:"\u60A8\u672A\u767B\u5F55\u6216\u5DF2\u9000\u51FA\u767B\u5F55\u72B6\u6001\uFF0C\u8BF7\u5148\u767B\u5F55\u518D\u8FDB\u884C\u64CD\u4F5C\u3002",230008:"\u60A8\u7684\u5185\u5BB9\u5DF2\u63D0\u4EA4\u6210\u529F\uFF0C\u6B63\u5728\u8FDB\u884C\u5BA1\u6838\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u3002",230013:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u60A8\u7684\u5E10\u53F7\u56E0\u8FDD\u89C4\u64CD\u4F5C\u800C\u88AB\u5C01\u7981",230020:"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u7684\u6807\u9898\u6216\u6B63\u6587\u5305\u542B\u592A\u5C11\u7684\u6587\u5B57\uFF0C\u8BF7\u4FEE\u6539\u540E\u518D\u53D1\u8868",230044:"\u5EFA\u5427\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u5C1D\u8BD5",230045:"\u62B1\u6B49\uFF0C\u60A8\u63D0\u4EA4\u7684\u8D34\u5427\u540D\u79F0\u542B\u7279\u6B8A\u5B57\u7B26\uFF0C\u76EE\u524D\u65E0\u6CD5\u521B\u5EFA\uFF0C\u63A8\u8350\u60A8\u4F7F\u7528\u6C49\u5B57\u3001\u5B57\u6BCD\u6216\u6570\u5B57\u4F5C\u4E3A\u8D34\u5427\u540D\u79F0",230046:"\u62B1\u6B49\uFF0C\u60A8\u7684\u8D34\u5B50\u8FC7\u957F\uFF0C\u65E0\u6CD5\u6B63\u5E38\u63D0\u4EA4\u3002\u5EFA\u8BAE\u60A8\u7CBE\u7B80\u6216\u5206\u6BB5\u540E\u91CD\u65B0\u63D0\u4EA4\uFF0C\u8C22\u8C22!",230265:"\u60A8\u672A\u767B\u5F55\u6216\u5DF2\u9000\u51FA\u767B\u5F55\u72B6\u6001\uFF0C\u8BF7\u5148\u767B\u5F55\u518D\u8FDB\u884C\u64CD\u4F5C\u3002",230273:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BE5\u5E16\u5B50\u5DF2\u4E0D\u5B58\u5728",230277:"\u60A8\u5DF2\u88AB #{error} \u7981\u8A00\u3002\u5728\u6B64\u671F\u95F4\u5185\uFF0C\u4E0D\u53EF\u56DE\u590D\u6216@ #{error}\u3002",230278:"\u60A8\u5DF2\u88AB #{error} \u7981\u8A00\u3002\u5728\u6B64\u671F\u95F4\u5185\uFF0C\u4E0D\u53EF\u56DE\u590D\u6216@ #{error}\u3002",238008:"#{error}",230308:"\u62B1\u6B49\uFF0C\u60A8\u6CA1\u6709\u6743\u9650\u8FDB\u884C\u8BE5\u9879\u64CD\u4F5C\u3002",230705:"\u672C\u5427\u5F53\u524D\u53EA\u80FD\u6D4F\u89C8\uFF0C\u4E0D\u80FD\u53D1\u8D34\uFF01",230808:"\u62B1\u6B49\uFF0C\u6BCF\u5C42\u697C\u63D2\u5165\u7684\u89C6\u9891\u4E0D\u80FD\u8D85\u8FC71\u4E2A\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4",230809:"\u62B1\u6B49\uFF0C\u6BCF\u5C42\u697C\u63D2\u5165\u7684\u56FE\u7247\u4E0D\u80FD\u8D85\u8FC710\u5F20\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4",230814:"\u62B1\u6B49\uFF0C\u6BCF\u5C42\u697C\u63D2\u5165\u7684\u8868\u60C5\u4E0D\u80FD\u8D85\u8FC710\u5F20\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4",230815:"\u62B1\u6B49\uFF0C\u6BCF\u5C42\u697C\u63D2\u5165\u7684\u97F3\u4E50\u4E0D\u80FD\u8D85\u8FC710\u4E2A\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4",230850:"\u5427\u540D\u5DF2\u5B58\u5728\uFF0C\u8BF7\u52FF\u91CD\u590D\u521B\u5EFA",230870:"\u672C\u5E16\u5B50\u56DE\u590D\u8F83\u591A\uFF0C\u4E0D\u652F\u6301\u5220\u9664",230871:"\u53D1\u8D34\u592A\u9891\u7E41\uFF0C\u505C\u4E0B\u6765\u559D\u676F\u8336\u4F11\u606F\u4E0B\u5427",230887:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u5C1D\u8BD5",230889:"\u60A8\u5DF2\u88AB\u52A0\u5165\u5C0F\u9ED1\u5C4B\uFF0C\u65E0\u6CD5\u8FDB\u884C\u8BE5\u64CD\u4F5C\u3002",230900:"\u4E3A\u62B5\u5FA1\u6316\u575F\u5371\u5BB3\uFF0C\u672C\u5427\u5427\u4E3B\u5DF2\u653E\u51FA\u8D34\u5427\u795E\u517D--\u8D85\u7EA7\u9759\u6B62\u86D9\uFF0C\u672C\u8D34\u6682\u65F6\u65E0\u6CD5\u56DE\u590D\u3002",230901:"\u8BE5\u697C\u56DE\u590D\u5DF2\u8FBE\u4E0A\u9650\uFF0C\u8BF7\u5230\u522B\u7684\u697C\u5C42\u53C2\u4E0E\u4E92\u52A8\u5427",230902:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u8FC7\u957F\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",230903:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",230961:"\u53D1\u8D34\u5931\u8D25\uFF0C\u60A8\u8F93\u5165\u7684\u56FE\u7247\u5730\u5740\u6709\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u66F4\u6B63\u540E\u518D\u6B21\u53D1\u5E03\uFF1A\uFF09",230962:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",230963:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",231120:"\u62B1\u6B49\uFF0C\u60A8\u8F93\u5165\u7684\u56FE\u7247\u3001\u89C6\u9891\u94FE\u63A5\u5730\u5740\u9519\u8BEF\uFF0C\u60A8\u53EF\u4EE5\u70B9\u51FB<a href='http://www.baidu.com/search/post_img.html' target='_blank'>\u67E5\u770B\u76F8\u5173\u5E2E\u52A9</a>\u6216\u8FD4\u56DE\u4FEE\u6539",232e3:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",232001:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",232007:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",232101:"\u60A8\u8F93\u5165\u7684\u5185\u5BB9\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u65B0\u63D0\u4EA4\u3002",233001:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233003:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233004:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233005:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233006:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233007:"\u53D1\u8868\u5931\u8D25\u4E86\uFF0C\u8BF7\u91CD\u65B0\u518D\u8BD5\u3002",233010:"\u672C\u5427\u4EC5\u5141\u8BB8\u5B98\u65B9\u7C89\u4E1D\u56E2\u6210\u5458\u56DE\u590D\u54E6\uFF0C\u8D76\u5FEB\u52A0\u5165\u5427\uFF01",220903:"\u7EBF\u8DEF\u5347\u7EA7\u6539\u9020\uFF0C\u6682\u65F6\u65E0\u6CD5\u53D1\u8D34\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\uFF0C\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\u8868\u793A\u62B1\u6B49~",234031:"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\u3002",235004:"\u4F7F\u7528\u9053\u5177\u9519\u8BEF\uFF0C\u8BE5\u9053\u5177\u8981\u8D2D\u4E70\u540E\u624D\u80FD\u4F7F\u7528\u3002",235005:"\u65E0\u6743\u9650\u4F7F\u7528\u8BE5\u9053\u5177\uFF0C\u8BF7\u53BB\u8D2D\u4E70\u3002",236001:"\u8BE5\u8D34\u4E3A\u8D34\u5427\u624B\u673AApp\u76F4\u64AD\u8D34\uFF0C\u76EE\u524D\u6682\u65F6\u4E0D\u652F\u6301\u975E\u697C\u4E3B\u4E4B\u5916\u7684\u7528\u6237\u5360\u697C\uFF0C\u4F46\u4F60\u53EF\u4EE5\u5728\u697C\u4E2D\u697C\u56DE\u590D\u54E6\uFF01",239e3:"\u60A8\u8FD8\u6CA1\u6709\u7528\u6237\u540D\uFF0C\u4E0D\u80FD\u5728\u672C\u5427\u53D1\u8D34\u3002\u8BF7\u5148\u586B\u5199\u7528\u6237\u540D\u3002",239001:"\u7531\u4E8E\u533F\u540D\u72B6\u6001\u6216\u672C\u5427\u8BBE\u7F6E\uFF0C\u65E0\u6CD5\u53D1\u8868\u5E26\u6709\u56FE\u7247\u7684\u4E3B\u9898\u3002",2270028:"\u9644\u52A0\u5956\u54C1\u7684\u989D\u5EA6\u4E0D\u80FD\u5C11\u4E8E10000T\u8C46",2270029:"\u4E3B\u9898\u53D1\u9001\u6210\u529F\uFF0C\u5956\u52B1\u6DFB\u52A0\u5931\u8D25",2270018:"\u62B1\u6B49\uFF0C\u60A8\u6CA1\u6709\u6743\u9650\u53D1\u5956\u52B1\u8D34",2270027:"\u611F\u8A00\u8BF7\u63A7\u5236\u5728140\u4E2A\u5B57\u4E4B\u5185",250123:"\u56FE\u7247\u5C3A\u5BF8\u8D85\u9650\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u8BD5",10:"\u8D34\u5B50\u5185\u5BB9\u5305\u542B\u592A\u5C11\u7684\u6587\u5B57",11:"\u8D34\u5B50\u6807\u9898\u548C\u5185\u5BB9\u592A\u957F",13:"\u64CD\u4F5C\u5931\u8D25\uFF0C\u60A8\u7684\u7F51\u7EDC\u5730\u5740\u7531\u4E8E\u975E\u6CD5\u64CD\u4F5C\u88AB\u5C01<br/><a href='/upc/userinfo?fid=fid' target=\"_blank\">\u67E5\u770B\u5C01\u7981\u4FE1\u606F</a>",14:"\u60A8\u53D1\u5E03\u7684\u8D34\u5B50\u5DF2\u7ECF\u5B58\u5728",15:"\u8BF7\u4E0D\u8981\u53D1\u8868\u542B\u6709\u4E0D\u9002\u5F53\u5185\u5BB9\u7684\u7559\u8A00<br>\u8BF7\u4E0D\u8981\u53D1\u8868\u5E7F\u544A\u8D34",501:"\u8BF7\u4E0D\u8981\u53D1\u8868\u542B\u6709\u4E0D\u9002\u5F53\u5185\u5BB9\u7684\u7559\u8A00<br>\u8BF7\u4E0D\u8981\u53D1\u8868\u5E7F\u544A\u8D34",16:"\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6240\u8F93\u5165\u7684\u8D34\u5427\u4E0D\u5B58\u5728\u3002\u7531\u4E8E\u7CFB\u7EDF\u5347\u7EA7\u7EF4\u62A4\uFF0C\u65B0\u5EFA\u8D34\u5427\u529F\u80FD\u6682\u505C\uFF0C\u5E0C\u671B\u5F97\u5230\u60A8\u7684\u8C05\u89E3\uFF01",17:"\u672C\u5427\u5F53\u524D\u53EA\u80FD\u6D4F\u89C8\uFF0C\u4E0D\u80FD\u53D1\u8D34\uFF01",19:"\u60A8\u7684\u7528\u6237\u540D\u6216\u8005\u5BC6\u7801\u586B\u5199\u6709\u8BEF\uFF0C\u8BF7\u786E\u8BA4\u540E\u518D\u53D1\u8868",200:"\u60A8\u7684\u7528\u6237\u540D\u6216\u8005\u5BC6\u7801\u586B\u5199\u6709\u8BEF\uFF0C\u8BF7\u786E\u8BA4\u540E\u518D\u53D1\u8868",201:"\u60A8\u7684\u7528\u6237\u540D\u6216\u8005\u5BC6\u7801\u586B\u5199\u6709\u8BEF\uFF0C\u8BF7\u786E\u8BA4\u540E\u518D\u53D1\u8868",202:"\u60A8\u7684\u7528\u6237\u540D\u6216\u8005\u5BC6\u7801\u586B\u5199\u6709\u8BEF\uFF0C\u8BF7\u786E\u8BA4\u540E\u518D\u53D1\u8868",20:"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u7684\u6807\u9898\u6216\u6B63\u6587\u5305\u542B\u592A\u5C11\u7684\u6587\u5B57\uFF0C\u8BF7\u4FEE\u6539\u540E\u518D\u53D1\u8868",22:"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u7531\u4E8E\u7279\u6B8A\u539F\u56E0\u6211\u4EEC\u9700\u8981\u6838\u5B9E\u8BE5\u8D34\u5185\u5BB9\u662F\u5426\u542B\u6709\u4E0D\u826F\u4FE1\u606F\uFF0C\u6211\u4EEC\u4F1A\u572810\u5206\u949F\u5185\u786E\u8BA4\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85\uFF01",23:"\u60A8\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u9700\u8981\u7CFB\u7EDF\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u5EFA\u7ACB\u8D34\u5427",33:"\u60A8\u53D1\u8D34\u592A\u5FEB\u4E86:) \u8BF7\u7A0D\u540E\u518D\u53D1",34:"\u60A8\u8BF4\u8BDD\u592A\u5FEB\u4E86:) \u8BF7\u5148\u505C\u4E0B\u6765\u559D\u676F\u8336\u5427\uFF0C\u6216\u8005\u53EF\u4EE5\u53BB\u522B\u7684\u5427\u770B\u770B\u54E6\uFF0C\u4E00\u5B9A\u4F1A\u53D1\u73B0\u8FD8\u6709\u60A8\u611F\u5174\u8DA3\u7684\u8BDD\u9898",35:"\u4EB2\uFF0C\u5DF2@\u4E0D\u5C11\u4EBA\u4E86\uFF0C\u4EE5\u514D\u6253\u6405\u66F4\u591A\u4EBA\uFF0C\u6B47\u4E00\u4F1A\u5427~",36:"\u8BF7\u4E0D\u8981\u53D1\u5E7F\u544A\u8D34\uFF01",37:"\u60A8\u5DF2\u5C1D\u8BD5\u63D0\u4EA4\u591A\u6B21\u4E86\uFF0C\u8BF7\u8FD4\u56DE\u540E\u5237\u65B0\u9875\u9762\uFF0C\u65B9\u53EF\u91CD\u65B0\u53D1\u8D34",38:"\u9A8C\u8BC1\u7801\u8D85\u65F6\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",39:"\u7531\u4E8E\u60A8\u591A\u6B21\u8F93\u9519\u9A8C\u8BC1\u7801\uFF0C\u8BF7\u60A8\u8FD4\u56DE\u540E\u5237\u65B0\u9875\u9762\uFF0C\u65B9\u53EF\u91CD\u65B0\u53D1\u8D34",40:"\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF\uFF0C\u8BF7\u60A8\u8FD4\u56DE\u540E\u91CD\u65B0\u8F93\u5165",41:"\u60A8\u7684\u8D34\u5B50\u53EF\u80FD\u5305\u542B\u4E0D\u5408\u9002\u7684\u5185\u5BB9\uFF0C\u8BF7\u60A8\u786E\u5B9A\u540E\u518D\u63D0\u4EA4",42:"\u60A8\u7684\u53D1\u8D34\u884C\u4E3A\u88AB\u7CFB\u7EDF\u8BA4\u4E3A\u6709\u53D1\u5E7F\u544A\u5ACC\u7591\uFF0C\u8BF7\u60A8\u7A0D\u540E\u518D\u53D1",43:"\u60A8\u7684\u53D1\u8D34\u884C\u4E3A\u6216\u8D34\u5B50\u5185\u5BB9\u6709\u5E7F\u544A\u6216\u4E0D\u5408\u9002\u7684\u7279\u5F81\uFF0C\u8BF7\u60A8\u786E\u5B9A\u540E\u518D\u53D1\u9001",44:"\u5BF9\u4E0D\u8D77\uFF0C\u672C\u5427\u6682\u65F6\u9650\u5236\u90E8\u5206\u7528\u6237\u53D1\u8868\u4E3B\u9898\u8D34\u5B50\uFF0C\u60A8\u53EF\u4EE5\u6D4F\u89C8\u6216\u56DE\u590D\u672C\u5427\u5176\u5B83\u5185\u5BB9\uFF0C\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\u5E0C\u671B\u5F97\u5230\u60A8\u7684\u8C05\u89E3\u3002",119:"\u5BF9\u4E0D\u8D77\uFF0C\u672C\u4E3B\u9898\u7684\u56DE\u590D\u6570\u5DF2\u7ECF\u8FBE\u5230\u4E0A\u9650\uFF0C\u611F\u8C22\u60A8\u7684\u53C2\u4E0E\uFF0C\u6B22\u8FCE\u60A8\u6D4F\u89C8\u672C\u5427\u7684\u5176\u5B83\u4E3B\u9898",1120:"\u62B1\u6B49\uFF0C\u60A8\u8F93\u5165\u7684\u56FE\u7247\u3001\u89C6\u9891\u94FE\u63A5\u5730\u5740\u9519\u8BEF\uFF0C\u60A8\u53EF\u4EE5\u70B9\u51FB<a href='http://www.baidu.com/search/post_img.html' target='_blank'>\u67E5\u770B\u76F8\u5173\u5E2E\u52A9</a>\u6216\u8FD4\u56DE\u4FEE\u6539",1121:"\u62B1\u6B49\uFF0C\u89C6\u9891\u670D\u52A1\u5347\u7EA7\u4E2D\uFF0C\u60A8\u6682\u65F6\u65E0\u6CD5\u53D1\u8868\u5E26\u6709\u89C6\u9891\u7684\u8D34\u5B50\uFF0C\u7ED9\u60A8\u5E26\u6765\u7684\u4E0D\u4FBF\u8BF7\u539F\u8C05",100:"\u5BF9\u4E0D\u8D77\uFF0C\u672C\u5427\u6682\u65F6\u9650\u5236\u90E8\u5206\u7528\u6237\u4F7F\u7528\u5B8C\u6574\u7684\u8D34\u5427\u529F\u80FD\uFF0C\u60A8\u53EF\u4EE5\u6D4F\u89C8\u672C\u5427\u5176\u5B83\u5185\u5BB9\uFF0C\u7ED9\u60A8\u5E26\u6765\u4E0D\u4FBF\u5E0C\u671B\u5F97\u5230\u60A8\u7684\u8C05\u89E3\u3002",701:"\u4E3A\u4E86\u51CF\u5C11\u6076\u610F\u704C\u6C34\u548C\u5E7F\u544A\u5E16\uFF0C\u672C\u5427\u4E0D\u5141\u8BB8\u672A\u767B\u5F55\u7528\u6237\u53D1\u8D34\uFF0C\u767B\u5F55\u7528\u6237\u4E0D\u53D7\u5F71\u54CD\uFF0C\u7ED9\u60A8\u5E26\u6765\u7684\u4E0D\u4FBF\u6DF1\u8868\u6B49\u610F",702:"\u4E3A\u4E86\u51CF\u5C11\u6076\u610F\u704C\u6C34\u548C\u5E7F\u544A\u5E16\uFF0C\u672C\u5427\u9650\u5236\u90E8\u5206\u7528\u6237\u53D1\u8D34\uFF0C\u7ED9\u60A8\u5E26\u6765\u7684\u4E0D\u4FBF\u6DF1\u8868\u6B49\u610F",703:"\u4E3A\u4E86\u51CF\u5C11\u6076\u610F\u704C\u6C34\u548C\u5E7F\u544A\u5E16\uFF0C\u672C\u5427\u88AB\u8BBE\u7F6E\u4E3A\u4EC5\u672C\u5427\u4F1A\u5458\u624D\u80FD\u53D1\u8D34\uFF0C\u7ED9\u60A8\u5E26\u6765\u7684\u4E0D\u4FBF\u6DF1\u8868\u6B49\u610F\u3002<a href='/f?kw=this.bdQueryWordEnc#1' target=_blank>\u70B9\u6B64\u7533\u8BF7\u52A0\u5165</a>\u672C\u5427\u4F1A\u5458",704:"\u4E3A\u4E86\u51CF\u5C11\u6076\u610F\u704C\u6C34\u548C\u5E7F\u544A\u5E16\uFF0C\u672C\u5427\u88AB\u8BBE\u7F6E\u4E3A\u4EC5\u672C\u5427\u7BA1\u7406\u56E2\u961F\u624D\u80FD\u53D1\u8D34\uFF0C\u7ED9\u60A8\u5E26\u6765\u7684\u4E0D\u4FBF\u6DF1\u8868\u6B49\u610F",705:"\u672C\u5427\u5F53\u524D\u53EA\u80FD\u6D4F\u89C8\uFF0C\u4E0D\u80FD\u53D1\u8D34\uFF01",706:"\u62B1\u6B49\uFF0C\u672C\u8D34\u6682\u65F6\u65E0\u6CD5\u56DE\u590D\u3002",45:"\u62B1\u6B49\uFF0C\u60A8\u63D0\u4EA4\u7684\u8D34\u5427\u540D\u79F0\u542B\u7279\u6B8A\u5B57\u7B26\uFF0C\u76EE\u524D\u65E0\u6CD5\u521B\u5EFA\uFF0C\u63A8\u8350\u60A8\u4F7F\u7528\u6C49\u5B57\u3001\u5B57\u6BCD\u6216\u6570\u5B57\u4F5C\u4E3A\u8D34\u5427\u540D\u79F0",46:"\u62B1\u6B49\uFF0C\u60A8\u7684\u8D34\u5B50\u8FC7\u957F\uFF0C\u65E0\u6CD5\u6B63\u5E38\u63D0\u4EA4\u3002\u5EFA\u8BAE\u60A8\u7CBE\u7B80\u6216\u5206\u6BB5\u540E\u91CD\u65B0\u63D0\u4EA4\uFF0C\u8C22\u8C22!",815:"\u62B1\u6B49\uFF0C\u60A8\u5DF2\u9000\u51FA\u767B\u5F55\u6216\u672A\u8D2D\u4E70\u97F3\u4E50\u9053\u5177\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5",900:"\u4E3A\u62B5\u5FA1\u6316\u575F\u5371\u5BB3\uFF0C\u672C\u5427\u5427\u4E3B\u5DF2\u653E\u51FA\u8D34\u5427\u795E\u517D--\u8D85\u7EA7\u9759\u6B62\u86D9\uFF0C\u672C\u8D34\u6682\u65F6\u65E0\u6CD5\u56DE\u590D\u3002",961:"\u53D1\u8D34\u5931\u8D25\uFF0C\u60A8\u8F93\u5165\u7684\u56FE\u7247\u5730\u5740\u6709\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u66F4\u6B63\u540E\u518D\u6B21\u53D1\u5E03\uFF1A\uFF09",9001:"\u7531\u4E8E\u533F\u540D\u72B6\u6001\u6216\u672C\u5427\u8BBE\u7F6E\uFF0C\u65E0\u6CD5\u53D1\u8868\u5E26\u6709\u56FE\u7247\u7684\u4E3B\u9898\u3002",2100:"\u5185\u5BB9\u542B\u6709\u9AD8\u7EA7\u5B57\u4F53\u6548\u679C\uFF0C\u4FDD\u6301\u8FDE\u7EED\u7B7E\u5230\u5C31\u80FD\u4F7F\u7528\u54E6~~",4010:"\u60A8\u7684\u8D26\u53F7\u5B58\u5728\u5B89\u5168\u98CE\u9669\u6682\u4E0D\u80FD\u53D1\u8D34\uFF0C\u8BF7\u5148\u8FDB\u884C\u624B\u673A\u7ED1\u5B9A\u540E\u518D\u53D1\u8D34\u5427\u3002",9e3:"\u60A8\u8FD8\u6CA1\u6709\u7528\u6237\u540D\uFF0C\u4E0D\u80FD\u5728\u672C\u5427\u53D1\u8D34\u3002\u8BF7\u5148\u586B\u5199\u7528\u6237\u540D\u3002",402011:"\u56FE\u7247\u5BBD\u5EA6\u8D85\u51FA\u9650\u5236",402012:"\u56FE\u7247\u9AD8\u5EA6\u8D85\u51FA\u9650\u5236",402013:"\u56FE\u7247\u6807\u7B7E\u65E0\u6548",220900:"\u7981\u6B62\u6316\u575F",3250012:"\u53D1\u8D34\u5931\u8D25\uFF0C\u60A8\u7684\u8D26\u53F7\u5B58\u5728\u88AB\u76D7\u98CE\u9669\uFF0C\u8BF7\u5728\u53D1\u8D34\u9875\u9762\u70B9\u51FB\u9A8C\u8BC1",3250024:"\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"},auditMessageMap:{"-61":"\u60A8\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u4E3A\u4E86\u4FDD\u8BC1\u8D34\u5B50\u8D28\u91CF\uFF0C\u672C\u5427\u6240\u53D1\u7684\u8D34\u5B50\u5F85\u7CFB\u7EDF\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85","-62":"\u60A8\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u4E3A\u4E86\u4FDD\u8BC1\u8D34\u5B50\u8D28\u91CF\uFF0C\u672C\u5427\u8D34\u56FE\u7684\u8D34\u5B50\u9700\u8981\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85","-74":"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u7CFB\u7EDF\u9700\u8981\u6838\u5B9E\u8BE5\u8D34\u5B50\u5185\u5BB9\u662F\u5426\u542B\u6709\u4E0D\u826F\u4FE1\u606F\uFF0C\u8D34\u5B50\u5728\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85","-75":"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u7CFB\u7EDF\u9700\u8981\u6838\u5B9E\u8BE5\u8D34\u5B50\u5185\u5BB9\u662F\u5426\u542B\u6709\u4E0D\u826F\u4FE1\u606F\uFF0C\u8D34\u5B50\u5728\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85","-60":"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u7CFB\u7EDF\u9700\u8981\u6838\u5B9E\u8BE5\u8D34\u5B50\u5185\u5BB9\u662F\u5426\u542B\u6709\u4E0D\u826F\u4FE1\u606F\uFF0C\u8D34\u5B50\u5728\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85","-70":"\u60A8\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u4E3A\u4E86\u63A7\u5236\u5E7F\u544A\u8D34\uFF0C\u9700\u8981\u901A\u8FC7\u5BA1\u6838\u540E\u624D\u80FD\u53D1\u5E03\u3002\u767B\u9646\u7F72\u540D\u53D1\u8D34\u4E0D\u53D7\u6B64\u9650\u5236\u3002","-71":"\u60A8\u53D1\u8868\u7684\u5E16\u5B50\u592A\u957F\u4E86\u3002\u4E3A\u4E86\u9632\u6B62\u704C\u6C34\uFF0C\u9700\u7CFB\u7EDF\u5BA1\u6838\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u7A0D\u540E\u67E5\u770B","default":"\u60A8\u53D1\u8868\u7684\u8D34\u5B50\u5DF2\u7ECF\u6210\u529F\u63D0\u4EA4\uFF0C\u4F46\u7CFB\u7EDF\u9700\u8981\u6838\u5B9E\u8BE5\u8D34\u5B50\u5185\u5BB9\u662F\u5426\u542B\u6709\u4E0D\u826F\u4FE1\u606F\uFF0C\u8D34\u5B50\u5728\u5BA1\u6838\u901A\u8FC7\u540E\u624D\u80FD\u663E\u793A\uFF0C\u8BF7\u60A8\u8010\u5FC3\u7B49\u5F85"},handlerMap:{}}});
;_.Module.define({path:"pcommon/widget/PostService",requires:["PostResultHandlerManager","common/widget/BskService","ucenter/widget/LikeTip","pcommon/widget/RewardTip","tbmall/widget/TbeanSafe","pcommon/widget/ParamsXssHandler","pcommon/widget/JiyanService"],sub:{_defaultData:{ie:"utf-8",kw:"",fid:"",tid:"",vcode_md5:"",floor_num:0,rich_text:1,tbs:0,content:"",basilisk:1},posting:!1,submitUrl:{thread:"/f/commit/thread/add",reply:"/f/commit/post/add",vpostThread:"/vpost/addthread",vpostReply:"/vpost/addpost",timeaxisThread:"/frsstar/commit/agency/addTimeline",timeaxisVpostThread:"",repost:"/relay/commit",guessingThread:"/tbmall/gthread/addgthread",guessingThreadNew:"/tbmall/guess/add",guessingFeeling:"/tbmall/gthread/addfeeling",repostNew:"/relay/commitNew"},initial:function(){var e=this;this.resultHandlerManager=this.use("PostResultHandlerManager"),this.paramsXssHandler=this.requireInstance("pcommon/widget/ParamsXssHandler"),this.bind("retry",function(t,a){e._retryHandler(a)}),this.bind("retryPost",function(t,a){e.retryPost(a)}),this.bind("uegPostParameter",function(){e.uegPostParameter()}),this.initGeeTestService()},getJiyanChallenge:function(){for(var e=$('head script[src*="api.geetest.com"]').filter('[src*="challenge"]'),t=e[e.length-1].src.split("&"),a=0;a<t.length;a++)if(-1!=t[a].indexOf("challenge"))return t[a].split("=")[1]},initGeeTestService:function(){window.jiyanService&&window.jiyanService.jiyanCaptcha||(window.jiyanService=this.requireInstance("pcommon/widget/JiyanService"));var e=this;window.jiyanService.onValidateInitError(function(){$.stats.track("initFail","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:""})}),window.jiyanService.onValidateAjaxError(function(){$.stats.track("ajaxError","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:""})}),window.jiyanService.jiyanCaptcha?e.setJiyanCallback():window.jiyanService.onValidateReady(function(){e.setJiyanCallback()})},setJiyanCallback:function(){var e=this;window.jiyanService.onValidateClose(function(){e.trigger("complete"),$.stats.track("verifyClose","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:"",challenge:window.jiyanService.getJiyanChallenge()})}),window.jiyanService.onValidateSuccess(function(){try{var t=window.jiyanService.jiyanCaptcha.getValidate()}catch(a){return $.stats.track("getValidateError","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:"",challenge:window.jiyanService.getJiyanChallenge()}),void 0}if(!t)return $.stats.track("getValidateEmpty","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:"",challenge:window.jiyanService.getJiyanChallenge()}),void 0;$.stats.track("verifySuccess","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:"",challenge:window.jiyanService.getJiyanChallenge()});var i={};$.extend(i,t,e.postDataCache),e.postAg(e.postTypeCache,i,e.postContextCache)}),window.jiyanService.onValidateError(function(t,a){$.stats.track("verifyFail","threeVerifiction","pb_poster","click",{content:e.postDataCache?e.postDataCache.content:"",challenge:window.jiyanService.getJiyanChallenge(),error_code:a})})},isPosting:function(){return this.posting},postAg:function(e,t,a){var i=this,n=$.extend({},this._defaultData);a&&$.extend(n,this._extractDataFromContext(a)),$.extend(n,t),n.__type__=e,n.geetest_success=window.jiyanService.geetest_success;var r=this.submitUrl[e];return this.bskService=this.requireInstance("common/widget/BskService"),this.bskService.slientEncrypt({tbs:n.tbs},n).then(function(e){$.ajax({type:"post",url:r,data:i.paramsXssHandler.xssFilter(e),success:function(t){var a=t.err_code||t.no;if(1990055===a)if($("#rich_ueditor_tpl .j_submit").toggleClass("btn_default"),$("#rich_ueditor_tpl .j_submit").toggleClass("btn_disable"),$("#rich_ueditor_tpl .j_posting_status").toggleClass("poster_posting_status_loading"),"undefined"==typeof passport||"undefined"==typeof passport.pop.init){var n="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),r="https://passport";$.JsLoadManager.use([r+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(n/6e4),r+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(n/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:$.tb.location.getProtocol()+"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show();else if(238009===a)$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7531\u4E8E\u697C\u4E3B\u8BBE\u7F6E\u4E86\u8BC4\u8BBA\u6743\u9650\u4F60\u65E0\u6CD5\u8BC4\u8BBA\u6B64\u8D34\u54E6",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]});else if(238010===a)$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7531\u4E8E\u697C\u4E3B\u8BBE\u7F6E\u4E86\u8BC4\u8BBA\u6743\u9650\uFF0C\u4F60\u9700\u8981\u5148\u5173\u6CE8TA\uFF0C\u624D\u80FD\u53D1\u8868\u8BC4\u8BBA",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]});else{var s=t.error||"\u697C\u4E3B",o=i.resultHandlerManager.getHandler(a,s);o.call(i,t,e)}},error:function(){$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7F51\u901F\u6709\u70B9\u4E0D\u7ED9\u529B\u54E6~\u8BF7\u5C1D\u8BD5\u91CD\u65B0\u63D0\u4EA4\u4E00\u4E0B\u5427\uFF01",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]})},complete:function(){i.posting=!1},dataType:"json"})}),this},post:function(e,t,a){this.postDataCache=t,this.postContextCache=a,this.postTypeCache=e;var i=this;if(this.posting)return this;this.posting=!0;var n=$.extend({},this._defaultData);a&&$.extend(n,this._extractDataFromContext(a)),$.extend(n,t),n.__type__=e,n.geetest_success=window.jiyanService.geetest_success;var r=this.submitUrl[e];return this.bskService=this.requireInstance("common/widget/BskService"),this.bskService.slientEncrypt({tbs:n.tbs},n).then(function(e){$.ajax({type:"post",url:r,data:i.paramsXssHandler.xssFilter(e),success:function(t){var a=t.err_code||t.no;if(1990055===a)if($("#rich_ueditor_tpl .j_submit").toggleClass("btn_default"),$("#rich_ueditor_tpl .j_submit").toggleClass("btn_disable"),$("#rich_ueditor_tpl .j_posting_status").toggleClass("poster_posting_status_loading"),"undefined"==typeof passport||"undefined"==typeof passport.pop.init){var n="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime(),r="https://passport";$.JsLoadManager.use([r+".baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(n/6e4),r+".baidu.com/passApi/js/wrapper.js?cdnversion="+Math.floor(n/6e4)],function(){window.realname=passport.pop.init({type:"accRealName",apiOpt:{product:"tb",staticPage:$.tb.location.getProtocol()+"//tieba.baidu.com/tb/static-common/html/pass/v3Jump.html"},tangram:!0,color:"green"}),window.realname.show()},!0,"utf-8")}else window.realname.show();else if(238009===a)$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7531\u4E8E\u697C\u4E3B\u8BBE\u7F6E\u4E86\u8BC4\u8BBA\u6743\u9650\u4F60\u65E0\u6CD5\u8BC4\u8BBA\u6B64\u8D34\u54E6",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]});else if(238010===a)$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7531\u4E8E\u697C\u4E3B\u8BBE\u7F6E\u4E86\u8BC4\u8BBA\u6743\u9650\uFF0C\u4F60\u9700\u8981\u5148\u5173\u6CE8TA\uFF0C\u624D\u80FD\u53D1\u8868\u8BC4\u8BBA",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]});else if(2150041===a)if(window.jiyanService&&window.jiyanService.jiyanCaptcha){$.stats.track("needValidate","threeVerifiction","pb_poster","click",{challenge:window.jiyanService.getJiyanChallenge(),content:e.content});try{window.jiyanService.jiyanCaptcha.verify(),$.stats.track("popupSuccess","threeVerifiction","pb_poster","click",{challenge:window.jiyanService.getJiyanChallenge(),content:e.content})}catch(s){$.stats.track("popupError","threeVerifiction","pb_poster","click",{content:e.content,challenge:window.jiyanService.getJiyanChallenge()});var o=t.error||"\u697C\u4E3B",c=i.resultHandlerManager.getHandler(a,o);c.call(i,t,e)}}else{$.stats.track("needValidate","threeVerifiction","pb_poster","click",{challenge:"needValidate but init fail",content:e.content});var o=t.error||"\u697C\u4E3B",c=i.resultHandlerManager.getHandler(a,o);c.call(i,t,e)}else{var o=t.error||"\u697C\u4E3B",c=i.resultHandlerManager.getHandler(a,o);c.call(i,t,e)}},error:function(){$.tb.alert({title:"\u53D1\u8D34\u5931\u8D25",message:"\u7F51\u901F\u6709\u70B9\u4E0D\u7ED9\u529B\u54E6~\u8BF7\u5C1D\u8BD5\u91CD\u65B0\u63D0\u4EA4\u4E00\u4E0B\u5427\uFF01",buttons:[{text:"\u786E\u5B9A",callback:function(){i.trigger("complete")}}]})},complete:function(){i.posting=!1},dataType:"json"})}),this},_extractDataFromContext:function(e){return{kw:e.forum.name,fid:e.forum.id,tid:e.thread?e.thread.id:0,tbs:e.tbs,floor_num:e.floor}},_retryHandler:function(e){this.post(e.__type__,e)},success:function(e){return this.bind("success",e),this},error:function(e){return this.bind("error",e),this},complete:function(e){return this.bind("complete",e),this},uegPostParameter:function(){$.extend(this._defaultData,{ueg_complain_flag:1})},retryPost:function(){this.post(this.postTypeCache,this.postDataCache,this.postContextCache)},retry:function(e){return this._retryHandler=e,this}}});